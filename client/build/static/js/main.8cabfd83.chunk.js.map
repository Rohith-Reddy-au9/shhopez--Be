{"version":3,"sources":["firebase.js","function/auth.js","pages/auth/Login.js","pages/auth/Register.js","function/product.js","function/rating.js","components/card/ProductCard.js","components/card/loadingcars.js","components/home/newArrivals.js","components/home/bestArrivals.js","components/card/Jumborton.js","pages/Home.js","components/form/search.js","components/nav/Header.js","pages/auth/RegisterComplete.js","pages/auth/ForgotPassword.js","components/nav/usernav.js","function/user.js","components/card/paymentInfo.js","pages/user/History.js","components/routes/loadingPage.js","components/routes/user.js","components/routes/admin.js","pages/user/password.js","pages/user/wishlist.js","components/nav/adminnav.js","function/admin.js","components/order/order.js","pages/admin/adminDashboard.js","function/category.js","components/form/categoryForm.js","components/form/searchForm.js","pages/admin/category/createcategory.js","pages/admin/category/categoryUpdate.js","function/subcategory.js","pages/admin/subCategory/subcategoryCreate.js","pages/admin/subCategory/subcategoryUpdate.js","components/form/productCreateForm.js","components/form/fileUpload.js","pages/admin/product/productCreate.js","components/card/adminproductcard.js","pages/admin/product/allProducts.js","components/form/productUpdateForm.js","pages/admin/product/productUpdate.js","components/card/viewproduct.js","components/modal/rating.js","components/card/singleProduct.js","pages/product.js","function/coupon.js","pages/admin/coupon/coupon.js","pages/shop.js","components/card/displaycartItems.js","pages/Cart.js","components/drawer/cartSide.js","pages/checkout.js","components/stripeCheckout.js","function/stripe.js","pages/palceOrder.js","App.js","reportWebVitals.js","reducers/cartReducer.js","reducers/index.js","reducers/userReducer.js","reducers/searchReducer.js","reducers/cartsideReducer.js","reducers/couponReducer.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","googleAuthProvider","GoogleAuthProvider","createOrUpdateUser","authtoken","a","axios","post","process","headers","currentUser","currentAdmin","Login","history","useState","email","setEmail","password","setPassword","loading","setLoading","user","useSelector","state","useEffect","location","token","push","dispatch","useDispatch","roleBase","res","intended","from","data","role","handleSubmit","e","preventDefault","signInWithEmailAndPassword","result","getIdTokenResult","idTokenResult","then","type","payload","name","_id","catch","err","console","log","toast","error","message","googleLogin","signInWithPopup","className","onSubmit","value","onChange","target","placeholder","autoFocus","onClick","block","shape","icon","MailOutlined","size","disabled","length","GoogleOutlined","to","Register","config","url","handleCodeInApp","sendSignInLinkToEmail","success","window","localStorage","setItem","createProduct","product","getProductsByCount","count","get","ProductRemove","slug","delete","getProduct","updateProduct","put","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelatedProduct","getSearchProducts","arg","RatingAvg","p","ratings","total","allRatings","map","r","reduce","n","starDimension","starSpacing","starRatedColor","rating","editing","Meta","Card","ProductCard","tooltip","setTooltip","images","title","description","price","cover","alt","src","style","height","objectFit","actions","EyeOutlined","cart","getItem","JSON","parse","unique","_","uniqWith","isEqual","stringify","quantity","ShoppingCartOutlined","substring","LoadingCard","totalCards","i","active","cards","NewArrivals","products","setProducts","productsCount","setProductsCount","setPage","loadAllProducts","current","BestSellers","Jumbotron","text","options","strings","autoStart","loop","Home","Search","search","useHistory","SearchOutlined","cursor","SubMenu","Menu","Item","Header","setCurrent","key","selectedKeys","mode","AppstoreOutlined","ShoppingOutlined","offset","UserAddOutlined","UserOutlined","SettingOutlined","split","LogoutOutlined","signOut","RegisterComplete","signInWithEmailLink","href","emailVerified","removeItem","updatePassword","ForgotPassword","sendPasswordResetEmail","UserNav","addToWishlist","getToWishlist","updateWishlist","userCart","getUserCart","emptyCart","userAddress","address","applyCoupon","coupon","createOrder","stripeResponse","getUserOrders","ShowPaymentInfo","paymentIntent","id","amount","toLocaleString","currency","toUpperCase","payment_method_types","status","Date","created","orderStatus","History","orders","setOrders","loadUserOrders","showOrderInTable","scope","brand","color","shipping","CheckCircleOutlined","CloseCircleOutlined","Loadingpage","setCount","interval","setInterval","currentCount","clearInterval","UserRoute","children","rest","render","AdminRoute","ok","setOk","Password","Wishlist","wishlist","setWishlist","loadWishlist","DeleteOutlined","AdminNav","getOrders","changeStatus","orderId","Orders","handleStatusChange","showStatus","defaultValue","AdminDashboard","loadOrders","getCategories","getCategory","removeCategory","updateCategory","category","createCategory","getCategorySub","CategoryForm","setName","required","SearchForm","keyword","setKeyword","toLowerCase","CategoryCreate","categories","setCategories","loadCategories","c","handleRemove","confirm","response","filter","includes","searchedItem","EditOutlined","CategoryUpdate","match","loadCategory","params","getSubCategories","getSubCategory","removeSubCategory","updateSubCategory","subCategory","createSubCategory","SubCategoryCreate","setCategory","subcategories","setSubCategories","loadSubCategories","parent","s","SubCategoryUpdate","setParent","loadSubCategory","selected","Option","Select","ProductForm","handleChange","setValues","values","handleCatagoryChange","showSub","subOptions","subc","colors","brands","width","sc","b","FileUpload","image","public_id","filteredimages","item","multiple","hidden","accept","files","allUploadedFiles","Resizer","imageFileResizer","uri","initialState","descriptioin","ProductCreate","setSubOptions","setShowSub","LoadingOutlined","alert","reload","AdminProductCard","removeProduct","AllProducts","ProductUpdateForm","selectedCategory","handleCategoryChange","arrayOfSubs","setArrayOfSubs","ProductUpdate","setSelectedCategory","loadProduct","arr","prev","ProductListItems","sold","RatingModal","modalVisible","setModalVisible","useParams","pathname","StarOutlined","centered","visible","onOk","onCancel","TabPane","Tabs","SingleProduct","onStartClick","showArrows","autoPlay","infiniteLoop","tab","undefined","windows","HeartOutlined","numberOfStars","isSelectable","changeRating","ProductView","setProduct","related","setRelated","setStar","loadProductDetails","existingRatingObject","find","ele","postedBy","toString","newrating","createCoupon","getCoupons","removeCoupon","couponId","CreateCouponPage","expiry","setExpiry","discount","setDiscount","coupons","setCoupons","loadAllCoupons","table","date","toLocaleDateString","Shop","setPrice","categoryIds","setCategoryIds","subs","setSubs","setSub","setBrand","setColor","setShipping","fetchProducts","delayed","setTimeout","query","clearTimeout","handleCheck","inTheState","justChecked","foundInTheState","indexOf","splice","handleSub","sub","handleBrand","handleColor","defaultOpenKeys","tipFormatter","v","range","max","DownSquareOutlined","maringTop","checked","DisplayCartProducts","small","large","CloseOutlined","Cart","currentValue","nextValue","SideDrawer","sideDraw","imageStyle","closable","onClose","Checkout","setTotal","setAddress","setAddressSaved","setCoupon","totalAfterDiscount","setTotalAfterDiscount","discountError","setDiscountError","cartTotal","theme","StripeCheckout","succeeded","setSucceeded","setError","processing","setProcessing","setDisabled","clientSecret","setClientSecret","setCartTotal","payable","setPayable","stripe","useStripe","elements","useElements","couponApplied","createPaymentIntent","confirmCardPayment","payment_method","card","getElement","CardElement","billing_details","empty","DollarOutlined","CheckOutlined","toFixed","base","fontFamily","fontSmoothing","fontSize","invalid","iconColor","PaymentPage","promise","loadStripe","App","unsubscribe","onAuthStateChanged","exact","path","component","CouponPage","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","action","store","createStore","composeWithDevTools","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.8cabfd83.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\"\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAE0NWeC0yx2Tuhwo8XZdH0_EBHb5q5SgA\",\r\n    authDomain: \"luvih-76d9c.firebaseapp.com\",\r\n    projectId: \"luvih-76d9c\",\r\n    storageBucket: \"luvih-76d9c.appspot.com\",\r\n    messagingSenderId: \"542838529501\",\r\n    appId: \"1:542838529501:web:c300a8fe3e588dcf612a34\"\r\n};\r\n\r\n  // Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n// export\r\nexport const auth = firebase.auth();\r\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\n","import axios from 'axios'\r\n// const url = \"http://localhost:9000/api\"\r\n\r\nexport const createOrUpdateUser = async (authtoken) =>{\r\n    return await axios.post(\r\n        (`${process.env.REACT_APP_API}/create-or-update-user`),\r\n        {},\r\n        {\r\n            headers: {\r\n                authtoken,\r\n            },\r\n        }\r\n    )\r\n}\r\n\r\nexport const currentUser = async (authtoken) =>{\r\n    return await axios.post(\r\n        (`${process.env.REACT_APP_API}/current-user`),\r\n        {},\r\n        {\r\n            headers: {\r\n                authtoken,\r\n            },\r\n        }\r\n    )\r\n}\r\n\r\nexport const currentAdmin = async (authtoken) =>{\r\n    return await axios.post(\r\n        `${process.env.REACT_APP_API}/current-admin`,\r\n        {},\r\n        {\r\n            headers: {\r\n                authtoken,\r\n            },\r\n        }\r\n    )\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { auth, googleAuthProvider } from '../../firebase'\r\nimport { toast } from 'react-toastify'\r\nimport { Button } from 'antd'\r\nimport { MailOutlined, GoogleOutlined } from '@ant-design/icons';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport {createOrUpdateUser} from '../../function/auth'\r\n\r\n\r\n\r\nconst Login = ({ history }) => {\r\n\r\n        const [email, setEmail] = useState(\"Nitishaa.kaur96@gmail.com\");\r\n        const [password, setPassword] = useState(\"112233\");\r\n        const [loading, setLoading] = useState(false);\r\n\r\n    const { user } = useSelector((state) => ({...state}));\r\n\r\n    useEffect(() => {\r\n        let intended = history.location.state\r\n        if(intended){\r\n            return\r\n        } else{\r\n            if(user && user.token) history.push(\"/\");\r\n        }\r\n    }, [history, user]);\r\n\r\n    let dispatch = useDispatch()\r\n\r\n    const roleBase = (res) => {\r\n        // intented\r\n        let intended = history.location.state\r\n        if(intended){\r\n            history.push(intended.from)\r\n        }\r\n        else{\r\n            if(res.data.role === 'admin'){\r\n                history.push('/admin/dashboard')\r\n            } else{\r\n                history.push('/user/history')\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n        const handleSubmit = async (e) => {\r\n            e.preventDefault();\r\n            setLoading(true);\r\n            // console.table(email, password);\r\n            try{\r\n                const result = await auth.signInWithEmailAndPassword(email, password);\r\n                // console.log(result);\r\n                const { user } = result\r\n                const idTokenResult = await user.getIdTokenResult();\r\n\r\n                createOrUpdateUser(idTokenResult.token)\r\n                .then((res)=>{\r\n                    dispatch({\r\n                        type: \"LOGGED_IN_USER\",\r\n                        payload: {\r\n                            name: res.data.name,\r\n                            email: res.data.email,\r\n                            token: idTokenResult.token,\r\n                            role: res.data.role,\r\n                            _id: res.data._id\r\n                            },\r\n                    });\r\n                    roleBase(res)\r\n                })\r\n                .catch((err)=>{\r\n                    console.log(err)\r\n                });\r\n                // history.push('/');\r\n            } catch (error) {\r\n                console.log(error);\r\n                toast.error(error.message);\r\n                setLoading(false);\r\n            }\r\n        };\r\n        \r\n        const googleLogin = async () => {\r\n            auth\r\n            .signInWithPopup(googleAuthProvider)\r\n            .then( async (result) => {\r\n                const { user } = result\r\n                const idTokenResult = await user.getIdTokenResult();\r\n\r\n                createOrUpdateUser(idTokenResult.token)\r\n                .then((res)=>{\r\n                    dispatch({\r\n                        type: \"LOGGED_IN_USER\",\r\n                        payload: {\r\n                            name: res.data.name,\r\n                            email: res.data.email,\r\n                            token: idTokenResult.token,\r\n                            role: res.data.role,\r\n                            _id: res.data._id\r\n                            },\r\n                    });\r\n                    roleBase(res)\r\n                })\r\n                .catch((err)=>{\r\n                    console.log(err)\r\n                });\r\n                // history.push('/');\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n                toast.error(err.message);\r\n            });\r\n        };\r\n        const loginForm = () => (\r\n            <form onSubmit={handleSubmit}>\r\n\r\n                <div className=\"form-group\">\r\n                    <input \r\n                        type=\"email\" \r\n                        className=\"form-control\" \r\n                        value={email} \r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        placeholder=\"Your email\"\r\n                        autoFocus \r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <input \r\n                        type=\"password\" \r\n                        className=\"form-control\" \r\n                        value={password} \r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        placeholder=\"Your password\"\r\n                    />\r\n                </div>\r\n                <br/>\r\n\r\n                <Button\r\n                    onClick={handleSubmit}\r\n                    type=\"primary\"\r\n                    className=\"mb-3\"\r\n                    block\r\n                    shape=\"round\"\r\n                    icon={< MailOutlined/>}\r\n                    size=\"large\"\r\n                    disabled={!email || password.length < 6}\r\n                    >Login with Email/Password\r\n                </Button>\r\n            </form>\r\n        );\r\n\r\n    return(\r\n        <div className=\"container p-5\"> \r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                        <h4>Login</h4>\r\n                    )}\r\n                    {loginForm()}\r\n\r\n                <Button\r\n                    onClick={googleLogin}\r\n                    type=\"danger\"\r\n                    className=\"mb-3\"\r\n                    block\r\n                    shape=\"round\"\r\n                    icon={< GoogleOutlined/>}\r\n                    size=\"large\"\r\n                    >Login with Google\r\n                </Button>\r\n                <Link to=\"/forgot/password\" className=\"float-right text-danger\">\r\n                    Forgot Password\r\n                </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React, { useState, useEffect } from \"react\";\r\nimport { auth } from '../../firebase'\r\nimport { useSelector } from 'react-redux'\r\n\r\n\r\nimport { toast } from 'react-toastify'\r\n    const Register = ({history}) => {\r\n        const [email, setEmail] = useState(\"\");\r\n        const { user } = useSelector((state) => ({...state}));\r\n\r\n        useEffect(() => {\r\n            if(user && user.token) history.push(\"/\");\r\n        }, [history, user]);\r\n\r\n        const handleSubmit = async (e) => {\r\n            e.preventDefault();\r\n            const config = {\r\n                url: \"http://localhost:3000/register/complete\",\r\n                handleCodeInApp: true,\r\n            };\r\n            await auth.sendSignInLinkToEmail(email, config);\r\n            toast.success(\r\n                `Email was sent to ${email}. Click the link to complete your registration.`\r\n            );\r\n            // emil id will be stored in local storge\r\n            window.localStorage.setItem('emailForRegistration', email);\r\n            //clear \r\n            setEmail(\"\");\r\n        };\r\n        const registerForm = () => (\r\n            <form onSubmit={handleSubmit}>\r\n                <input \r\n                    type=\"email\" \r\n                    className=\"form-control\" \r\n                    value={email} \r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    placeholder=\"Your email\"\r\n                    autoFocus \r\n                />\r\n                <br/>\r\n                <button \r\n                    type=\"submit\"\r\n                    className=\"btn btn-raised\">\r\n                    Register\r\n                </button>\r\n            </form>\r\n        );\r\n\r\n    return(\r\n        <div className=\"container p-5\"> \r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h4>Register</h4>\r\n                    {registerForm()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register;","import axios from 'axios'\r\n// const url = \"http://localhost:9000/api\"\r\n\r\n// product related routes\r\n\r\nexport const createProduct = async(product, authtoken) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/product`, product,{\r\n        headers: { authtoken }\r\n})\r\n\r\nexport const getProductsByCount = async (count) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/products/${count}`)\r\n\r\n\r\nexport const ProductRemove = async(slug, authtoken) =>\r\n    await axios.delete(`${process.env.REACT_APP_API}/product/${slug}`,\r\n    {\r\n        headers: { \r\n            authtoken \r\n        }\r\n})\r\n\r\nexport const getProduct = async (slug) => \r\n    await axios.get(`${process.env.REACT_APP_API}/product/${slug}`)\r\n\r\nexport const updateProduct = async(slug, product, authtoken) =>\r\n    await axios.put(`${process.env.REACT_APP_API}/product/${slug}`, product,{\r\n        headers: { authtoken }\r\n})\r\n\r\nexport const getProducts = async ( sort, order, page) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/products`, \r\n    {\r\n        sort, \r\n        order, \r\n        page\r\n})\r\n\r\nexport const getProductsCount = async () =>\r\n    await axios.get(`${process.env.REACT_APP_API}/totalproducts`)\r\n\r\n    \r\nexport const productStar = async(productId, star, authtoken) =>\r\n    await axios.put(`${process.env.REACT_APP_API}/product/star/${productId}`, \r\n    { star },\r\n    {\r\n        headers: { authtoken }\r\n})\r\n\r\n\r\nexport const getRelatedProduct = async (productId) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`)\r\n\r\n// search for products\r\n\r\nexport const getSearchProducts = async (arg) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/search/filters`, arg)\r\n\r\n","import React from \"react\";\r\nimport StarRating from \"react-star-ratings\";\r\n\r\nexport const RatingAvg = (p) =>{\r\n    if(p && p.ratings){\r\n        let total = []\r\n        let allRatings =  p && p.ratings \r\n        let length = allRatings.length\r\n        // console.log(length)\r\n\r\n        allRatings.map((r)=> total.push(r.star))\r\n        let totalReduced = total.reduce((p, n)=> p+n, 0)\r\n        // console.log(\"totalReduced\", totalReduced);\r\n\r\n        let highest = length * 5\r\n        // console.log(\"highest\", highest);\r\n\r\n        let result = (totalReduced * 5)/highest\r\n        // console.log(\"result\", result);\r\n\r\n        return (\r\n            <div className=\"text-center pt-1 pb-3\">\r\n                <span>\r\n                    <StarRating \r\n                        starDimension=\"20px\"\r\n                        starSpacing=\"4px\"\r\n                        starRatedColor=\"green\"\r\n                        rating={result}\r\n                        editing={false}\r\n                    />{\" \"}\r\n                    {p.ratings.length}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { useState } from 'react'\r\nimport { Card, Tooltip } from 'antd';\r\nimport { EyeOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { RatingAvg } from \"../../function/rating\"\r\nimport { useDispatch} from \"react-redux\"\r\n\r\nimport _ from \"lodash\"\r\n\r\nconst { Meta } = Card\r\n\r\nconst ProductCard = ({ product }) => {\r\n\r\n    const [tooltip, setTooltip] = useState(\"Click to add\")\r\n  \r\n    // redux\r\n    // const { user, cart } = useSelector((state) => ({ ...state }));\r\n    const dispatch = useDispatch();\r\n  \r\n    const handleAddToCart = () => {\r\n      // create cart array\r\n      let cart = [];\r\n      if (typeof window !== \"undefined\") {\r\n        // if cart is in local storage GET it\r\n        if (localStorage.getItem(\"cart\")) {\r\n          cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n        }\r\n        // push new product to cart\r\n        cart.push({\r\n          ...product,\r\n          count: 1,\r\n        }); \r\n        // remove duplicates\r\n        let unique = _.uniqWith(cart, _.isEqual);\r\n        // save to local storage\r\n        // console.log('unique', unique)\r\n        localStorage.setItem(\"cart\", JSON.stringify(unique));\r\n        // show tooltip\r\n        setTooltip(\"Added\");\r\n  \r\n        // add to reeux state\r\n        dispatch({\r\n          type: \"ADD_TO_CART\",\r\n          payload: unique,\r\n        });\r\n        \r\n        dispatch({\r\n          type: \"CART_SIDE_VIEW\",\r\n          payload: true,\r\n        });\r\n      }\r\n    };\r\n\r\n    \r\n  \r\n    // destructure\r\n    const { images, title, description, slug, price } = product;\r\n    return (\r\n      <>\r\n        {product && product.ratings && product.ratings.length > 0 ? (\r\n          RatingAvg(product)\r\n        ) : (\r\n          <div className=\"text-center pt-1 pb-3\">No rating yet</div>\r\n        )}\r\n  \r\n        <Card\r\n          cover={\r\n            <img\r\n                alt={title} \r\n                src={images && images.length ? images[0].url : ''}\r\n                style={{ height: \"150px\", objectFit: \"cover\" }}\r\n                className=\"p-1\"\r\n            />\r\n          }\r\n          actions={[\r\n            <Link to={`/product/${slug}`}>\r\n              <EyeOutlined className=\"text-warning\" /> <br /> View Product\r\n            </Link>,\r\n            <Tooltip title={tooltip}>\r\n            <a onClick={handleAddToCart} disabled={product.quantity < 1}>\r\n              <ShoppingCartOutlined className=\"text-danger\" /> <br />\r\n              {product.quantity < 1 ? \"Out of stock\" : \"Add to Cart\"}\r\n            </a>\r\n          </Tooltip>,\r\n          ]}\r\n        >\r\n          <Meta\r\n            title={`${title} - $${price}`}\r\n            description={`${description && description.substring(0, 40)}...`}\r\n          />\r\n        </Card>\r\n      </>\r\n    );\r\n  };\r\n  \r\n  export default ProductCard;\r\n  \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const ProductCard = ({ product }) => {\r\n\r\n//     const { title, description, images, slug, price} = product\r\n//     const { user, cart } = useSelector((state) => ({...state}))\r\n//     const  dispatch  = useDispatch()\r\n//     const [tooltip, setTooltip] = useState(\"Click to add\");\r\n    \r\n\r\n\r\n//     const handleCart = () => {\r\n\r\n//         let cart = []\r\n//         if(typeof window !== \"undefined\") {\r\n//             // if there is a cart in local storage we will GET it \r\n//             if (localStorage.getItem(\"cart\")){\r\n//                 cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n//             }\r\n//             // push new item to cart array\r\n//             cart.push({\r\n//                 ...product,\r\n//                 count:1,\r\n//             });\r\n//             // we are removiing duplicates with loadash \r\n//             let unique = _.uniqWith(cart, _.isEqual)\r\n//             // console.log(\"unique------>\", unique)\r\n//             // i m saving data in local storage in json format\r\n//             localStorage.setItem(\"cart\", JSON.stringify(unique))\r\n//             setTooltip(\"Added\");\r\n\r\n//             // ading product to cart using state\r\n//             dispatch({\r\n//                 type:\" ADD_TO_CART\",\r\n//                 payload: unique \r\n//             }) \r\n//         }\r\n//     }\r\n\r\n\r\n    \r\n\r\n//     return(\r\n//         <>\r\n//         {product && product.ratings && product.ratings.length > 0 ? RatingAvg(product)  : \r\n//             <div className=\"text-center pt-1 pb-3\">\r\n//                     NO RATING YET\r\n//             </div> \r\n//         }\r\n//             <Card\r\n//                 cover={\r\n//                     <img alt={title} \r\n//                     src= {images && images.length ? images[0].url : \" \"} \r\n//                     // style={{ width: 240, height: \"250px\", objectFit: \"cover\" }}\r\n//                     // className = 'p-1'\r\n//                     />\r\n//                 }\r\n//                 actions={[ \r\n//                     <Link to = {`/product/${slug}`}>\r\n//                         <EyeOutlined \r\n//                             className=\"text-warning\" \r\n//                         />\r\n//                         <br /> View Product\r\n//                     </Link>,\r\n//                     <Tooltip title={tooltip}>\r\n//                         <a onClick={handleCart}>\r\n//                             <ShoppingCartOutlined className=\"text-danger\" /> <br /> Add to\r\n//                             Cart\r\n//                         </a>\r\n//                     </Tooltip>,\r\n\r\n//                 ]}\r\n//             >\r\n//                 <Meta\r\n//                     title={`${title} - ${price}`}\r\n//                     description={`${description && description.substring(0, 40)}...`}\r\n//                 />\r\n//             </Card>\r\n//         </>\r\n//     )\r\n// }\r\n// export default ProductCard\r\n","import React from \"react\";\r\nimport { Card, Skeleton } from \"antd\";\r\n\r\nconst LoadingCard = ({ count }) => {\r\n    const cards = () => {\r\n        let totalCards = [];\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            totalCards.push(\r\n                <Card className=\"col-md-4\" key= { i}>\r\n                <Skeleton active></Skeleton>\r\n                </Card>\r\n            );\r\n        }\r\n        return totalCards;\r\n    };\r\n\r\n    return <div className=\"row pb-5\">{cards()}</div>;\r\n};\r\n\r\nexport default LoadingCard;\r\n\r\n\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState } from \"react\";\r\nimport  { getProducts, getProductsCount } from \"../../function/product\"\r\nimport ProductCard from \"../card/ProductCard\"\r\nimport LoadingCard from \"../card/loadingcars\"\r\nimport { Pagination } from \"antd\";\r\n\r\n\r\nconst NewArrivals = () => {\r\n\r\n    const  [ loading, setLoading ] = useState(false)\r\n    const  [ products,   setProducts] = useState([])\r\n    const  [ productsCount, setProductsCount] = useState(0)\r\n    const  [ page, setPage] = useState(1)\r\n\r\n    useEffect(() => {\r\n        loadAllProducts()\r\n    }, [page])\r\n\r\n    useEffect(() => {\r\n        getProductsCount()\r\n        .then((res)=> setProductsCount(res.data) )\r\n    }, [])\r\n\r\n    const loadAllProducts = () =>{\r\n            setLoading(true)\r\n            // sort order limit\r\n            getProducts(\"createdAt\", \"desc\", page).then((res) =>{\r\n                // console.log(\"pages>>>>\",res.data)\r\n                setProducts(res.data)\r\n                // console.log(\"setProducts>>>>\",setProducts)\r\n                setLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container\">\r\n                { loading ? (<LoadingCard count = {3}/>) : (\r\n                    <div className=\"row\">\r\n                        {products.map((product) => (\r\n                            <div key={product._id} className=\"col-md-4\">\r\n                            <ProductCard product={product} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <nav className=\"col-md-4 offset-md-4 text-center pt-5 p-3\">\r\n                    <Pagination\r\n                        current={page}\r\n                        total={(productsCount / 3) * 10}\r\n                        onChange={(value) => setPage(value)}\r\n                    />\r\n                </nav>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default NewArrivals;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState } from \"react\";\r\nimport  { getProducts, getProductsCount } from \"../../function/product\"\r\nimport ProductCard from \"../card/ProductCard\"\r\nimport LoadingCard from \"../card/loadingcars\"\r\nimport { Pagination } from \"antd\";\r\n\r\n\r\nconst BestSellers = () => {\r\n\r\n    const [ loading, setLoading] = useState(false)\r\n    const [ products,   setProducts] = useState([])\r\n    const  [ productsCount, setProductsCount] = useState(0)\r\n    const  [ page, setPage] = useState(1)\r\n    \r\n\r\n    useEffect(() => {\r\n        loadAllProducts()\r\n    }, [page])\r\n\r\n    useEffect(() => {\r\n        getProductsCount()\r\n        .then((res)=> setProductsCount(res.data) )\r\n    }, [])\r\n\r\n    const loadAllProducts = () => {\r\n        setLoading(true)\r\n        getProducts(\"sold\", \"desc\", page).then((res)=>{\r\n            setProducts(res.data)\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <div className=\"container\">\r\n                {/* {JSON.stringify(products)} */}\r\n                { loading ? (<LoadingCard  count = {3}/>\r\n                ) : (\r\n                    <div className = \"row\">\r\n                        {products.map((product)=>(\r\n                            <div key={product._id} className=\"col-md-4\">\r\n                                <ProductCard product  = {product} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <nav className=\"col-md-4 offset-md-4 text-center pt-5 p-3\">\r\n                    <Pagination\r\n                        current={page}\r\n                        total={(productsCount / 3) * 10}\r\n                        onChange={(value) => setPage(value)}\r\n                    />\r\n                </nav>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BestSellers\r\n","import React from \"react\";\r\nimport Typewriter from \"typewriter-effect\";\r\n\r\nconst Jumbotron = ({ text }) => (\r\n  <Typewriter\r\n    options={{\r\n      strings: text,\r\n      autoStart: true,\r\n      loop: true,\r\n    }}\r\n  />\r\n);\r\n\r\nexport default Jumbotron;\r\n","import React from \"react\";\r\nimport NewArrivals from \"../components/home/newArrivals\"\r\nimport BestSellers from \"../components/home/bestArrivals\"\r\n\r\nimport Jumbotron from \"../components/card/Jumborton\"\r\n// import LoadingCard from \"../components/card/loadingcars\"\r\n\r\nconst Home = () => {\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className=\"jumbotron text-danger h1 font-weight-bold text-center\">\r\n                <Jumbotron text={[\"New Arrivals\", \"Best Sellers\", \"Latest Products\"]} />\r\n            </div>\r\n\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n                New Arrivals\r\n            </h4>\r\n            <NewArrivals />\r\n\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n                Best Sellers\r\n            </h4>\r\n            <BestSellers />\r\n        \r\n            \r\n            </>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport { SearchOutlined } from \"@ant-design/icons\";\r\nimport { useHistory} from 'react-router-dom'\r\n\r\n\r\nconst Search = () => {\r\n    const { search } = useSelector((state) => ({...state}))\r\n\r\n    const { text } = search\r\n\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    const handleChange = (e) => {\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload:{text: e.target.value}\r\n        })\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        history.push(`/shop?${text}`)\r\n    }\r\n\r\n    return (\r\n        <form  className=\"form-inline my-2 my-lg-0\" onSubmit={handleSubmit} >\r\n            <input \r\n                className=\"form-control mr-sm-2\" \r\n                type=\"search\"\r\n                value={text}\r\n                placeholder=\"Search\" \r\n                onChange={handleChange}\r\n            />\r\n            <SearchOutlined onClick={handleSubmit} style={{ cursor: \"pointer\" }} />\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\nexport default Search\r\n","import React, { useState } from \"react\";\r\nimport {Menu, Badge} from 'antd'\r\nimport {  AppstoreOutlined, SettingOutlined, UserOutlined, UserAddOutlined, LogoutOutlined, ShoppingOutlined, ShoppingCartOutlined } from '@ant-design/icons';\r\nimport {Link} from 'react-router-dom';\r\nimport firebase from 'firebase'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Search from '../form/search'\r\n\r\nconst { SubMenu, Item } = Menu;\r\n\r\nconst Header = () => {\r\n        const [current, setCurrent] = useState('home');\r\n        let dispatch = useDispatch();\r\n        let { user, cart } = useSelector((state) => ({...state}));\r\n        let history = useHistory();\r\n\r\n        const handleClick = (e) => {\r\n            setCurrent(e.key);\r\n        };\r\n\r\n        const logout = () => {\r\n            firebase.auth().signOut()\r\n            dispatch({\r\n                type: \"LOGOUT\",\r\n                payload: null,\r\n            });\r\n            history.push(\"/login\");\r\n        };\r\n\r\n    return(\r\n        <Menu onClick={handleClick} selectedKeys={[current]} mode=\"horizontal\">\r\n        <Item key=\"home\" icon={<AppstoreOutlined />}>\r\n            <Link to=\"/\">Home</Link>\r\n        </Item>\r\n\r\n        <Item key=\"shop\" icon={<ShoppingOutlined />}>\r\n            <Link to=\"/shop\">Shop</Link>\r\n        </Item>\r\n\r\n        <Item key=\"cart\" icon={<ShoppingCartOutlined />}>\r\n            <Link to=\"/cart\">\r\n            <Badge count={cart.length} offset={[9, 0]}>\r\n                Cart\r\n            </Badge>\r\n            </Link>\r\n        </Item>\r\n\r\n        {!user && (\r\n            <Item key=\"register\" icon={<UserAddOutlined />} className=\"float-right\">\r\n            <Link to=\"/register\">Register</Link>\r\n            </Item>\r\n        )}\r\n\r\n        {!user && (\r\n            <Item key=\"login\" icon={<UserOutlined />} className=\"float-right\">\r\n            <Link to=\"/login\">Login</Link>\r\n            </Item>\r\n        )}\r\n\r\n        \r\n        {user && (\r\n            <SubMenu \r\n                key=\"SubMenu\" \r\n                icon={<SettingOutlined />} \r\n                title={user.email && user.email.split(\"@\")[0]}\r\n                className=\"float-right\"\r\n            >\r\n                { user && user.role === \"subscriber\" && (\r\n                    <Item><Link to=\"/user/history\">Dashboard</Link></Item>\r\n                )}\r\n\r\n                { user && user.role === \"admin\" && (\r\n                    <Item><Link to=\"/admin/dashboard\">Dashboard</Link></Item>\r\n                )}\r\n\r\n                <Item icon={<LogoutOutlined />} onClick={logout}>Logout</Item>\r\n            </SubMenu>\r\n        )}\r\n        <span className=\"float-right p-1\"><Search /></span>\r\n        \r\n      </Menu>\r\n    )\r\n\r\n};\r\n\r\nexport default Header;\r\n\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { auth } from '../../firebase'\r\nimport { toast } from 'react-toastify'\r\nimport { useDispatch } from 'react-redux'\r\nimport {createOrUpdateUser} from '../../function/auth'\r\n\r\n\r\nconst RegisterComplete = ({ history }) => {\r\n        const [email, setEmail] = useState(\"\");\r\n        const [password, setPassword] = useState('');\r\n        // const { user } = useSelector((state) => ({...state}));\r\n\r\n        useEffect(() => {\r\n            setEmail(window.localStorage.getItem(\"emailForRegistration\"));\r\n        }, [history]);\r\n\r\n        let dispatch = useDispatch()\r\n\r\n\r\n        const handleSubmit = async (e) => {\r\n            e.preventDefault();\r\n            //validation\r\n            if(!email || !password) {\r\n                toast.error('Email and password is required.');\r\n                return;\r\n            }\r\n            if(password.length < 6) {\r\n                toast.error(\"Password must contain atleast 6 characters long.\");\r\n                return;\r\n            }\r\n            try{\r\n                const result = await auth.signInWithEmailLink(email, window.location.href);\r\n              \r\n                if(result.user.emailVerified) {\r\n                    //remove user mail from local storage\r\n                    window.localStorage.removeItem(\"emailForRegistration\");\r\n                    // get user id token\r\n                    let user = auth.currentUser\r\n                    await user.updatePassword(password);\r\n                    const idTokenResult = await user.getIdTokenResult()\r\n                    // redux store\r\n                    // console.log('user', user, \"idTokenResult\", idTokenResult);\r\n                    //redirect\r\n                    createOrUpdateUser(idTokenResult.token)\r\n                    .then((res)=>{\r\n                        dispatch({\r\n                            type: \"LOGGED_IN_USER\",\r\n                            payload: {\r\n                                name: res.data.name,\r\n                                email: res.data.email,\r\n                                token: idTokenResult.token,\r\n                                role: res.data.role,\r\n                                _id: res.data._id\r\n                            },\r\n                        });\r\n                    })\r\n                    .catch((err)=>{\r\n                        console.log(err)\r\n                    });\r\n                    history.push('/')\r\n                }\r\n                \r\n            } catch (error) {\r\n                toast.error(error.message);\r\n            }\r\n        };\r\n        \r\n        const completeRegistrationForm = () => (\r\n            <form onSubmit={handleSubmit}>\r\n                <input \r\n                    type=\"email\" \r\n                    className=\"form-control\" \r\n                    value={email} disabled\r\n                />\r\n\r\n                <input \r\n                    type=\"password\" \r\n                    className=\"form-control\" \r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    placeholder=\"password\"\r\n                    autoFocus\r\n                />\r\n\r\n                <br/>\r\n                <button \r\n                    type=\"submit\"\r\n                    className=\"btn btn-raised\">\r\n                    Complete Registration\r\n                </button>\r\n            </form>\r\n        );\r\n    return(\r\n        <div className=\"container p-5\"> \r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h4>Register Complete</h4>\r\n                    {completeRegistrationForm()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RegisterComplete;","import React, { useState, useEffect } from \"react\";\r\nimport { auth } from '../../firebase'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst ForgotPassword = ({ history }) => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const { user } = useSelector((state) => ({...state}));\r\n\r\n    useEffect(() => {\r\n        if(user && user.token) history.push(\"/\");\r\n    }, [history, user]);\r\n\r\n    const handleSubmit  = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const config = {\r\n            url: process.env.REACT_APP_FORGOT_PASSWORD_REDIRECT_URL,\r\n            handleCodeInApp: true,\r\n        };\r\n\r\n        await auth.sendPasswordResetEmail(email, config)\r\n            .then(() => {\r\n                setEmail('')\r\n                setLoading(false)\r\n                toast.success(\"Check your email for password reset link\");\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false);\r\n                toast.error(error.message);\r\n                console.log(\"Error in Forgot Password\", error);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container col-md-6 offset-md-3 p-5\">\r\n            {loading ? (\r\n                <h4 className=\"text-danger\">Loading...</h4>\r\n            ) : (\r\n                <h4>Forgot Password</h4>\r\n            )}\r\n\r\n            <form onSubmit={handleSubmit}>\r\n            <input \r\n                type=\"email\" \r\n                className=\"form-control\" \r\n                value={email} \r\n                onChange={(e) => setEmail(e.target.value)}\r\n                placeholder=\"Your email\"\r\n                autoFocus \r\n            />\r\n\r\n            <br/>\r\n\r\n            <button \r\n                className=\"btn btn-raised\"\r\n                disabled={!email}>\r\n                Submit\r\n            </button>\r\n\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ForgotPassword;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst UserNav = () => {\r\n    return(\r\n        <nav>\r\n            <ul className = \"nav flex-column\">\r\n                <li className=\"nav-item\">\r\n                    <Link to=\"/user/history\" className=\"nav-link\">History</Link>\r\n                </li>\r\n\r\n                <li className=\"nav-item\">\r\n                    <Link to=\"/user/password\"  className=\"nav-link\">Password</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                    <Link to=\"/user/wishlist\"  className=\"nav-link\">Wishlist</Link>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default UserNav","import axios from 'axios'\r\n// const url = \"http://localhost:9000/api\"\r\n\r\nexport const addToWishlist = async (productId, authtoken) => \r\n    await axios.post(`${process.env.REACT_APP_API}/user/wishlist`, \r\n    { productId },\r\n    {\r\n        headers: {\r\n            authtoken\r\n        },\r\n    }\r\n)\r\n\r\nexport const getToWishlist = async ( authtoken) => \r\n    await axios.get(`${process.env.REACT_APP_API}/user/wishlist`, \r\n    {\r\n        headers: {\r\n            authtoken\r\n        },\r\n    })\r\n\r\nexport const updateWishlist = async (productId, authtoken) => \r\n    await axios.put(`${process.env.REACT_APP_API}/user/wishlist/${productId}`, {},\r\n    {\r\n        headers: {\r\n            authtoken\r\n        },\r\n    })\r\n\r\n    // cart\r\nexport const userCart = async (cart, authtoken) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/user/cart`,\r\n        { cart },\r\n        {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n        }\r\n    );\r\n    \r\nexport const getUserCart = async ( authtoken ) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/user/cart`,\r\n        {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n        }\r\n    );\r\n\r\nexport const emptyCart = async ( authtoken ) =>\r\n    await axios.delete(`${process.env.REACT_APP_API}/user/cart`, \r\n        {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n        }\r\n    );\r\n\r\nexport const userAddress = async ( authtoken, address ) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/user/address`, {address}, \r\n        {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n        }\r\n    )\r\n\r\nexport const applyCoupon = async (authtoken, coupon) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/user/cart/coupon`,\r\n        { coupon },\r\n        {\r\n            headers: {\r\n            authtoken,\r\n            },\r\n        }\r\n    );\r\n\r\nexport const createOrder = async (stripeResponse, authtoken) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/user/order`,\r\n        { stripeResponse },\r\n        {\r\n            headers: {\r\n                authtoken,\r\n            },\r\n        }\r\n    );\r\n\r\nexport const getUserOrders = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/user/orders`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n","import React from \"react\";\r\n\r\nconst ShowPaymentInfo = ({ order }) => (\r\n  <div>\r\n    <p>\r\n      <span>Order Id: {order.paymentIntent.id}</span>\r\n      {\" / \"}\r\n      <span>\r\n        Amount:{\" / \"}\r\n        {(order.paymentIntent.amount /= 100).toLocaleString(\"en-US\", {\r\n          style: \"currency\",\r\n          currency: \"USD\",\r\n        })}\r\n      </span>\r\n      {\" / \"}\r\n      <span>Currency: {order.paymentIntent.currency.toUpperCase()}</span>\r\n      {\" / \"}\r\n      <span>Method: {order.paymentIntent.payment_method_types[0]}</span>\r\n      {\" / \"}\r\n      <span>Payment: {order.paymentIntent.status.toUpperCase()}</span>\r\n      {\" / \"}\r\n      <span>\r\n        Orderd on:{\" / \"}\r\n        {new Date(order.paymentIntent.created * 1000).toLocaleString()}\r\n      </span>\r\n      {\" / \"}\r\n      <span className=\"badge bg-primary text-white\">\r\n        STATUS: {order.orderStatus}\r\n      </span>\r\n    </p>\r\n  </div>\r\n);\r\n\r\nexport default ShowPaymentInfo;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect} from \"react\";\r\nimport UserNav from '../../components/nav/usernav'\r\nimport { getUserOrders } from \"../../function/user\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { CheckCircleOutlined, CloseCircleOutlined } from \"@ant-design/icons\";\r\nimport ShowPaymentInfo from '../../components/card/paymentInfo'\r\n\r\nconst History = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    loadUserOrders();\r\n  }, []);\r\n\r\n  const loadUserOrders = () =>\r\n    getUserOrders(user.token).then((res) => {\r\n      console.log(JSON.stringify(res.data, null, 4));\r\n      setOrders(res.data);\r\n    });\r\n\r\n    const showOrderInTable = (order) => (\r\n      <table className=\"table table-bordered\">\r\n        <thead className=\"thead-light\">\r\n          <tr>\r\n            <th scope=\"col\">Title</th>\r\n            <th scope=\"col\">Price</th>\r\n            <th scope=\"col\">Brand</th>\r\n            <th scope=\"col\">Color</th>\r\n            <th scope=\"col\">Count</th>\r\n            <th scope=\"col\">Shipping</th>\r\n          </tr>\r\n        </thead>\r\n  \r\n        <tbody>\r\n          {order.products.map((p, i) => (\r\n            <tr key={i}>\r\n              <td>\r\n                <b>{p.product.title}</b>\r\n              </td>\r\n              <td>{p.product.price}</td>\r\n              <td>{p.product.brand}</td>\r\n              <td>{p.color}</td>\r\n              <td>{p.count}</td>\r\n              <td>\r\n                {p.product.shipping === \"Yes\" ? (\r\n                  <CheckCircleOutlined style={{ color: \"green\" }} />\r\n                ) : (\r\n                  <CloseCircleOutlined style={{ color: \"red\" }} />\r\n                )}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    );\r\n\r\n    const showEachOrders = () =>\r\n      orders.map((order, i) => (\r\n        <div key={i} className=\"m-5 p-3 card\">\r\n          <ShowPaymentInfo order = {order} />\r\n          {showOrderInTable(order)}\r\n          <div className=\"row\">\r\n            <div className=\"col\">\r\n              <p>PDF download</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ));\r\n\r\n  return (\r\n    \r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <UserNav />\r\n        </div>\r\n        <div className=\"col text-center\">\r\n          <h4>\r\n            {orders.length > 0 ? \"User purchase orders\" : \"No purchase orders\"}\r\n          </h4>\r\n          {showEachOrders()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Loadingpage = () => {\r\n  const [count, setCount] = useState(5);\r\n  let history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCount((currentCount) => --currentCount);\r\n    }, 1000);\r\n    // redirect once count is equal to 0\r\n    count === 0 && history.push(\"/\");\r\n    // cleanup\r\n    return () => clearInterval(interval);\r\n  }, [count, history]);\r\n\r\n  return (\r\n    <div className=\"container p-5 text-center\">\r\n      <p>Redirecting you in {count} seconds</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loadingpage;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport LoadingPage from \"./loadingPage\";\r\n\r\n\r\nconst UserRoute = ({children, ...rest}) => {\r\n    const {user } = useSelector((state) => ({...state}))\r\n    return user && user.token ? (\r\n        <Route {...rest} render={()=>children} />\r\n    ) : \r\n    (\r\n        <LoadingPage />\r\n    )\r\n}\r\n\r\nexport default UserRoute","import React, {useEffect, useState} from 'react';\r\nimport { Route } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport {currentAdmin} from '../../function/auth'\r\n\r\nimport LoadingPage from \"./loadingPage\";\r\n\r\n\r\nconst AdminRoute = ({children, ...rest}) => {\r\n    const {user } = useSelector((state) => ({...state}))\r\n    const [ok, setOk] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (user && user.token) {\r\n          currentAdmin(user.token)\r\n            .then((res) => {\r\n              console.log(\"CURRENT ADMIN RES\", res);\r\n              setOk(true);\r\n            })\r\n            .catch((err) => {\r\n              console.log(\"ADMIN ROUTE ERR\", err);\r\n              setOk(false);\r\n            });\r\n        }\r\n      }, [user]);\r\n\r\n    return ok ? <Route {...rest} /> : <LoadingPage />\r\n    \r\n}\r\n\r\nexport default AdminRoute\r\n\r\n\r\n","import React, { useState } from \"react\";\r\nimport { auth } from \"../../firebase\"\r\nimport { toast } from \"react-toastify\"\r\nimport UserNav from '../../components/nav/usernav'\r\n\r\nconst Password = () => {\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    // console.log(password);\r\n\r\n    await auth.currentUser\r\n      .updatePassword(password)\r\n      .then(() => {\r\n        setLoading(false);\r\n        setPassword(\"\");\r\n        toast.success(\"Password updated\");\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        toast.error(err.message);\r\n      });\r\n  };\r\n\r\n  const passwordUpdateForm = () => (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-group\">\r\n        <label>Your Password</label>\r\n        <input\r\n          type=\"password\"\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          className=\"form-control\"\r\n          placeholder=\"Enter new password\"\r\n          disabled={loading}\r\n          value={password}\r\n        />\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          disabled={!password || password.length < 6 || loading}\r\n        >\r\n          Submit\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <UserNav />\r\n        </div>\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading..</h4>\r\n          ) : (\r\n            <h4>Password Update</h4>\r\n          )}\r\n          {passwordUpdateForm()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport UserNav from '../../components/nav/usernav'\r\nimport { useSelector } from 'react-redux'\r\nimport {getToWishlist, updateWishlist } from '../../function/user'\r\nimport { Link } from \"react-router-dom\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\n\r\n// const Wishlist = () => {\r\n//   const [ wishlist, setWishlist] = useState([])\r\n\r\n//   const { user } = useSelector((state) => ({...state}))\r\n\r\n//   useEffect(() => {\r\n//     loadwishlistItems()\r\n//   }, [])\r\n\r\n//   const loadwishlistItems = () =>{\r\n//     getToWishlist(user.token)\r\n//     .then((res)=>{\r\n//       // console.log(res.data);\r\n//       setWishlist(res.data.wishlist)\r\n//     })\r\n//   }\r\n\r\n//   const handleRemove = (productId) => \r\n//     updateWishlist(productId, user.token).then((res)=>{\r\n//       console.log(\"deleted>>>>\", res.data)\r\n//       loadwishlistItems()\r\n//     })\r\n  \r\n\r\n//   return (\r\n//     <div className=\"container-fluid\">\r\n//       <div className=\"row\">\r\n//         <div className=\"col-md-2\">\r\n//           <UserNav />\r\n//         </div>\r\n//         <div className=\"col\">\r\n//           <h4>Wishlist</h4>\r\n\r\n//           {wishlist.map((p) => (\r\n//             <div key={p._id} className=\"alert alert-secondary\">\r\n//               <Link to={`/product/${p.slug}`}>{p.title}</Link>\r\n//               <span\r\n//                 onClick={() => handleRemove(p._id)}\r\n//                 className=\"btn btn-sm float-right\"\r\n//               >\r\n//                 <DeleteOutlined className=\"text-danger\" />\r\n//               </span>\r\n//             </div>\r\n//           ))}\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n\r\n// export default Wishlist;\r\n\r\n\r\n\r\nconst Wishlist = () => {\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    loadWishlist();\r\n  }, []);\r\n\r\n  const loadWishlist = () =>\r\n  getToWishlist(user.token).then((res) => {\r\n      // console.log(res);\r\n      setWishlist(res.data.wishlist);\r\n    });\r\n\r\n  const handleRemove = (productId) =>\r\n  updateWishlist(productId, user.token).then((res) => {\r\n      loadWishlist();\r\n    });\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <UserNav />\r\n        </div>\r\n        <div className=\"col\">\r\n          <h4>Wishlist</h4>\r\n\r\n          {wishlist.map((p) => (\r\n            <div key={p._id} className=\"alert alert-secondary\">\r\n              <Link to={`/product/${p.slug}`}>{p.title}</Link>\r\n              <span\r\n                onClick={() => handleRemove(p._id)}\r\n                className=\"btn btn-sm float-right\"\r\n              >\r\n                <DeleteOutlined className=\"text-danger\" />\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Wishlist;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminNav = () => (\r\n  <nav>\r\n    <ul className=\"nav flex-column\">\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n          Dashboard\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/product\" className=\"nav-link\">\r\n          Product\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/products\" className=\"nav-link\">\r\n          Products\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/category\" className=\"nav-link\">\r\n          Category\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/subcategory\" className=\"nav-link\">\r\n          Sub Category\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n          Coupon\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/user/password\" className=\"nav-link\">\r\n          Password\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default AdminNav;\r\n","import axios from \"axios\";\r\n\r\nexport const getOrders = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/admin/orders`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const changeStatus = async (orderId, orderStatus, authtoken) =>\r\n  await axios.put(\r\n    `${process.env.REACT_APP_API}/admin/order-status`,\r\n    { orderId, orderStatus },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n","import React from \"react\";\r\nimport { CheckCircleOutlined, CloseCircleOutlined } from \"@ant-design/icons\";\r\nimport ShowPaymentInfo from \"../card/paymentInfo\";\r\n\r\n\r\nconst Orders = ({ orders, handleStatusChange }) => {\r\n  const showOrderInTable = (order) => (\r\n    <table className=\"table table-bordered\">\r\n      <thead className=\"thead-light\">\r\n        <tr>\r\n          <th scope=\"col\">Title</th>\r\n          <th scope=\"col\">Price</th>\r\n          <th scope=\"col\">Brand</th>\r\n          <th scope=\"col\">Color</th>\r\n          <th scope=\"col\">Count</th>\r\n          <th scope=\"col\">Shipping</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {order.products.map((p, i) => (\r\n          <tr key={i}>\r\n            <td>\r\n              <b>{p.product.title}</b>\r\n            </td>\r\n            <td>{p.product.price}</td>\r\n            <td>{p.product.brand}</td>\r\n            <td>{p.color}</td>\r\n            <td>{p.count}</td>\r\n            <td>\r\n              {p.product.shipping === \"Yes\" ? (\r\n                <CheckCircleOutlined style={{ color: \"green\" }} />\r\n              ) : (\r\n                <CloseCircleOutlined style={{ color: \"red\" }} />\r\n              )}\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {orders.map((order) => (\r\n        <div key={order._id} className=\"row pb-5\">\r\n          <div className=\"btn btn-block bg-light\">\r\n            <ShowPaymentInfo order={order} showStatus={false} />\r\n\r\n            <div className=\"row\">\r\n              <div className=\"col-md-4\">Delivery Status</div>\r\n              <div className=\"col-md-8\">\r\n                <select\r\n                  onChange={(e) =>\r\n                    handleStatusChange(order._id, e.target.value)\r\n                  }\r\n                  className=\"form-control\"\r\n                  defaultValue={order.orderStatus}\r\n                  name=\"status\"\r\n                >\r\n                  <option value=\"Not Processed\">Not Processed</option>\r\n                  <option value=\"Processing\">Processing</option>\r\n                  <option value=\"Dispatched\">Dispatched</option>\r\n                  <option value=\"Cancelled\">Cancelled</option>\r\n                  <option value=\"Completed\">Completed</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {showOrderInTable(order)}\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../components/nav/adminnav\"\r\nimport { getOrders, changeStatus } from \"../../function/admin\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport Orders from \"../../components/order/order\"\r\n\r\nconst AdminDashboard = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    loadOrders();\r\n  }, []);\r\n\r\n  const loadOrders = () =>\r\n    getOrders(user.token).then((res) => {\r\n      console.log(JSON.stringify(res.data, null, 4));\r\n      setOrders(res.data);\r\n    });\r\n\r\n  const handleStatusChange = (orderId, orderStatus) => {\r\n    changeStatus(orderId, orderStatus, user.token).then((res) => {\r\n      toast.success(\"Status updated\");\r\n      loadOrders();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n\r\n        <div className=\"col-md-10\">\r\n          <h4>Admin Dashboard</h4>\r\n            <Orders orders={orders} handleStatusChange={handleStatusChange} />\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n\r\n\r\n","import axios from 'axios'\r\n// const url = \"http://localhost:9000/api\"\r\n\r\n\r\n//  all categories\r\nexport const getCategories = async () =>\r\n    await axios.get(`${process.env.REACT_APP_API}/categories`)\r\n\r\n\r\nexport const getCategory  = async (slug) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/category/${slug}`)\r\n\r\n\r\nexport const removeCategory = async (slug, authtoken) =>\r\n    await axios.delete(`${process.env.REACT_APP_API}/category/${slug}`, {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n    })\r\n\r\nexport const updateCategory = async (slug, category, authtoken) => \r\n    await axios.put(`${process.env.REACT_APP_API}/category/${slug}`, category, {\r\n        headers: {\r\n            authtoken,\r\n        }\r\n    })\r\n\r\nexport const createCategory = async (category, authtoken) => \r\n    await axios.post(`${process.env.REACT_APP_API}/category`, category, {\r\n        headers: {authtoken}\r\n})\r\n\r\n\r\nexport const getCategorySub = async (_id) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/category/subs/${_id}`);\r\n","import React from 'react'\r\n\r\n\r\n    const CategoryForm = ({name, handleSubmit, setName}) => (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label>Name</label>\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    value={name}\r\n                    autoFocus\r\n                    required\r\n                />\r\n                <br />\r\n                <button className=\"btn btn-outline-primary\">Save</button>\r\n            </div>\r\n        </form>\r\n    );\r\n\r\nexport default CategoryForm\r\n","import React from \"react\";\r\n\r\nconst SearchForm = ({ keyword, setKeyword }) => {\r\n  const handleSearchChange = (e) => {\r\n    e.preventDefault();\r\n    setKeyword(e.target.value.toLowerCase());\r\n  };\r\n\r\n  return (\r\n    <input\r\n      type=\"search\"\r\n      placeholder=\"Search\"\r\n      value={keyword}\r\n      onChange={handleSearchChange}\r\n      className=\"form-control mb-4\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default SearchForm\r\n\r\n","import React,{ useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/adminnav\"\r\nimport { toast } from \"react-toastify\"\r\nimport { useSelector } from 'react-redux'\r\nimport { createCategory, getCategories, removeCategory} from \"../../../function/category\"\r\n\r\nimport { Link } from \"react-router-dom\"\r\nimport {EditOutlined, DeleteOutlined } from '@ant-design/icons'\r\nimport CategoryFrom from '../../../components/form/categoryForm'\r\nimport SearchForm from '../../../components/form/searchForm'\r\n\r\n\r\n\r\nconst CategoryCreate = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    const [ keyword, setKeyword] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n      loadCategories();\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n      getCategories().then((c) => setCategories(c.data));\r\n\r\n    const handleSubmit = (e) => {\r\n      e.preventDefault();\r\n      // console.log(name);\r\n      setLoading(true);\r\n      createCategory({ name }, user.token)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          setLoading(false);\r\n          setName(\"\");\r\n          toast.success(`\"${res.data.name}\" is created`);\r\n          loadCategories();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          setLoading(false);\r\n          if (err.response.status === 400) toast.error(err.response.data);\r\n        });\r\n    };\r\n\r\n    const handleRemove = async (slug) => {\r\n      // let answer = window.confirm(\"Delete?\");\r\n      // console.log(answer, slug);\r\n      if (window.confirm(\"Delete?\")) {\r\n        setLoading(true);\r\n        removeCategory(slug, user.token)\r\n          .then((res) => {\r\n            setLoading(false);\r\n            toast.error(`${res.data.name} deleted`);\r\n            loadCategories();\r\n          })\r\n          .catch((err) => {\r\n            if (err.response.status === 400) {\r\n              setLoading(false);\r\n              toast.error(err.response.data);\r\n            }\r\n          });\r\n      }\r\n    };\r\n\r\n    // const handleSearch = (e) =>{\r\n    //   e.preventDefault();\r\n    //   setKeyword(e.target.value.toLowerCase());\r\n    // }\r\n\r\n    const searchedItem = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\r\n\r\n\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-2\">\r\n            <AdminNav />\r\n          </div>\r\n          <div className=\"col\">\r\n            {loading ? (\r\n              <h4 className=\"text-danger\">Loading..</h4>\r\n            ) : (\r\n              <h4>Create category</h4>\r\n            )}\r\n            <CategoryFrom \r\n                handleSubmit = {handleSubmit}\r\n                name={name}\r\n                setName = {setName}\r\n            />\r\n            <SearchForm \r\n              keyword={keyword}\r\n              setKeyword = {setKeyword}\r\n            />\r\n            {/* <input \r\n              type = \"search\"\r\n              className=\"form-control mb-4\"\r\n              value={keyword}\r\n              placeholder=\"Search\"\r\n              onChange={handl eSearch}\r\n            /> */}\r\n            <hr />\r\n            {categories.filter(searchedItem(keyword)).map((c) => (\r\n              <div className=\"alert alert-secondary\" key={c._id}>\r\n                {c.name}\r\n                <span\r\n                  onClick={() => handleRemove(c.slug)}\r\n                  className=\"btn btn-sm float-right\"\r\n                >\r\n                  <DeleteOutlined className=\"text-danger\" />\r\n                </span>\r\n                <Link to={`/admin/category/${c.slug}`}>\r\n                  <span className=\"btn btn-sm float-right\">\r\n                    <EditOutlined className=\"text-warning\" />\r\n                  </span>\r\n                </Link>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n};\r\n\r\nexport default CategoryCreate;\r\n\r\n// my code get category error\r\n\r\n// const CategoryCreate = () => {\r\n\r\n//   const { user } = useSelector((state) => ({...state}))\r\n\r\n//   const [name, setName] = useState(\"\")\r\n//   const [loading, setLoading] = useState(false)\r\n//   const [categories, setCategories] = useState([])\r\n\r\n//   useEffect(() => {\r\n//     // allcategories =  getCategories().then((c) => setCategories(c.data))\r\n//     allcategories()\r\n//   }, [])\r\n\r\n//   const allcategories = () => getCategories().then((c) => setCategories(c.data))\r\n//   console.log(\">>>>>\",allcategories())\r\n  \r\n//   const handleSubmit= (e) => {\r\n//     e.preventDefault()\r\n//     // console.log(\"name>>>>\",name)\r\n//     setLoading(true)\r\n//     createCategory({name}, user.token)\r\n//       .then((res) => {\r\n//         // console.log(\"res>>>>\", res)\r\n//         setLoading(false)\r\n//         setName('')\r\n//         toast.success(`\"${res.data.name}\" is craeted`)\r\n//         allcategories()\r\n//       })\r\n//       .catch((err) => {\r\n//         // console.log(\"er>>>>\", err)\r\n//         setLoading(false)\r\n//         if(err.response.status === 400) toast.error(err.response.data)\r\n//       });\r\n//   }\r\n\r\n//   const handleRemove = (slug) =>{\r\n//     // let ans =(window.confirm(`Are you sure you want to delete ${slug} item`))\r\n//     // console.log(ans, slug)\r\n//       if(window.confirm('Are you sure you want to delete')){\r\n//         setLoading(true)\r\n//         removeCategory(slug, user.token)\r\n//         .then((res)=>{\r\n//           setLoading(false)\r\n//           toast.error(`successfully you deleted ${res.data.name} item`)\r\n//           allcategories()\r\n//         })\r\n//         .catch((err) => {\r\n//           if (err.response.status === 400) {\r\n//             setLoading(false);\r\n//             toast.error(err.response.data);\r\n//           }\r\n//         })\r\n//       }\r\n//     }\r\n  \r\n\r\n//   const categoryForm = () => <form onSubmit={handleSubmit}>\r\n//      <div className=\"form-group\">\r\n//       <label>Name</label>\r\n//       <input\r\n//           type=\"text\"\r\n//           className=\"form-control\"\r\n//           onChange={(e) => setName(e.target.value)}\r\n//           value={name}\r\n//           autoFocus\r\n//           required\r\n//         />\r\n//         <br />\r\n//       <button className=\"btn btn-outline-primary\">SAVE</button>\r\n//      </div>\r\n//   </form>\r\n\r\n\r\n//   return (\r\n//       <div className=\"container-fluid\">\r\n//           <div className=\"row\">\r\n//             <div className=\"col-md-2\">\r\n//               <AdminNav />\r\n//             </div>\r\n//             <div className=\"col\">\r\n//               {loading ? (\r\n//                 <h4 className=\"text-danger\">Loading...</h4>\r\n//               ):(\r\n//                 <h4>Category Form</h4> \r\n//               )}\r\n//               {categoryForm()}\r\n//               <hr />\r\n              \r\n//               {categories.map((c) => (\r\n//                 <div className=\"alert alert-secondary\" key={c._id}>\r\n//                   {c.name}\r\n//                   {/* <span\r\n//                     onClick={() => handleRemove(c.slug)}\r\n//                     className=\"btn btn-sm float-right\"\r\n//                   >\r\n//                     <DeleteOutlined className=\"text-danger\" />\r\n//                   </span>\r\n//                   <Link to={`/admin/category/${c.slug}`}>\r\n//                     <span className=\"btn btn-sm float-right\">\r\n//                       <EditOutlined className=\"text-warning\" />\r\n//                     </span>\r\n//                   </Link> */}\r\n//                 </div>\r\n//               ))}\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n    \r\n//   );\r\n// };\r\n\r\n// export default CategoryCreate;\r\n\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React,{ useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/adminnav\"\r\nimport { toast } from \"react-toastify\"\r\nimport { useSelector } from 'react-redux'\r\nimport { getCategory, updateCategory} from \"../../../function/category\"\r\nimport CategoryFrom from '../../../components/form/categoryForm'\r\n\r\nconst CategoryUpdate = ({history, match}) => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    // const [categories, setCategories] = useState([]);\r\n\r\n    useEffect(() => {\r\n        // console.log('match>>>>>>>>', match)\r\n        loadCategory()\r\n    }, []);\r\n\r\n    const loadCategory = () =>\r\n        getCategory(match.params.slug).then((c) => setName(c.data.name));\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // console.log(name);\r\n        setLoading(true);\r\n        updateCategory(match.params.slug, { name }, user.token)\r\n        .then((res) => {\r\n            // console.log(res)\r\n            setLoading(false);\r\n            setName(\"\");\r\n            toast.success(`\"${res.data.name}\" is updated`);\r\n            history.push(\"/admin/category\")\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n            setLoading(false);\r\n            if (err.response.status === 400) toast.error(err.response.data);\r\n        });\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                    <h4 className=\"text-danger\">Loading..</h4>\r\n                    ) : (\r\n                    <h4>Update category</h4>\r\n                    )}\r\n                    <CategoryFrom \r\n                        handleSubmit = {handleSubmit}\r\n                        name={name}\r\n                        setName = {setName}\r\n                    />\r\n                    <hr />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CategoryUpdate","import axios from 'axios'\r\n// const url = \"http://localhost:9000/api\"\r\n\r\n\r\n//  all categories\r\nexport const getSubCategories = async () =>\r\n    await axios.get(`${process.env.REACT_APP_API}/subcategories`)\r\n\r\n\r\nexport const getSubCategory  = async (slug) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/subcategory/${slug}`)\r\n\r\n\r\nexport const removeSubCategory = async (slug, authtoken) =>\r\n    await axios.delete(`${process.env.REACT_APP_API}/subcategory/${slug}`, {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n    })\r\n\r\nexport const updateSubCategory = async (slug, subCategory, authtoken) => \r\n    await axios.put(`${process.env.REACT_APP_API}/subcategory/${slug}`, subCategory, {\r\n        headers: {\r\n            authtoken,\r\n        }\r\n    })\r\n\r\nexport const createSubCategory = async (subCategory, authtoken) => \r\n    await axios.post(`${process.env.REACT_APP_API}/subcategory`, subCategory, {\r\n        headers: {authtoken}\r\n})\r\n\r\n","import React,{ useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/adminnav\"\r\nimport { toast } from \"react-toastify\"\r\nimport { useSelector } from 'react-redux'\r\nimport {  getCategories } from \"../../../function/category\"\r\n\r\nimport { createSubCategory, getSubCategories, removeSubCategory } from \"../../../function/subcategory\"\r\n\r\nimport { Link } from \"react-router-dom\"\r\nimport {EditOutlined, DeleteOutlined } from '@ant-design/icons'\r\nimport CategoryFrom from '../../../components/form/categoryForm'\r\nimport SearchForm from '../../../components/form/searchForm'\r\n\r\n\r\n\r\nconst SubCategoryCreate = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n    // parent category \r\n    const [category, setCategory] = useState('')\r\n    const [subcategories, setSubCategories] = useState([]);\r\n\r\n\r\n    const [ keyword, setKeyword] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n        loadSubCategories()\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setCategories(c.data));\r\n\r\n    const loadSubCategories = () =>\r\n        getSubCategories().then((c) => setSubCategories(c.data));\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n      // console.log(name);\r\n        setLoading(true);\r\n        createSubCategory({ name, parent: category }, user.token)\r\n        .then((res) => {\r\n          // console.log(res)\r\n            setLoading(false);\r\n            setName(\"\");\r\n            toast.success(`\"${res.data.name}\" is created`);\r\n            loadSubCategories();\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n            setLoading(false);\r\n            if (err.response.status === 400) toast.error(err.response.data);\r\n        });\r\n    };\r\n\r\n    const handleRemove = async (slug) => {\r\n      // let answer = window.confirm(\"Delete?\");\r\n      // console.log(answer, slug);\r\n        if (window.confirm(\"Delete?\")) {\r\n        setLoading(true);\r\n        removeSubCategory(slug, user.token)\r\n        .then((res) => {\r\n            setLoading(false);\r\n            toast.error(`${res.data.name} deleted`);\r\n            loadSubCategories()\r\n        })\r\n        .catch((err) => {\r\n            if (err.response.status === 400) {\r\n                setLoading(false);\r\n                toast.error(err.response.data);\r\n            }\r\n        });\r\n    }\r\n    };\r\n\r\n    const searchedItem = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <AdminNav />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                    {loading ? (\r\n                    <h4 className=\"text-danger\">Loading..</h4>\r\n                    ) : (\r\n                    <h4>Create Sub-category</h4>\r\n                    )}\r\n                    <div className=\"form-group\">\r\n                        <label>Parent category</label>\r\n                        <select name = \"category\" className=\"form-control\" onChange={(e) => setCategory(e.target.value)}>\r\n                            <option>Please Select one Main Category</option>\r\n                            {categories.length > 0 && \r\n                                categories.map((c)=>\r\n                                <option key = {c._id} value = {c._id}>\r\n                                    {c.name}\r\n                                </option>)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <CategoryFrom \r\n                        handleSubmit = {handleSubmit}\r\n                        name={name}\r\n                        setName = {setName}\r\n                    />\r\n\r\n                    <SearchForm \r\n                        keyword={keyword}\r\n                        setKeyword = {setKeyword}\r\n                    />\r\n\r\n                    <hr />\r\n                    {subcategories.filter(searchedItem(keyword)).map((s) => (\r\n                    <div className=\"alert alert-secondary\" key={s._id}>\r\n                        {s.name}\r\n                        <span\r\n                        onClick={() => handleRemove(s.slug)}\r\n                        className=\"btn btn-sm float-right\"\r\n                        >\r\n                        <DeleteOutlined className=\"text-danger\" />\r\n                        </span>\r\n                        <Link to={`/admin/subcategory/${s.slug}`}>\r\n                        <span className=\"btn btn-sm float-right\">\r\n                            <EditOutlined className=\"text-warning\" />\r\n                        </span>\r\n                        </Link>\r\n                    </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SubCategoryCreate;\r\n\r\n\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\n\r\nimport React,{ useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/adminnav\"\r\nimport { toast } from \"react-toastify\"\r\nimport { useSelector } from 'react-redux'\r\nimport {  getCategories } from \"../../../function/category\"\r\nimport { getSubCategory, updateSubCategory } from \"../../../function/subcategory\"\r\nimport CategoryFrom from '../../../components/form/categoryForm'\r\n\r\nconst SubCategoryUpdate = ({match, history}) => {\r\n\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n    // parent category \r\n    const [parent, setParent] = useState('')\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n        loadSubCategory()\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setCategories(c.data));\r\n\r\n    const loadSubCategory = () =>\r\n        getSubCategory(match.params.slug).then((s) => {\r\n            setName(s.data.name);\r\n            setParent(s.data.parent);\r\n    });\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n      // console.log(name);\r\n        setLoading(true);\r\n        updateSubCategory(match.params.slug, { name, parent }, user.token)\r\n        .then((res) => {\r\n          // console.log(res)\r\n            setLoading(false);\r\n            setName(\"\");\r\n            toast.success(`\"${res.data.name}\" is updated`);\r\n            // loadSubCategories();\r\n            history.push('/admin/subCategory')\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n            setLoading(false);\r\n            if (err.response.status === 400) toast.error(err.response.data);\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <AdminNav />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                    {loading ? (\r\n                    <h4 className=\"text-danger\">Loading..</h4>\r\n                    ) : (\r\n                    <h4>Create Sub-category</h4>\r\n                    )}\r\n                    <div className=\"form-group\">\r\n                        <label>Parent category</label>\r\n                        <select \r\n                            name = \"category\" \r\n                            className=\"form-control\" \r\n                            onChange={(e) => setParent(e.target.value)}\r\n                        >\r\n                            <option>Please Select one Main Category</option>\r\n                                {categories.length > 0 && \r\n                                    categories.map((c)=>(\r\n                                    <option key = {c._id} value = {c._id} selected = {c._id === parent}>\r\n                                        {c.name}\r\n                                </option>\r\n                                ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <CategoryFrom \r\n                        handleSubmit = {handleSubmit}\r\n                        name={name}\r\n                        setName = {setName}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SubCategoryUpdate;\r\n","/* eslint-disable no-unused-vars */\r\nimport React from 'react'\r\nimport { Select } from \"antd\";\r\nconst { Option } = Select;\r\n\r\nconst ProductForm = ({ handleSubmit, handleChange, setValues, values, handleCatagoryChange, showSub, subOptions}) => {\r\n\r\n    const {\r\n        title,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        subc,\r\n        shipping,\r\n        quantity,\r\n        images,\r\n        colors,\r\n        brands,\r\n        color,\r\n        brand,\r\n        } = values;\r\n\r\n\r\n    return(\r\n        <form onSubmit={handleSubmit}> \r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Category</label>\r\n                        <select\r\n                            name = \"category\"       \r\n                            className=\"form-control\" \r\n                            onChange={handleCatagoryChange}\r\n                        >\r\n                            <option>Please Select one Main Category</option>\r\n                            {categories.length > 0 && \r\n                                categories.map((c) => ( \r\n                                <option key = {c._id} value = {c._id}>\r\n                                    {c.name}\r\n                                </option>))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    {showSub && (\r\n                        <div>\r\n                            <label>Sub Categories</label>\r\n                            <Select\r\n                                mode=\"multiple\"\r\n                                style={{ width: \"100%\" }}\r\n                                placeholder=\"Please select\"\r\n                                value={subc}\r\n                                onChange={(value) => setValues({ ...values, subc: value })}\r\n                            >\r\n                                {subOptions.length && \r\n                                    subOptions.map((sc)=>\r\n                                    <Option value={sc._id} key={sc._id}>{sc.name}</Option>\r\n                                    )}\r\n                            </Select>\r\n                        </div>\r\n                    )}\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Title</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"title\"\r\n                                    className=\"form-control\"\r\n                                    value={title}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Description</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"description\"\r\n                                    className=\"form-control\"\r\n                                    value={description}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Price</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"price\"\r\n                                    className=\"form-control\"\r\n                                    value={price}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Shipping</label>\r\n                                <select\r\n                                    name=\"shipping\"\r\n                                    className=\"form-control\"\r\n                                    onChange={handleChange}\r\n                                >\r\n                                    <option>Please select</option>\r\n                                    <option value=\"Yes\">Yes</option>\r\n                                    <option value=\"No\">No</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Quantity</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"quantity\"\r\n                                    className=\"form-control\"\r\n                                    value={quantity}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Color</label>\r\n                                <select\r\n                                    name=\"color\"\r\n                                    className=\"form-control\"\r\n                                    onChange={handleChange}\r\n                                >\r\n                                <option>Please select</option>\r\n                                    {colors.map((c) => (\r\n                                        <option key={c} value={c}>\r\n                                            {c}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Brand</label>\r\n                                <select\r\n                                    name=\"brand\"\r\n                                    className=\"form-control\"\r\n                                    onChange={handleChange}\r\n                                >\r\n                                    <option>Please select</option>\r\n                                    {brands.map((b) => (\r\n                                        <option key={b} value={b}>\r\n                                        {b}\r\n                                    </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <button className=\"btn btn-outline-info\">Save</button>\r\n                        </form>\r\n    )\r\n}\r\n\r\nexport default ProductForm\r\n\r\n\r\n\r\n//<form onSubmit={handleSubmit}>\r\n//                         <div className=\"form-group\">\r\n//                             <label>Title</label>\r\n//                             <input\r\n//                             type=\"text\"\r\n//                             name=\"title\"\r\n//                             className=\"form-control\"\r\n//                             value={title}\r\n//                             onChange={handleChange}\r\n//                         />\r\n//                         </div>\r\n\r\n//                         <div className=\"form-group\">\r\n//                             <label>Description</label>\r\n//                             <input\r\n//                             type=\"text\"\r\n//                             name=\"description\"\r\n//                             className=\"form-control\"\r\n//                             value={description}\r\n//                             onChange={handleChange}\r\n//                             />\r\n//                         </div>\r\n        \r\n//                         <div className=\"form-group\">\r\n//                             <label>Price</label>\r\n//                             <input\r\n//                             type=\"number\"\r\n//                             name=\"price\"\r\n//                             className=\"form-control\"\r\n//                             value={price}\r\n//                             onChange={handleChange}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <div className=\"form-group\">\r\n//                             <label>Shipping</label>\r\n//                             <select\r\n//                             name=\"shipping\"\r\n//                             className=\"form-control\"\r\n//                             onChange={handleChange}\r\n//                             >\r\n//                                 <option>Please select</option>\r\n//                                 <option value=\"No\">No</option>\r\n//                                 <option value=\"Yes\">Yes</option>\r\n//                             </select>\r\n//                         </div>\r\n\r\n//                         <div className=\"form-group\">\r\n//                             <label>Quantity</label>\r\n//                             <input\r\n//                             type=\"number\"\r\n//                             name=\"quantity\"\r\n//                             className=\"form-control\"\r\n//                             value={quantity}\r\n//                             onChange={handleChange}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <div className=\"form-group\">\r\n//                             <label>Brand</label>\r\n//                             <select\r\n//                             name=\"brand\"\r\n//                             className=\"form-control\"\r\n//                             onChange={handleChange}\r\n//                             >\r\n//                                 <option>Please select</option>\r\n//                                 {brands.map((b) => (\r\n//                                     <option key={b} value={b}>\r\n//                                     {b}\r\n//                                     </option>\r\n//                                 ))}\r\n//                             </select>\r\n//                         </div>\r\n\r\n//                         <div className=\"form-group\">\r\n//                             <label>Color</label>\r\n//                             <select\r\n//                             name=\"color\"\r\n//                             className=\"form-control\"\r\n//                             onChange={handleChange}\r\n//                             >\r\n//                                 <option>Please select</option>\r\n//                                     {colors.map((c) => (\r\n//                                         <option key={c} value={c}>\r\n//                                         {c}\r\n//                                     </option>\r\n//                                 ))}\r\n//                             </select>\r\n//                         </div>\r\n\r\n//                         <button className=\"btn btn-outline-info\">Save</button>\r\n//                     </form>","import React from \"react\";\r\nimport Resizer from \"react-image-file-resizer\"\r\nimport { Badge, Avatar } from \"antd\"\r\nimport { useSelector} from 'react-redux'\r\nimport  axios from \"axios\"\r\nconst url = 'http://localhost:9000/api'\r\n\r\n\r\nconst FileUpload = ({ values, setValues, setLoading}) => {\r\n\r\n    const { user } = useSelector((state) => ({...state}))\r\n\r\n  const fileUploadAndResize = (e) => {\r\n    // console.log(e.target.files);\r\n\r\n        // resize\r\n        let files = e.target.files; \r\n        let allUploadedFiles = values.images;\r\n\r\n        if (files) {\r\n            setLoading(true)\r\n            for (let i = 0; i < files.length; i++) {\r\n                Resizer.imageFileResizer(\r\n                files[i],\r\n                720,\r\n                720,\r\n                \"JPEG\",\r\n                100,\r\n                0,\r\n                (uri) => {\r\n                    // console.log(\"files>>>>>>>\",uri);\r\n                    axios\r\n                        .post(`${url}/uploadimages`, \r\n                        { image: uri },    \r\n                        {\r\n                            headers: {\r\n                                authtoken: user ? user.token : \" \"\r\n                            },\r\n                        }\r\n                    )\r\n                    .then((res)=>{\r\n                        console.log('img response>>>', res)\r\n                        setLoading(false)\r\n                        allUploadedFiles.push(res.data)\r\n                        setValues({ ...values, images:allUploadedFiles })\r\n                    })\r\n                    .catch((err)=>{\r\n                        setLoading(false);\r\n                        console.log(\"CLOUDINARY UPLOAD ERR\", err);\r\n                    })\r\n                },\r\n                \"base64\"\r\n                );\r\n            }\r\n        }\r\n        // send back to server to upload to cloudinary\r\n        // set url to images[] in the parent component state - ProductCreate\r\n    };\r\n    const handleRemoveImage = (public_id) => {\r\n      setLoading(true);\r\n          // console.log(\"remove image\", public_id);\r\n\r\n      axios\r\n      .post(`${url}/deleteimages`, {public_id},\r\n        {\r\n          headers: {\r\n            authtoken: user ? user.token : \"\"\r\n          },\r\n        }\r\n      )\r\n      .then((res) =>{\r\n        setLoading(false);\r\n        const { images } = values\r\n        let filteredimages = images.filter((item)=>{\r\n          return item.public_id !== public_id;        \r\n        })\r\n        setValues({ ...values, images:filteredimages })\r\n      })\r\n      .catch((err)=>{\r\n        console.log(err);\r\n        setLoading(false);\r\n      })\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <div className = \"row\">\r\n          {values.images && values.images.map((image)=>(\r\n            <Badge\r\n              count = \"X\"\r\n              key={image.public_id} \r\n              style={{ cursor: \"pointer\" }}\r\n              onClick = {() => handleRemoveImage(image.public_id)}\r\n              \r\n            >\r\n                <Avatar \r\n                  shape = \"square\"\r\n                  src={image.url} size= {100} \r\n                  className = \"ml-3\" />\r\n            </Badge>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n            <label className=\"btn btn-primary  btn-raised mt-3\">\r\n            Choose File\r\n            <input\r\n                type=\"file\"\r\n                multiple\r\n                hidden\r\n                accept=\"images/*\"\r\n                onChange={fileUploadAndResize}\r\n            />\r\n            </label>\r\n        </div>\r\n      </>\r\n    );\r\n};\r\n  \r\nexport default FileUpload;\r\n\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/adminnav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { createProduct } from \"../../../function/product\";\r\nimport {  getCategories, getCategorySub, } from \"../../../function/category\"\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nimport ProductForm from \"../../../components/form/productCreateForm\"\r\nimport FileUpload from \"../../../components/form/fileUpload\"\r\n\r\n\r\nconst initialState = {\r\n    title: \"\",\r\n    descriptioin: \"\",\r\n    price: \"999\",\r\n    categories: [],\r\n    category: \"\",\r\n    subc: [],\r\n    shipping: \"Yes\", \r\n    quantity: \"50\",\r\n    images: [],\r\n    colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n    brands: [\"Police\", \"4711\", \"PlayBoy\", \"Estle\", \"Swiss Image\", \"Plum\", \"Deborah Milano\", \"Ajmal\", \"Guess\"],\r\n    color: \"White\",\r\n    brand: \"4711\",\r\n};\r\n\r\nconst ProductCreate = () => {\r\n\r\n        const [values, setValues] = useState(initialState);\r\n        const [subOptions, setSubOptions] = useState([])\r\n        const [showSub, setShowSub] = useState(false)\r\n        const [loading, setLoading] = useState(false)\r\n        // redux\r\n        const { user } = useSelector((state) => ({ ...state }));\r\n        // destructure\r\n        \r\n        useEffect(() => {\r\n            loadCategories();\r\n        }, []);\r\n\r\n        const loadCategories = () =>\r\n            getCategories().then((c) => setValues({...values, categories: c.data}));\r\n\r\n        const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        createProduct(values, user.token)\r\n            .then((res) => {\r\n                // console.log(res);\r\n                window.alert(`${res.data.title} is created`)\r\n                window.location.reload()\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                // if (err.response.status === 400) toast.error(err.response.data);\r\n                toast.error(err.response.data.err)\r\n            });\r\n        };\r\n    \r\n        const handleChange = (e) => {\r\n        setValues({ ...values, [e.target.name]: e.target.value });\r\n        // console.log(e.target.name, \" ----- \", e.target.value);\r\n        };\r\n\r\n        const handleCatagoryChange = (e) => {\r\n            e.preventDefault();\r\n            // console.log(\"CLICKED CATEGORY>>>\", e.target.value)\r\n            setValues({ ...values, subc : [], category: e.target.value });\r\n            getCategorySub(e.target.value)\r\n            .then((res) => {\r\n                // console.log(\"SUB CATEGORY options>>>\", res)\r\n                setSubOptions(res.data);\r\n            })\r\n            setShowSub(true);\r\n        }\r\n\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <AdminNav />\r\n                    </div>\r\n        \r\n                    <div className=\"col-md-10\">\r\n                        {loading ? <LoadingOutlined className=\"text-danger h1\"/>: <h4>Product create</h4>}\r\n                        <hr />\r\n\r\n                        {/* {JSON.stringify(values)} */}\r\n                        {/* {JSON.stringify(values.images)} */}\r\n                        \r\n\r\n                        <div className=\"p-3\">\r\n                            <FileUpload\r\n                            values={values}\r\n                            setValues={setValues}\r\n                            setLoading={setLoading}\r\n                            />\r\n                        </div>\r\n                        < ProductForm\r\n                            handleSubmit = {handleSubmit}\r\n                            handleChange = {handleChange}\r\n                            handleCatagoryChange = {handleCatagoryChange}\r\n                            setValues = {setValues}\r\n                            values = {values}\r\n                            showSub = {showSub}\r\n                            subOptions = {subOptions}\r\n                        />\r\n\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n    \r\nexport default ProductCreate;\r\n\r\n","import React from 'react'\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card } from 'antd';\r\n\r\n\r\nconst { Meta } = Card;\r\n\r\nconst AdminProductCard = ({product, removeProduct}) =>{\r\n    // destructure\r\n    const { title, description, images, slug} = product\r\n\r\n    return(\r\n        <Card\r\n            style={{ width: 240, height: \"150px\", objectFit: \"cover\" }}\r\n            className = 'p-1'\r\n            cover={\r\n                <img alt={title} \r\n                src= {images && images.length ? images[0].url : \" \"} \r\n                />\r\n            }\r\n            actions={[ \r\n                <Link to = {`/admin/product/${slug}`}>\r\n                    <EditOutlined \r\n                        className=\"text-warning\" \r\n                    />\r\n                </Link>  \r\n                ,\r\n                <DeleteOutlined \r\n                    className=\"text-danger\" \r\n                    onClick = {() => removeProduct(slug)}\r\n                />\r\n            ]}\r\n        >\r\n            <Meta \r\n                title={title} \r\n                description={`${description && description.substring(0, 40)}...`} \r\n            />\r\n        </Card>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default AdminProductCard","import React, { useState, useEffect }from \"react\";\r\nimport AdminNav from \"../../../components/nav/adminnav\"\r\nimport { useSelector } from  \"react-redux\"\r\nimport { getProductsByCount, ProductRemove } from '../../../function/product'\r\nimport AdminProductCard from '../../../components/card/adminproductcard'\r\nimport { toast } from \"react-toastify\";\r\n\r\n\r\n\r\n\r\nconst AllProducts = () => {\r\n\r\n    const { user } = useSelector((state) => ({...state}))\r\n\r\n    const [loading, setLoading] = useState(false)\r\n    const [ products, setProducts] = useState([])\r\n\r\n    useEffect(() => {\r\n        loadAllProducts()\r\n    }, [])\r\n\r\n    const loadAllProducts = () =>{\r\n        setLoading(true)\r\n        getProductsByCount(100)\r\n        .then((res)=>{\r\n            setProducts(res.data)\r\n            setLoading(false)\r\n        })\r\n        .catch((err)=> {\r\n            setLoading(false)\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    const removeProduct = (slug) =>{\r\n            // let answer = window.confirm(\"Delete?\");\r\n            // if (answer){\r\n            //     console.log(\"send delete request\", slug);\r\n            // }\r\n\r\n\r\n        if(window.confirm(\"Are you sure you want to delete?\")){\r\n            ProductRemove(slug, user.token)\r\n                .then((res) =>{\r\n                    loadAllProducts()\r\n                    toast.error(`${res.data.title} is deleted`);\r\n                })\r\n                .catch((err) =>{\r\n                    if (err.response.status === 400) toast.error(err.response.data);\r\n                    console.log(err);\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                        <h4>All Products</h4>\r\n                    )}\r\n                    <div className=\"row\">\r\n                        {products.map((product) => (\r\n                        <div key={product._id} className=\"col-md-4 pb-4\">\r\n                            <AdminProductCard \r\n                                product={product} \r\n                                removeProduct={removeProduct}\r\n                            />\r\n                        </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AllProducts;\r\n","/* eslint-disable no-unused-vars */\r\nimport React from 'react'\r\nimport { Select } from \"antd\";\r\nconst { Option } = Select;\r\n\r\nconst ProductUpdateForm = ({ \r\n    handleSubmit, handleChange, setValues, values, selectedCategory,\r\n    handleCategoryChange, categories, subOptions, arrayOfSubs, setArrayOfSubs }) => {\r\n\r\n    const {\r\n        title,\r\n        description,\r\n        price,\r\n        category,\r\n        subc,\r\n        shipping,\r\n        quantity,\r\n        images,\r\n        colors,\r\n        brands,\r\n        color,\r\n        brand,\r\n        } = values;\r\n    return(\r\n        <form onSubmit={handleSubmit}> \r\n\r\n            <div className=\"form-group\">\r\n                <label>Category</label>\r\n                <select\r\n                    name = \"category\"       \r\n                    className=\"form-control\" \r\n                    onChange={handleCategoryChange}\r\n                    value={selectedCategory ? selectedCategory : category._id}\r\n                >\r\n                    {categories.length > 0 && \r\n                        categories.map((c) => ( \r\n                        <option key = {c._id} value = {c._id}>\r\n                            {c.name}\r\n                        </option>))}\r\n                </select>\r\n            </div> \r\n\r\n            <div>\r\n                <label>Sub Categories</label>\r\n                <Select\r\n                    mode=\"multiple\"\r\n                    style={{ width: \"100%\" }}\r\n                    placeholder=\"Please select\"\r\n                    value={arrayOfSubs}\r\n                    onChange={(value) => setArrayOfSubs(value)}                            >\r\n                    {subOptions.length && \r\n                        subOptions.map((sc)=>\r\n                        <Option value={sc._id} key={sc._id}>{sc.name}</Option>\r\n                        )}\r\n                </Select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Title</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    className=\"form-control\"\r\n                    value={title}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    className=\"form-control\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Price</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    className=\"form-control\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Shipping</label>\r\n                <select\r\n                    key = { shipping === \"Yes\" ? \"Yes\" : \"No\" }\r\n                    name=\"shipping\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option value=\"Yes\">Yes</option>\r\n                    <option value=\"No\">No</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Quantity</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"quantity\"\r\n                    className=\"form-control\"\r\n                    value={quantity}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Color</label>\r\n                <select\r\n                    value={color}\r\n                    name=\"color\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                \r\n                    {colors.map((c) => (\r\n                        <option key={c} value={c}>\r\n                            {c}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Brand</label>\r\n                <select\r\n                    name=\"brand\"\r\n                    value={brand}\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    {brands.map((b) => (\r\n                        <option key={b} value={b}>\r\n                        {b}\r\n                    </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-info\">Save</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ProductUpdateForm\r\n\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/adminnav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getProduct, updateProduct } from \"../../../function/product\";\r\nimport {  getCategories, getCategorySub, } from \"../../../function/category\"\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nimport FileUpload from \"../../../components/form/fileUpload\"\r\nimport ProductUpdateForm from \"../../../components//form/productUpdateForm\"\r\n\r\nconst initialState = {\r\n    title: \"\",\r\n    descriptioin: \"\",\r\n    price: \"\",\r\n    category: \"\",\r\n    subc: [],\r\n    shipping: \"\",\r\n    quantity: \"\",\r\n    images: [],\r\n    colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n    brands: [\"Police\", \"4711\", \"PlayBoy\", \"Estle\", \"Swiss Image\", \"Plum\", \"Deborah Milano\", \"Ajmal\", \"Guess\"],\r\n    color: \"\",\r\n    brand: \"\",\r\n};\r\n\r\nconst ProductUpdate = ({match, history}) => {\r\n\r\n        const { user } = useSelector((state) => ({ ...state}))\r\n\r\n        //state\r\n        const [values, setValues] = useState(initialState);\r\n        const [subOptions, setSubOptions] = useState([])\r\n        const [ categories, setCategories] = useState([])\r\n        const [ arrayOfSubs, setArrayOfSubs ] = useState([])\r\n        const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n        const [loading, setLoading] = useState(false)\r\n\r\n\r\n        //routes\r\n        const { slug } = match.params\r\n\r\n        useEffect(() => {\r\n            loadProduct()\r\n            loadCategories()\r\n        }, [] )\r\n\r\n        const loadProduct = () => {\r\n            getProduct(slug).then((p) => {\r\n              // console.log(\"single product\", p);\r\n              // 1 load single proudct\r\n                setValues({ ...values, ...p.data });\r\n              // 2 load single product category subs\r\n                getCategorySub(p.data.category._id).then((res) => {\r\n                    setSubOptions(res.data); // on first load, show default subs\r\n                });\r\n              // 3 prepare array of sub ids to show as default sub values in antd Select\r\n                let arr = [];\r\n                p.data.subc.map((s) => \r\n                    arr.push(s._id)\r\n                );\r\n                console.log(\"ARR\", arr);\r\n                setArrayOfSubs((prev) => arr); // required for ant design select to work\r\n            });\r\n        };\r\n\r\n        const handleSubmit = (e) => {\r\n            e.preventDefault();\r\n            \r\n            values.subc = arrayOfSubs;\r\n            values.category = selectedCategory ? selectedCategory : values.category;\r\n\r\n            updateProduct(slug, values, user.token)\r\n            .then((res) => {\r\n                setLoading(false);\r\n                toast.success(`\"${res.data.title}\" is updated`);\r\n                history.push(\"/admin/products\");\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                setLoading(false);\r\n                toast.error(err.response.data.err);\r\n            });\r\n        };\r\n\r\n        const handleChange = (e) => {\r\n            setValues({ ...values, [e.target.name]: e.target.value });\r\n            // console.log(e.target.name, \" ----- \", e.target.value);\r\n        };\r\n        \r\n        const loadCategories = () =>\r\n            getCategories().then((c) => {\r\n                // console.log(\"SET Categories>>>>>\", c.data)\r\n                setCategories(c.data);\r\n            });\r\n\r\n\r\n        const handleCategoryChange = (e) => {\r\n            e.preventDefault();\r\n            // console.log(\"CLICKED CATEGORY PRODUCT UPDATE>>>\", e.target.value)\r\n            setValues({ ...values, subc : []});\r\n            setSelectedCategory( e.target.value )\r\n            getCategorySub(e.target.value)\r\n            .then((res) => {\r\n                // console.log(\"SUB CATEGORY options>>>\", res)\r\n                setSubOptions(res.data);\r\n            })\r\n            // console.log(\"EXISITING CATEGORY>>>\", values.category)\r\n              // if user clicks back to the original category\r\n                // show its sub categories in default\r\n            if ( values.category._id === e.target.value){\r\n                loadProduct()\r\n            }\r\n            setArrayOfSubs([])\r\n        }\r\n\r\n\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <AdminNav />\r\n                    </div>\r\n        \r\n                    <div className=\"col-md-10\">\r\n                        {loading ? (\r\n                        <LoadingOutlined className=\"text-danger h1\" />\r\n                        ) : (\r\n                            <h4>Product update</h4>\r\n                        )}\r\n                                  {/* {JSON.stringify(values)} */}\r\n\r\n                        <hr />\r\n                        <div className=\"p-3\">\r\n                            <FileUpload\r\n                            values={values}\r\n                            setValues={setValues}\r\n                            setLoading={setLoading}\r\n                            />\r\n                        </div>\r\n                        {/* {JSON.stringify(values)} */}\r\n                        <ProductUpdateForm \r\n                            handleSubmit = {handleSubmit}\r\n                            handleChange = {handleChange}\r\n                            values = {values}\r\n                            setValues = {setValues}\r\n                            handleCategoryChange = {handleCategoryChange}\r\n                            categories = {categories}\r\n                            subOptions={subOptions}\r\n                            arrayOfSubs={arrayOfSubs}\r\n                            setArrayOfSubs={setArrayOfSubs}\r\n                            selectedCategory = {selectedCategory}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n    \r\n\r\nexport default ProductUpdate;\r\n\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ProductListItems = ({ product }) => {\r\n  const {\r\n    price,\r\n    category,\r\n    subc,\r\n    shipping,\r\n    color,\r\n    brand,\r\n    quantity,\r\n    sold,\r\n} = product;\r\n\r\n    return (\r\n        <ul className=\"list-group\">\r\n            <li className=\"list-group-item\">\r\n                Price{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    $ {price}\r\n                </span>\r\n            </li>\r\n\r\n            {category && (\r\n                <li className=\"list-group-item\">\r\n                Category{\" \"}\r\n                <Link\r\n                    to={`/category/${category.slug}`}\r\n                    className=\"label label-default label-pill pull-xs-right\"\r\n                >\r\n                    {category.name}\r\n                </Link>\r\n                </li>\r\n            )}\r\n\r\n            {subc && (\r\n                <li className=\"list-group-item\">\r\n                Sub Categories\r\n                {subc.map((s) => (\r\n                    <Link\r\n                        key={s._id}\r\n                        to={`/sub/${s.slug}`}\r\n                        className=\"label label-default label-pill pull-xs-right\"\r\n                    >\r\n                        {s.name}\r\n                    </Link>\r\n                ))}\r\n                </li>\r\n            )}\r\n\r\n            <li className=\"list-group-item\">\r\n                Shipping{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {shipping}\r\n                </span>\r\n            </li>\r\n\r\n            <li className=\"list-group-item\">\r\n                Color{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {color}\r\n                </span>\r\n            </li>\r\n\r\n            <li className=\"list-group-item\">\r\n                Brand{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {brand}\r\n                </span>\r\n            </li>\r\n\r\n            <li className=\"list-group-item\">\r\n                Available{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {quantity}\r\n                </span>\r\n            </li>\r\n\r\n            <li className=\"list-group-item\">\r\n                Sold{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {sold}\r\n                </span>\r\n            </li>\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default ProductListItems;\r\n","import React, { useState } from \"react\";\r\nimport { Modal } from \"antd\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { StarOutlined } from \"@ant-design/icons\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\n \r\nconst RatingModal = ({ children }) =>{\r\n    // user state\r\n    const { user } = useSelector((state) => ({...state}))\r\n\r\n    const [ modalVisible, setModalVisible ] = useState(false)\r\n\r\n    let history = useHistory();\r\n    let { slug } = useParams()\r\n    // console.log(\"slug\",  slug)\r\n\r\n    const handleModalRating = () =>{\r\n        if (user && user.token){\r\n            setModalVisible(true)\r\n        } \r\n        else{\r\n            history.push({\r\n                pathname: \"/login\",\r\n                state:{ from : `/product/${slug}`}\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div onClick={handleModalRating}>\r\n                <StarOutlined className=\"text-danger\" /> <br />{\" \"}\r\n                    {user ? \"Leave rating\" : \"Login to leave rating\"}\r\n            </div>\r\n            <Modal\r\n                title=\"Leave your rating\"\r\n                centered\r\n                visible={modalVisible}\r\n                onOk={() => {\r\n                setModalVisible(false);\r\n                toast.success(\"Thanks for your review.\");\r\n                }}\r\n                onCancel={() => setModalVisible(false)}\r\n            >\r\n                {children}\r\n            </Modal>\r\n        </>\r\n    )\r\n}\r\n \r\nexport default RatingModal\r\n\r\n\r\n// import React, { useState } from \"react\";\r\n// import { Modal, Button } from \"antd\";\r\n// import { toast } from \"react-toastify\";\r\n// import { useSelector } from \"react-redux\";\r\n// import { StarOutlined } from \"@ant-design/icons\";\r\n// import { useHistory, useParams } from \"react-router-dom\";\r\n\r\n// const RatingModal = ({ children }) => {\r\n//   const { user } = useSelector((state) => ({ ...state }));\r\n//   const [modalVisible, setModalVisible] = useState(false);\r\n\r\n//   let history = useHistory();\r\n//   let { slug } = useParams();\r\n\r\n//   const handleModal = () => {\r\n//     if (user && user.token) {\r\n//       setModalVisible(true);\r\n//     } else {\r\n//       history.push({\r\n//         pathname: \"/login\",\r\n//         state: { from: `/product/${slug}` },\r\n//       });\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <>\r\n//       <div onClick={handleModal}>\r\n//         <StarOutlined className=\"text-danger\" /> <br />{\" \"}\r\n//         {user ? \"Leave rating\" : \"Login to leave rating\"}\r\n//       </div>\r\n//       <Modal\r\n//         title=\"Leave your rating\"\r\n//         centered\r\n//         visible={modalVisible}\r\n//         onOk={() => {\r\n//           setModalVisible(false);\r\n//           toast.success(\"Thanks for your review. It will apper soon\");\r\n//         }}\r\n//         onCancel={() => setModalVisible(false)}\r\n//       >\r\n//         {children}\r\n//       </Modal>\r\n//     </>\r\n//   );\r\n// };\r\n\r\n// export default RatingModal;\r\n","/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { useState} from \"react\";\r\nimport { Card, Tabs, Tooltip } from \"antd\";\r\nimport { HeartOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport ProductListItems from './viewproduct'\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport StarRatings from 'react-star-ratings';\r\nimport RatingModal from '../modal/rating'\r\nimport { RatingAvg } from \"../../function/rating\"\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { addToWishlist } from \"../../function/user\"\r\nimport _ from \"lodash\"\r\n\r\nconst { TabPane } = Tabs;\r\n\r\n// child component\r\nconst SingleProduct = ({ product, onStartClick, star }) => {\r\n    const { title, images, description, _id } = product;\r\n\r\n    const { user } = useSelector((state) => ({...state}))\r\n\r\n    const  dispatch  = useDispatch()\r\n    \r\n\r\n    const [tooltip, setTooltip] = useState(\"Click to add\");\r\n\r\n    let history = useHistory();\r\n\r\n    const handleWishlistAdd = (e) => {\r\n        e.preventDefault();\r\n        addToWishlist(product._id, user.token)\r\n            .then((res) =>{\r\n                console.log(\"addtoWishlist>>>>\", res.data)\r\n                toast.success(\"Added to wishlist\");\r\n                history.push(\"/user/wishlist\");\r\n            })\r\n    }\r\n\r\n    const handleCart = () => {\r\n\r\n        let cart = []\r\n        if(typeof windows !== undefined) {\r\n            // if there is a cart in local storage we will GET it \r\n            if(localStorage.getItem(\"cart\")){\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n            // push new item to cart array\r\n            cart.push({\r\n                ...product,\r\n                count:1,\r\n            });\r\n            // we are removiing duplicates with loadash \r\n            let unique = _.uniqWith(cart, _.isEqual)\r\n            // console.log(\"unique------>\", unique)\r\n            // i m saving data in local storage in json format\r\n            localStorage.setItem(\"cart\", JSON.stringify(unique))\r\n            setTooltip(\"Added\");\r\n\r\n            // ading product to cart using state\r\n            dispatch({\r\n                type:\" ADD_TO_CART\",\r\n                payload: cart \r\n            })\r\n            dispatch({\r\n                type: \"CART_SIDE_VIEW\",\r\n                payload: true,\r\n            });\r\n            \r\n        }\r\n    }\r\n    return (\r\n        <>\r\n        <div className=\"col-md-7 bg-light\">\r\n            <Carousel showArrows={true} autoPlay infiniteLoop>\r\n                {images && images.map((i)=> <img src = {i.url} key = {i.public_id} alt = {i.title}/>)}\r\n            </Carousel>\r\n            <Tabs type=\"card\">\r\n                <TabPane tab=\"Description\" key=\"1\">\r\n                        {description && description}\r\n                </TabPane>\r\n                <TabPane tab=\"More\" key=\"2\">\r\n                        Call use on xxxx xxx xxx to learn more about this product.\r\n                </TabPane>\r\n            </Tabs>\r\n        </div>\r\n\r\n        <div className=\"col-md-5\">\r\n            <h2 className=\"bg-info p-3\">{title}</h2>\r\n            {product && product.ratings && product.ratings.length > 0 ? RatingAvg(product)  : \r\n                <div className=\"text-center pt-1 pb-3\">\r\n                        NO RATING YET\r\n                </div> \r\n            }\r\n\r\n            <Card\r\n                actions={[\r\n                    <Tooltip title={tooltip}>\r\n                        <a onClick={handleCart}>\r\n                            <ShoppingCartOutlined className=\"text-danger\" /> <br /> Add to\r\n                            Cart\r\n                        </a>\r\n                    </Tooltip>,\r\n\r\n                    <a onClick = {handleWishlistAdd}>\r\n                        <HeartOutlined className=\"text-info\" /> <br /> Add to Wishlist\r\n                    </a>,\r\n\r\n                    <RatingModal>\r\n                        <StarRatings\r\n                            name ={_id}\r\n                            starRatedColor=\"yellow\"\r\n                            numberOfStars={5}\r\n                            isSelectable = {true}\r\n                            rating = {star}\r\n                            changeRating = {onStartClick}\r\n\r\n                        />\r\n                    </RatingModal>\r\n                ]}\r\n                >\r\n                <ProductListItems product={product} />\r\n            </Card>\r\n        </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SingleProduct;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect} from 'react'\r\nimport { getProduct, productStar, getRelatedProduct } from '../function/product'\r\nimport  SingleProduct  from \"../components/card/singleProduct\"\r\nimport { useSelector } from 'react-redux'\r\nimport ProductCard from \"../components/card/ProductCard\"\r\n\r\nconst ProductView = ({match}) =>{\r\n\r\n  const { user } = useSelector((state) => ({ ...state}))\r\n\r\n  const [ product, setProduct ] = useState({})\r\n  const [related, setRelated] = useState([])\r\n  const [ star, setStar ] = useState(0)\r\n\r\n  const { slug } = match.params\r\n\r\n  useEffect(() => {\r\n      loadProductDetails()\r\n  }, [slug])\r\n\r\n  useEffect(() => {\r\n    if (product.ratings && user) {\r\n      let existingRatingObject = product.ratings.find(\r\n        (ele) => ele.postedBy.toString() === user._id.toString()\r\n      );\r\n      existingRatingObject && setStar(existingRatingObject.star); // current user's star\r\n    }\r\n  }, []);\r\n\r\n  const loadProductDetails = () => {\r\n    getProduct(slug).then((res) => {\r\n      setProduct(res.data);\r\n\r\n      // related products\r\n      getRelatedProduct(res.data._id).then((res)=>setRelated(res.data))\r\n    })\r\n\r\n  } \r\n\r\n  const onStartClick = (newrating, name) =>{\r\n    setStar(newrating)\r\n    // console.log(newrating, name)\r\n    productStar(name, newrating, user.token)\r\n    .then((res) =>{\r\n      console.log(\"rated product>>\", res.data)\r\n      loadProductDetails();\r\n    })\r\n    \r\n  }\r\n\r\n  return (\r\n    <div className=\"container-fluid\"> \r\n      <div className=\"row pt-4\">\r\n        <SingleProduct \r\n          product={product} \r\n          onStartClick = {onStartClick}\r\n          star = {star}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col text-center pt-5 pb-5\">\r\n          <hr />\r\n            <h4>Related Products</h4>\r\n          <hr />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row pb-5\">\r\n        {related.length ? (\r\n          related.map((r) => (\r\n            <div key={r._id} className=\"col-md-4\">\r\n              <ProductCard product={r} />\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center col\">No Products Found</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n    \r\n}\r\n\r\nexport default ProductView","import axios from 'axios'\r\n// const url = \"http://localhost:9000/api\"\r\n\r\nexport const createCoupon = async (coupon, authtoken) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/coupon`, {coupon},\r\n    {\r\n        headers: { authtoken },\r\n    })\r\n\r\n\r\nexport const getCoupons = async () => \r\n    await axios.get(`${process.env.REACT_APP_API}/coupons`)\r\n\r\n\r\nexport const removeCoupon = async (couponId, authtoken) => \r\n    await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`,{\r\n        headers: { authtoken, }\r\n    })\r\n","/* eslint-disable no-unused-vars */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport { getCoupons, removeCoupon, createCoupon } from \"../../../function/coupon\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\nimport AdminNav from \"../../../components/nav/adminnav\";\r\n\r\nconst CreateCouponPage = () => {\r\n    const [name, setName] = useState(\"\");\r\n    const [expiry, setExpiry] = useState(\"\");\r\n    const [discount, setDiscount] = useState(\"\");\r\n    const [loading, setLoading] = useState(\"\");\r\n    const [coupons, setCoupons] = useState([]);\r\n\r\n\r\n    // redux\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    useEffect(() => {\r\n        loadAllCoupons();\r\n      }, []);\r\n    \r\n      const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data));\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        console.table(name, expiry, discount);\r\n        createCoupon({ name, expiry, discount }, user.token)\r\n            .then((res) => {\r\n                setLoading(false);\r\n                setName(\"\");\r\n                setDiscount(\"\");\r\n                setExpiry(\"\");\r\n                toast.success(`\"${res.data.name}\" is created`);\r\n            })\r\n            .catch((err) => console.log(\"create coupon err\", err));\r\n    };\r\n\r\n    const handleRemove = (couponId) => {\r\n        if (window.confirm(\"Delete?\")) {\r\n          setLoading(true);\r\n          removeCoupon(couponId, user.token)\r\n            .then((res) => {\r\n              loadAllCoupons(); // load all coupons\r\n              setLoading(false);\r\n              toast.error(`Coupon \"${res.data.name}\" deleted`);\r\n            })\r\n            .catch((err) => console.log(err));\r\n        }\r\n      };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col-md-10\">\r\n                    <h4>Coupon</h4>\r\n    \r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-muted\">Name</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                onChange={(e) => setName(e.target.value)}\r\n                                value={name}\r\n                                autoFocus\r\n                                required\r\n                            />\r\n                        </div>\r\n            \r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-muted\">Discount %</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                onChange={(e) => setDiscount(e.target.value)}\r\n                                value={discount}\r\n                                required\r\n                            />\r\n                        </div>\r\n            \r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-muted\">Expiry</label>\r\n                            <br />\r\n                            <DatePicker\r\n                                className=\"form-control\"\r\n                                selected={new Date()}\r\n                                value={expiry}\r\n                                onChange={(date) => setExpiry(date)}\r\n                                required\r\n                            />\r\n                        </div>\r\n            \r\n                        <button className=\"btn btn-outline-primary\">Save</button>\r\n                    </form>\r\n                    <h4>{coupons.length} Coupons</h4>\r\n\r\n                    <table className=\"table table-bordered\">\r\n                        <thead className=\"thead-light\">\r\n                        <tr>\r\n                            <th scope=\"col\">Name</th>\r\n                            <th scope=\"col\">Expiry</th>\r\n                            <th scope=\"col\">Discount</th>\r\n                            <th scope=\"col\">Action</th>\r\n                        </tr>\r\n                        </thead>\r\n\r\n                        <tbody>\r\n                        {coupons.map((c) => (\r\n                            <tr key={c._id}>\r\n                            <td>{c.name}</td>\r\n                            <td>{new Date(c.expiry).toLocaleDateString()}</td>\r\n                            <td>{c.discount}%</td>\r\n                            <td>\r\n                                <DeleteOutlined\r\n                                onClick={() => handleRemove(c._id)}\r\n                                className=\"text-danger pointer\"\r\n                                />\r\n                            </td>\r\n                            </tr>\r\n                        ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n  \r\n  export default CreateCouponPage;\r\n  \r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { getProductsByCount, getSearchProducts } from \"../function/product\";\r\nimport { getCategories } from \"../function/category\";\r\nimport { getSubCategories } from \"../function/subcategory\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport ProductCard from \"../components/card/ProductCard\";\r\nimport { Menu, Slider, Checkbox, Radio } from \"antd\";\r\nimport { DownSquareOutlined } from \"@ant-design/icons\";\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nconst Shop = () => {\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [price, setPrice] = useState([0, 0]);\r\n    const [ok, setOk] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n    const [categoryIds, setCategoryIds] = useState([]);\r\n    const [subs, setSubs] = useState([]);\r\n    const [sub, setSub] = useState(\"\");\r\n    const [brands, setBrands] = useState([\r\n        \"Police\", \"4711\", \"PlayBoy\", \"Estle\", \"Swiss Image\", \"Plum\", \"Deborah Milano\", \"Ajmal\", \"Guess\"\r\n    ]);\r\n    const [brand, setBrand] = useState(\"\");\r\n    const [colors, setColors] = useState([\r\n        \"Black\",\r\n        \"Brown\",\r\n        \"Silver\",\r\n        \"White\",\r\n        \"Blue\",\r\n        \"gold\",\r\n        \"blue\"\r\n    ]);\r\n    const [color, setColor] = useState(\"\");\r\n    const [shipping, setShipping] = useState(\"\");\r\n\r\n    let dispatch = useDispatch();\r\n    let { search } = useSelector((state) => ({ ...state }));\r\n    const { text } = search;\r\n\r\n    useEffect(() => {\r\n        loadAllProducts();\r\n        // fetch categories\r\n        getCategories().then((res) => setCategories(res.data));\r\n        // fetch subcategories\r\n        getSubCategories().then((res) => setSubs(res.data));\r\n    }, []);\r\n\r\n    const fetchProducts = (arg) => {\r\n        getSearchProducts(arg).then((res) => {\r\n            setProducts(res.data);\r\n            // console.log(\"FETCH PRODUCT------->\",products)\r\n    });\r\n};\r\n\r\n  // 1. load products by default on page load\r\n    const loadAllProducts = () => {\r\n        getProductsByCount(20).then((p) => {\r\n        setProducts(p.data);\r\n        // console.log(\"all products--------->\",p.data)\r\n        setLoading(false);\r\n        });\r\n    };\r\n\r\n  // 2. load products on user search input\r\n    useEffect(() => {\r\n        const delayed = setTimeout(() => {\r\n        fetchProducts({ query: text });\r\n        if (!text) {\r\n            loadAllProducts();\r\n        }\r\n        }, 300);\r\n        return () => clearTimeout(delayed);\r\n        \r\n    }, [text]);\r\n\r\n  // 3. load products based on price range\r\n    useEffect(() => {\r\n        console.log(\"ok to request\", products);\r\n        fetchProducts({ price });\r\n    }, [ok]);\r\n\r\n    const handleSlider = (value) => {\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n\r\n    // reset\r\n    setCategoryIds([]);\r\n    setPrice(value);\r\n    setSub(\"\");\r\n    setBrand(\"\");\r\n    setColor(\"\");\r\n    setShipping(\"\");\r\n    setTimeout(() => {\r\n    setOk(!ok);\r\n    }, 300);\r\n  };\r\n\r\n  // show categories in a list of checkbox\r\n  const showCategories = () =>\r\n    categories.map((c) => (\r\n      <div key={c._id}>\r\n        <Checkbox\r\n          onChange={handleCheck}\r\n          className=\"pb-2 pl-4 pr-4\"\r\n          value={c._id}\r\n          name=\"category\"\r\n          checked={categoryIds.includes(c._id)}\r\n        >\r\n          {c.name}\r\n        </Checkbox>\r\n        <br />\r\n      </div>\r\n    ));\r\n\r\n  // handle check for categories\r\n  const handleCheck = (e) => {\r\n    // reset\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setSub(\"\");\r\n        setBrand(\"\");\r\n        setColor(\"\");\r\n        // console.log(\"cate------>\",e.target.value);\r\n        let inTheState = [...categoryIds];\r\n        let justChecked = e.target.value;\r\n        let foundInTheState = inTheState.indexOf(justChecked); // index or -1\r\n\r\n        // indexOf method ?? if not found returns -1 else return index [1,2,3,4,5]\r\n        if (foundInTheState === -1) {\r\n            inTheState.push(justChecked);\r\n        } else {\r\n        // if found pull out one item from index\r\n            inTheState.splice(foundInTheState, 1);\r\n        }\r\n\r\n        setCategoryIds(inTheState);\r\n        // console.log(inTheState);\r\n        fetchProducts({ category: inTheState });\r\n    };\r\n\r\n\r\n\r\n  // 6. show products by sub category\r\n    const showSubs = () =>\r\n        subs.map((s) => (\r\n            <div\r\n                key={s._id}\r\n                onClick={() => handleSub(s)}\r\n                className=\"p-1 m-1 badge badge-secondary\"\r\n                style={{ cursor: \"pointer\" }}\r\n            >\r\n                {s.name}\r\n            </div>\r\n    ));\r\n\r\n    const handleSub = (sub) => {\r\n        // console.log(\"SUB\", sub);\r\n            setSub(sub);\r\n            dispatch({\r\n                type: \"SEARCH_QUERY\",\r\n                payload: { text: \"\" },\r\n            });\r\n            setPrice([0, 0]);\r\n            setCategoryIds([]);\r\n            setBrand(\"\");\r\n            setColor(\"\");\r\n            fetchProducts({ sub });\r\n    };\r\n\r\n  // 7. show products based on brand name\r\n    const showBrands = () =>\r\n        brands.map((b) => (\r\n        <Radio\r\n            key = {b}\r\n            value={b}\r\n            name={b}\r\n            checked={b === brand}\r\n            onChange={handleBrand}\r\n            className=\"pb-1 pl-4 pr-4\"\r\n        >\r\n            {b}\r\n        </Radio>\r\n    ));\r\n\r\n    const handleBrand = (e) => {\r\n        setSub(\"\");\r\n        dispatch({\r\n        type: \"SEARCH_QUERY\",\r\n        payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setCategoryIds([]);\r\n        setColor(\"\");\r\n        setBrand(e.target.value);\r\n        fetchProducts({ brand: e.target.value });\r\n    };\r\n\r\n  // 8. show products based on color\r\n    const showColors = () =>\r\n        colors.map((c) => (\r\n        <Radio\r\n            key = {c}\r\n            value={c}\r\n            name={c}\r\n            checked={c === color}\r\n            onChange={handleColor}\r\n            className=\"pb-1 pl-4 pr-4\"\r\n        >\r\n        {c}\r\n        </Radio>\r\n    ));\r\n\r\n    const handleColor = (e) => {\r\n        setSub(\"\");\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setCategoryIds([]);\r\n        setBrand(\"\");\r\n        setColor(e.target.value);\r\n        fetchProducts({ color: e.target.value });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                    <div className=\"col-md-3 pt-2\">\r\n                        <h4>Search/Filter</h4>\r\n                    <hr />\r\n\r\n                    <Menu\r\n                        defaultOpenKeys={[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"]}\r\n                        mode=\"inline\"\r\n                    >\r\n                    {/* price */}\r\n                    <SubMenu\r\n                        key=\"1\"\r\n                        title={\r\n                            <span className=\"h6\">\r\n                                &#8377; Price\r\n                            </span>\r\n                        }\r\n                    >\r\n                        <div>\r\n                            <Slider\r\n                                className=\"ml-4 mr-4\"\r\n                                tipFormatter={(v) => `Rs-${v}`}\r\n                                range\r\n                                value={price}\r\n                                onChange={handleSlider}\r\n                                max=\"10000\"\r\n                            />\r\n                        </div>\r\n                    </SubMenu> \r\n\r\n                    {/* category */}\r\n                    <SubMenu\r\n                            key=\"2\"\r\n                            title={\r\n                                <span className=\"h6\">\r\n                                <DownSquareOutlined /> Categories\r\n                                </span>\r\n                            }\r\n                        >\r\n                        <div style={{ maringTop: \"-10px\" }}>{showCategories()}</div>\r\n                    </SubMenu>\r\n\r\n\r\n                    {/* sub category */}\r\n                    <SubMenu\r\n                        key=\"4\"\r\n                        title={\r\n                            <span className=\"h6\">\r\n                            <DownSquareOutlined /> Sub Categories\r\n                            </span>\r\n                        }\r\n                        >\r\n                        <div style={{ maringTop: \"-10px\" }} className=\"pl-4 pr-4\">\r\n                            {showSubs()}\r\n                        </div>\r\n                    </SubMenu>\r\n\r\n                    {/* brands */}\r\n                    <SubMenu\r\n                        key=\"5\"\r\n                        title={\r\n                            <span className=\"h6\">\r\n                                <DownSquareOutlined /> Brands\r\n                            </span>\r\n                        }\r\n                        >\r\n                        <div style={{ maringTop: \"-10px\" }} className=\"pr-5\">\r\n                            {showBrands()}\r\n                        </div>\r\n                    </SubMenu>\r\n\r\n                    {/* colors */}\r\n                    <SubMenu\r\n                        key=\"6\"\r\n                        title={\r\n                            <span className=\"h6\">\r\n                                <DownSquareOutlined /> Colors\r\n                            </span>\r\n                        }\r\n                        >\r\n                        <div style={{ maringTop: \"-10px\" }} className=\"pr-5\">\r\n                            {showColors()}\r\n                        </div>\r\n                    </SubMenu>\r\n\r\n                </Menu>\r\n                </div>\r\n                        {/* {JSON.stringify(products)} */}\r\n                <div className=\"col-md-9 pt-2\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                        <h4 className=\"text-danger\">Products</h4>\r\n                    )}\r\n\r\n                    { products.length < 1 && <p>No products found</p> }\r\n\r\n                    <div className=\"row pb-5\">\r\n                        {products.map((p) => (\r\n                        <div key={p._id} className=\"col-md-4 mt-3\">\r\n                            <ProductCard product={p} />\r\n                        </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Shop;\r\n\r\n","/* eslint-disable array-callback-return */\r\nimport React from \"react\";\r\nimport ModalImage from \"react-modal-image\";\r\nimport { useDispatch} from \"react-redux\"\r\nimport { toast } from \"react-toastify\";\r\nimport {CheckCircleOutlined, CloseCircleOutlined, CloseOutlined } from \"@ant-design/icons\";\r\n\r\nconst DisplayCartProducts = ({ p }) => {\r\n\r\n    const colors = [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"]\r\n    let dispatch = useDispatch()\r\n\r\n    const handleColor = (e) => {\r\n        let cart = []\r\n        if(typeof window !== \"undefined\"){\r\n            if(localStorage.getItem(\"cart\")){\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n            cart.map((product, i) => {\r\n                if(product._id === p._id){\r\n                    cart[i].color = e.target.value\r\n                }\r\n            })\r\n            \r\n        // console.log('cart udpate color', cart)\r\n\r\n            localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n            dispatch({\r\n                type: \"ADD_TO_CART\",\r\n                payload: cart\r\n            })\r\n        }\r\n    }\r\n\r\n    const handleCountChange = (e) => {\r\n\r\n        let count = e.target.value < 1 ? 1 : e.target.value;\r\n\r\n        if (count > p.quantity) {\r\n            toast.error(`Max available quantity: ${p.quantity}`);\r\n            return;\r\n        }\r\n\r\n        let cart = []\r\n        if ( typeof window !==\"undefined\"){\r\n            if(localStorage.getItem(\"cart\")){\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n            cart.map((product, i) => {\r\n                if(product._id === p._id){\r\n                    cart[i].count =count\r\n                }\r\n            })\r\n                    console.log('cart udpate color', cart)\r\n\r\n            localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n            dispatch({\r\n                type: \"ADD_TO_CART\",\r\n                payload: cart\r\n            })\r\n        }\r\n    }\r\n    const handleRemove = () => {\r\n        console.log(p._id, \"to remove\");\r\n\r\n        let cart = []\r\n        if( typeof window !== \"undefined\"){\r\n            if(localStorage.getItem(\"cart\")){\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n            cart.map((product, i)=>{\r\n                if(product._id === p._id){\r\n                    cart.splice(i, 1)\r\n                }\r\n            })\r\n            localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n            dispatch({\r\n                type: \"ADD_TO_CART\",\r\n                payload: cart\r\n            })\r\n            dispatch({\r\n                type: \"CART_SIDE_VIEW\",\r\n                payload: true,\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <tbody>\r\n            <tr>\r\n                <div style = {{height:\"auto\", width:\"100px\"}}>\r\n                    <td>\r\n                        {p.images.length ? (\r\n                            <ModalImage small={p.images[0].url}\r\n                            large={p.images[0].url} />): \" No Image\"}\r\n                    </td>\r\n                </div>\r\n                \r\n                <td className=\"text-center\">{p.title}</td>\r\n                <td className=\"text-center\">{p.brand}</td>\r\n                <td className=\"text-center\">\r\n                    <select \r\n                        className=\"form-control\"\r\n                        onChange={handleColor}\r\n                        name=\"color\"\r\n                    >\r\n                        {p.color ? (\r\n                            <option value={p.color}>{p.color}</option>) : (\r\n                            <option>Select</option>\r\n                        )}\r\n                            {colors.filter((c) => c !== p.color)\r\n                            .map((c) =>(\r\n                                <option value={c} key={c}>{c}</option>\r\n                        ))}\r\n                            \r\n                        </select>\r\n                </td>\r\n\r\n                <td className=\"text-center\">\r\n                    <input \r\n                        type=\"number\"\r\n                        className=\"form-control\"\r\n                        value = {p.count}\r\n                        onChange={handleCountChange}\r\n                    />\r\n                </td>\r\n\r\n                <td className=\"text-center\">\r\n                    {p.shipping === \"Yes\" ? (\r\n                        <CheckCircleOutlined className=\"text-success\" />\r\n                    ) : (\r\n                        <CloseCircleOutlined className=\"text-danger\" />\r\n                    )}\r\n                </td>\r\n                <td className=\"text-center\">Rs.{p.price}</td>\r\n\r\n                <td className=\"text-center\">\r\n                <CloseOutlined\r\n                    onClick={handleRemove}\r\n                    className=\"text-danger pointer\"\r\n                />\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    );\r\n};\r\n\r\nexport default DisplayCartProducts\r\n\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DisplayCartProducts from \"../components/card/displaycartItems\"\r\nimport { userCart } from '../function/user'\r\n\r\n\r\nconst Cart = ({ history}) => {\r\n    const { cart, user } = useSelector((state) => ({ ...state }));\r\n    // const dispatch = useDispatch();\r\n\r\n    const getTotal = () =>{\r\n        return cart.reduce((currentValue, nextValue) =>{\r\n            return currentValue + nextValue.count * nextValue.price\r\n        }, 0)\r\n    }\r\n\r\n\r\n    const saveOrderToDb = () => {\r\n        // console.log(\"CART\", JSON.stringify(cart, null, 4))\r\n        userCart(cart, user.token).then((res) =>{\r\n            console.log(\"CART POST RES---------->\", res);\r\n            if ( res.data.ok)  history.push('/checkout')\r\n        }) \r\n        .catch((err) => console.log(\"cart save err\", err))\r\n    };\r\n\r\n    const displayCartItems = () => (\r\n        <table className=\"table table-bordered table-hover \">\r\n            <thead className = \"table-secondary text-danger\">\r\n                <tr>\r\n                    <th scope=\"col\">Image</th>\r\n                    <th scope=\"col\">Title</th>\r\n                    <th scope=\"col\">Brand</th>\r\n                    <th scope=\"col\">Color</th>\r\n                    <th scope=\"col\">Count</th>\r\n                    <th scope=\"col\">Shipping</th>\r\n                    <th scope=\"col\">Price</th>\r\n                    <th scope=\"col\">Remove</th>\r\n                </tr>\r\n            </thead>\r\n            {cart.map((p)=>(\r\n                <DisplayCartProducts key={p.id} p = {p} />\r\n            ))}\r\n        </table>\r\n    )\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8\">\r\n                    <h4>Cart/{cart.length}</h4>\r\n                    {!cart.length ? (\r\n                        <p>\r\n                            No Products in cart. Click Here for <Link to=\"/shop\"> Shopping</Link>\r\n                        </p>) :(\r\n                            displayCartItems()\r\n                        )}\r\n                </div>\r\n\r\n\r\n                <div className=\"col-md-4\">\r\n                    <h3>OrderSummary</h3>\r\n                    <hr />\r\n                    <p>Products</p>\r\n                    <hr />\r\n                    {cart.map((c, i) =>  (\r\n                        <div key = { i }>\r\n                            <p>{c.title} x {c.count} = Rs.{c.price * c.count}</p>\r\n                        </div>)\r\n                    )}\r\n                    <hr />\r\n                    Total: <b>Rs.{getTotal()}</b>\r\n                    <hr />\r\n                    { user ? (\r\n                        <button \r\n                            className=\"btn btn-sm btn-primary mt-2\"\r\n                            disabled={ !cart.length }\r\n                            onClick={saveOrderToDb}\r\n                        >\r\n                            Proceed to CheckOut\r\n                        </button>\r\n                    ) :(\r\n                        <button className=\"btn btn-sm btn-primary mt-2\">\r\n                            <Link\r\n                                to = {{\r\n                                    pathname : '/login',\r\n                                    state : { from: 'cart'}\r\n                                }}\r\n                            >\r\n                                Login to Checkout\r\n                            </Link>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Cart;\r\n","import React from \"react\";\r\nimport { Drawer } from \"antd\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst SideDrawer = ({ children }) => {\r\n    const dispatch = useDispatch();\r\n    const { sideDraw, cart } = useSelector((state) => ({ ...state }));\r\n\r\n    const imageStyle = {\r\n        width: \"100%\",\r\n        height: \"50px\",\r\n        objectFit: \"cover\",\r\n    };\r\n\r\n    return <Drawer \r\n                className=\"text-center\"\r\n                visible={sideDraw} \r\n                title={`CART / ${cart.length} Products `}\r\n                closable = {false}\r\n                onClose={() => {\r\n                    dispatch({\r\n                    type: \"CART_SIDE_VIEW\",\r\n                    payload: false,\r\n                    });\r\n                }}\r\n            >\r\n                {cart.map((p)=>(\r\n                    <div key={p._id} className=\"row\">\r\n                        <div className=\"col\">\r\n                            {p.images[0] ? (<>\r\n                                <img src={p.images[0].url} style={imageStyle} alt={p.title} />\r\n                                <p className=\"text-center bg-secondary text-light\">\r\n                                    {p.title} x {p.count}\r\n                                </p>\r\n                            </>) : (\r\n                                <>\r\n                                    <h6>No Image sorry</h6>\r\n                                    <p className=\"text-center bg-secondary text-light\">\r\n                                        {p.title} x {p.count}\r\n                                    </p>\r\n                                </>\r\n                            )}\r\n                            \r\n                        </div>\r\n                    </div>\r\n                ))}\r\n\r\n                <Link to=\"/cart\">\r\n                    <button\r\n                        onClick={() =>\r\n                            dispatch({\r\n                            type: \"SET_VISIBLE\",\r\n                            payload: false,\r\n                            })\r\n                        }\r\n                        className=\"text-center btn btn-primary btn-raised btn-block\"\r\n                        >\r\n                            Go To Cart\r\n                    </button>\r\n                </Link>\r\n            </Drawer>;\r\n};\r\n\r\nexport default SideDrawer;\r\n","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React,{ useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { getUserCart, emptyCart, userAddress, applyCoupon } from '../function/user'\r\nimport { toast } from \"react-toastify\"\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nconst Checkout = ({ history }) => {\r\n\r\n    const [ total, setTotal] = useState(0)\r\n    const [ products, setProducts] = useState([])\r\n    const [address, setAddress] = useState(\"\");\r\n    const [addressSaved, setAddressSaved] = useState(false);\r\n    const [coupon, setCoupon] = useState(\"\");\r\n    const [totalAfterDiscount, setTotalAfterDiscount] = useState(\"\");\r\n    const [discountError, setDiscountError] = useState(\"\"); \r\n\r\n\r\n    const { user } = useSelector((state) => ({ ...state}))\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        getUserCart(user.token)\r\n        .then((res) =>{\r\n            // console.log(\"cart \", JSON.stringify(res.data, null, 4))\r\n            setProducts(res.data.products)\r\n            setTotal(res.data.cartTotal)\r\n\r\n        })\r\n    }, [])\r\n\r\n\r\n    const saveAddressToDb = () => {\r\n        userAddress(user.token, address).then((res) => {\r\n            if (res.data.ok) {\r\n                setAddressSaved(true);\r\n                toast.success(\"Address saved\");\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleEmptyCart = () =>{\r\n        if ( typeof window !== 'undefined'){\r\n            localStorage.removeItem(\"cart\")\r\n        }\r\n\r\n        dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            payload: []\r\n        })\r\n        emptyCart(user.token).then((res) =>{\r\n            setProducts([])\r\n            setTotal(0)\r\n            setTotalAfterDiscount(0);\r\n            setCoupon(\"\");\r\n            toast.success(\"Cart is emapty. Contniue shopping.\");\r\n        })\r\n    }\r\n\r\n    const applyDiscountCoupon = () => {\r\n        console.log(\"send coupon to backend\", coupon);\r\n        applyCoupon(user.token, coupon).then((res) => {\r\n            console.log(\"RES ON COUPON APPLIED\", res.data);\r\n            if (res.data) {\r\n                setTotalAfterDiscount(res.data);\r\n                // update redux coupon applied true/false\r\n                dispatch({\r\n                    type: \"COUPON_APPLIED\",\r\n                    payload: true,\r\n                });\r\n            }\r\n          // error\r\n            if (res.data.err) {\r\n                setDiscountError(res.data.err);\r\n                // update redux coupon applied true/false\r\n                dispatch({\r\n                    type: \"COUPON_APPLIED\",\r\n                    payload: false,\r\n                });\r\n            }\r\n        });\r\n    };;\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n                <h4>Delivery Address</h4>\r\n                <br />\r\n                <br />\r\n                <ReactQuill theme=\"snow\" value={address} onChange={setAddress} />\r\n                <button className=\"btn btn-primary mt-2\" onClick={saveAddressToDb}>\r\n                    Save\r\n                </button>\r\n                <hr />\r\n                <h4>Enter your CouponId</h4>\r\n                <>\r\n                    <input\r\n                        onChange={(e) => {\r\n                            setCoupon(e.target.value)           \r\n                            setDiscountError(\"\");\r\n                        }}\r\n                        value={coupon}\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                    />\r\n                    <button onClick={applyDiscountCoupon} className=\"btn btn-primary mt-2\">\r\n                        Apply\r\n                    </button>\r\n                    </>\r\n                <br />\r\n                <br />\r\n                {discountError && <p className=\"bg-danger p-2\">{discountError}</p>}\r\n            </div>\r\n\r\n            <div className=\"col-md-6\">\r\n                <h4>Your Order Summary</h4>\r\n                <hr />\r\n                <p>Products {products.length}</p>\r\n                <hr />\r\n                {products.map((p, i) => (\r\n                    <div key={i}>\r\n                        <p>\r\n                        {p.product.title} ({p.color}) x {p.count} ={\" \"}\r\n                        {p.product.price * p.count}\r\n                        </p>\r\n                    </div>\r\n                ))}\r\n                <hr />\r\n                <p> <b>Your Cart Total: {total}</b></p>\r\n                {totalAfterDiscount > 0 && (\r\n                    <p className=\"bg-success p-2\">\r\n                        Discount Applied: Total Payable: ${totalAfterDiscount}\r\n                    </p>\r\n                )}\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                        <button className=\"btn btn-primary\" onClick={()=> history.push('/placeorder')}>\r\n                            Place Order\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-6\">\r\n                        <button \r\n                            className=\"btn btn-primary\"\r\n                            onClick={handleEmptyCart}\r\n                            disabled={!products.length}\r\n                        >Empty/Clear Cart</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Checkout;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { createPaymentIntent } from \"../function/stripe\"\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card } from \"antd\";\r\nimport { DollarOutlined, CheckOutlined } from \"@ant-design/icons\";\r\nimport { createOrder, emptyCart } from '../function/user'\r\n\r\n\r\nconst StripeCheckout = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n  const { user, coupon } = useSelector((state) => ({ ...state }));\r\n\r\n  const [succeeded, setSucceeded] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [processing, setProcessing] = useState(\"\");\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n\r\n  const [cartTotal, setCartTotal] = useState(0);\r\n  const [totalAfterDiscount, setTotalAfterDiscount] = useState(0);\r\n  const [payable, setPayable] = useState(0);\r\n\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  useEffect(() => {\r\n    createPaymentIntent(user.token, coupon).then((res) => {\r\n      console.log(\"create payment intent\", res.data);\r\n      setClientSecret(res.data.clientSecret);\r\n      setCartTotal(res.data.cartTotal);\r\n      setTotalAfterDiscount(res.data.totalAfterDiscount);\r\n      setPayable(res.data.payable);\r\n    });\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setProcessing(true);\r\n\r\n    const payload = await stripe.confirmCardPayment(clientSecret, {\r\n      payment_method: {\r\n        card: elements.getElement(CardElement),\r\n        billing_details: {\r\n          name: e.target.name.value,\r\n        },\r\n      },\r\n    });\r\n\r\n    if (payload.error) {\r\n      setError(`Payment failed ${payload.error.message}`);\r\n      setProcessing(false);\r\n    } else {\r\n      // here you get result after successful payment\r\n      // create order and save in database for admin to process\r\n\r\n      createOrder(payload, user.token).then((res) => {\r\n        if (res.data.ok) {\r\n          // empty cart from local storage\r\n          if (typeof window !== \"undefined\") localStorage.removeItem(\"cart\");\r\n          // empty cart from redux\r\n          dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            payload: [],\r\n          });\r\n          // reset coupon to false\r\n          dispatch({\r\n            type: \"COUPON_APPLIED\",\r\n            payload: false,\r\n          });\r\n          // empty cart from database\r\n          emptyCart(user.token);\r\n        }\r\n      })\r\n      // empty user cart from redux store and local storage\r\n      console.log(JSON.stringify(payload, null, 4));\r\n      setError(null);\r\n      setProcessing(false);\r\n      setSucceeded(true);\r\n    }\r\n  };\r\n\r\n  const handleChange = async (e) => {\r\n    // listen for changes in the card element\r\n    // and display any errors as the custoemr types their card details\r\n    setDisabled(e.empty); // disable pay button if errors\r\n    setError(e.error ? e.error.message : \"\"); // show error message\r\n  };\r\n\r\n  const cartStyle = {\r\n    style: {\r\n      base: {\r\n        color: \"#32325d\",\r\n        fontFamily: \"Arial, sans-serif\",\r\n        fontSmoothing: \"antialiased\",\r\n        fontSize: \"16px\",\r\n        \"::placeholder\": {\r\n          color: \"#32325d\",\r\n        },\r\n      },\r\n      invalid: {\r\n        color: \"#fa755a\",\r\n        iconColor: \"#fa755a\",\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!succeeded && (\r\n        <div>\r\n          {coupon && totalAfterDiscount !== undefined ? (\r\n            <p className=\"alert alert-success\">{`Total after discount: $${totalAfterDiscount}`}</p>\r\n          ) : (\r\n            <p className=\"alert alert-danger\">No coupon applied</p>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div className=\"text-center pb-5\">\r\n        <Card\r\n          actions={[\r\n            <>\r\n              <DollarOutlined className=\"text-info\" /> <br /> Total: $\r\n              {cartTotal}\r\n            </>,\r\n            <>\r\n              <CheckOutlined className=\"text-info\" /> <br /> Total payable : $\r\n              {(payable / 100).toFixed(2)}\r\n            </>,\r\n          ]}\r\n        />\r\n      </div>\r\n\r\n\r\n      \r\n\r\n      <form id=\"payment-form\" className=\"stripe-form\" onSubmit={handleSubmit}>\r\n        <CardElement\r\n          id=\"card-element\"\r\n          options={cartStyle}\r\n          onChange={handleChange}\r\n        />\r\n        <button\r\n          className=\"stripe-button\"\r\n          disabled={processing || disabled || succeeded}\r\n        >\r\n          <span id=\"button-text\">\r\n            {processing ? <div className=\"spinner\" id=\"spinner\"></div> : \"Pay\"}\r\n          </span>\r\n        </button>\r\n        <br />\r\n        {error && (\r\n          <div className=\"card-error\" role=\"alert\">\r\n            {error}\r\n          </div>\r\n        )}\r\n      </form>\r\n\r\n      <p className={succeeded ? \"result-message\" : \"result-message hidden\"}>\r\n        Payment Successful.{\" \"}\r\n        <Link to=\"/user/history\">See it in your purchase history.</Link>\r\n      </p> \r\n    </>\r\n  );\r\n};\r\n\r\nexport default StripeCheckout;\r\n","import axios from 'axios'\r\n\r\nexport const  createPaymentIntent = (authtoken, coupon) =>\r\n    axios.post( `${process.env.REACT_APP_API}/create-payment-intent`, \r\n    {couponApplied: coupon}, \r\n    {\r\n        headers: {\r\n            authtoken,\r\n        }\r\n    }\r\n)","import React from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport StripeCheckout from \"../components/stripeCheckout\";\r\nimport \"../strip.css\";\r\nconst STRIPE_KEY = \"pk_test_51IZKZ4SBKRZHKo3pT8zJJxOXg1aljumgBVbHvILjhldZpUKaUwYqBz0Xr3ZQ3jDTKAVPCpdoLEWUTTDTZdXewWCD00CsYIDwRy\"\r\nconst PaymentPage = () => {\r\n  const promise = loadStripe(STRIPE_KEY);\r\n\r\n  return (\r\n    <div className=\"container p-5 text-center\">\r\n      <h4>Complete your purchase</h4>\r\n      <Elements stripe={promise}>\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          <StripeCheckout />\r\n        </div>\r\n      </Elements>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentPage;\r\n\r\n ","import React, { useEffect } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Login from \"./pages/auth/Login\";\nimport Register from \"./pages/auth/Register\";\nimport Home from \"./pages/Home\";\nimport Header from './components/nav/Header';\nimport RegisterComplete from \"./pages/auth/RegisterComplete\";\nimport ForgotPassword from \"./pages/auth/ForgotPassword\";\nimport History from \"./pages/user/History\";\nimport UserRoute from \"./components/routes/user\"\nimport AdminRoute from \"./components/routes/admin\"\n\nimport Password from \"./pages/user/password\"\nimport Wishlist from \"./pages/user/wishlist\"\nimport AdminDashboard from \"./pages/admin/adminDashboard\"\nimport CategoryCreate from \"./pages/admin/category/createcategory\"\nimport CategoryUpdate from \"./pages/admin/category/categoryUpdate\"\nimport SubCategoryCreate from \"./pages/admin/subCategory/subcategoryCreate\"\nimport SubCategoryUpdate from \"./pages/admin/subCategory/subcategoryUpdate\"\nimport ProductCreate from \"./pages/admin/product/productCreate\"\nimport AllProducts from \"./pages/admin/product/allProducts\"\nimport ProductUpdate from \"./pages/admin/product/productUpdate\"\nimport ProductView from \"./pages/product\"\n\nimport CouponPage from \"./pages/admin/coupon/coupon\"\n\nimport Shop from \"./pages/shop\"\n\nimport { auth } from './firebase';\nimport { useDispatch } from 'react-redux';\nimport {currentUser} from './function/auth'\nimport Cart from './pages/Cart'\nimport  SideDrawer  from './components/drawer/cartSide'\n\nimport Checkout from './pages/checkout'\nimport PaymentPage from './pages/palceOrder'\n\nconst App = () => {\nconst dispatch = useDispatch()\n\n// to check firebase auth state\nuseEffect(() => {\n\n  const unsubscribe = auth.onAuthStateChanged(async (user) => {\n\n    if(user) {\n      const idTokenResult = await user.getIdTokenResult()\n      // console.log(\"user\", user);\n\n      currentUser(idTokenResult.token)\n                .then((res)=>{\n                    dispatch({\n                        type: \"LOGGED_IN_USER\",\n                        payload: {\n                            name: res.data.name,\n                            email: res.data.email,\n                            token: idTokenResult.token,\n                            role: res.data.role,\n                            _id: res.data._id\n                            },\n                      });\n                })\n                .catch((err)=>{\n                  console.log(err)\n                });\n    }\n});\n  // cleanup\n  return () => unsubscribe();\n\n}, [dispatch]);\n\n  return(\n    \n    <>\n    <Header/>\n    <SideDrawer />\n    <ToastContainer/>\n    <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/register\" component={Register} />\n        <Route exact path=\"/register/complete\" component={RegisterComplete} />\n        <Route exact path=\"/forgot/password\" component={ForgotPassword} />\n        <UserRoute exact path=\"/user/history\" component={History} />\n        <UserRoute exact path=\"/user/wishlist\" component={Wishlist} />\n        <UserRoute exact path=\"/user/password\" component={Password} />\n        <AdminRoute exact path=\"/admin/dashboard\" component={AdminDashboard} />\n        <AdminRoute exact path=\"/admin/category\" component={CategoryCreate} />\n        <AdminRoute exact path=\"/admin/category/:slug\" component={CategoryUpdate} />\n        <AdminRoute exact path=\"/admin/subcategory\" component={SubCategoryCreate} />\n        <AdminRoute exact path=\"/admin/subcategory/:slug\" component={SubCategoryUpdate} />\n        <AdminRoute exact path=\"/admin/product\" component={ProductCreate} />\n        <AdminRoute exact path=\"/admin/products\" component={AllProducts} />\n        <AdminRoute exact path=\"/admin/product/:slug\" component={ProductUpdate} />\n        <AdminRoute exact path=\"/admin/coupon\" component={CouponPage} />\n\n        <Route exact path=\"/product/:slug\" component={ProductView} />\n        <UserRoute exact path=\"/checkout\" component={Checkout} />\n        <Route exact path=\"/shop\" component={Shop} />\n        <Route exact path=\"/cart\" component={Cart} />\n        <UserRoute exact path=\"/placeorder\" component={PaymentPage} />\n    </Switch>\n    </>\n\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","let initialState = {};\r\n\r\n// load cart items from local storage\r\nif (typeof window !== \"undefined\") {\r\n  if (localStorage.getItem(\"cart\")) {\r\n    initialState = JSON.parse(localStorage.getItem(\"cart\"));\r\n  } else {\r\n    initialState = [];\r\n  }\r\n}\r\n\r\nexport const cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_TO_CART\":\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux'\r\nimport { userReducer } from \"./userReducer\";\r\nimport { SearchReducer } from \"./searchReducer\";\r\nimport { cartReducer } from \"./cartReducer\";\r\nimport { cartSideReducer } from \"./cartsideReducer\";\r\nimport { couponReducer } from \"./couponReducer\";\r\n\r\n\r\nexport const rootReducer = combineReducers({\r\n    user: userReducer,\r\n    search: SearchReducer,\r\n    cart: cartReducer,\r\n    sideDraw: cartSideReducer,\r\n    coupon : couponReducer\r\n});\r\n\r\nexport default rootReducer;","export const userReducer = (state = null, action) =>  {\r\n\r\n    switch(action.type) {\r\n        case \"LOGGED_IN_USER\":\r\n            return action.payload;\r\n        case \"LOGOUT\":\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n            \r\n    }\r\n}","export const SearchReducer = ( state = { text: \"\" }, action) => {\r\n\r\n    switch (action.type) {\r\n        case \"SEARCH_QUERY\":\r\n            return { ...state, ...action.payload }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","export const cartSideReducer = (state = false, action) => {\r\n    switch (action.type) {\r\n        case \"CART_SIDE_VIEW\":\r\n        return action.payload;\r\n    default:\r\n        return state;\r\n    }\r\n  };","export const couponReducer = (state = false, action) => {\r\n    switch (action.type) {\r\n        case \"COUPON_APPLIED\":\r\n        return action.payload;\r\n    default:\r\n        return state;\r\n    }\r\n};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from \"react-router-dom\";\nimport 'antd/dist/antd.css';\n\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport rootReducer from \"./reducers\"\n\n//store\nconst store = createStore(rootReducer, composeWithDevTools());\n\n\nReactDOM.render(\n  // <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n      <App />\n      </BrowserRouter>\n    </Provider>,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}