(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{266:function(e,t,c){},487:function(e,t,c){},489:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(34),r=c.n(a),s=(c(266),c(10)),o=c.n(s),i=c(18),l=c(43),u=c(24),j=(c(267),c(12)),d=c(9),b=c(151);c(268);b.a.initializeApp({apiKey:"AIzaSyAE0NWeC0yx2Tuhwo8XZdH0_EBHb5q5SgA",authDomain:"luvih-76d9c.firebaseapp.com",projectId:"luvih-76d9c",storageBucket:"luvih-76d9c.appspot.com",messagingSenderId:"542838529501",appId:"1:542838529501:web:c300a8fe3e588dcf612a34"});var p=b.a.auth(),h=new b.a.auth.GoogleAuthProvider,O=c(105),m=c(503),x=c(504),f=c(15),g=c(26),v=c(27),y=c.n(v),N=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/create-or-update-user"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/current-user"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/current-admin"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=c(1),C=function(e){var t=e.history,c=Object(n.useState)("Nitishaa.kaur96@gmail.com"),a=Object(d.a)(c,2),r=a[0],s=a[1],l=Object(n.useState)("112233"),b=Object(d.a)(l,2),v=b[0],y=b[1],w=Object(n.useState)(!1),S=Object(d.a)(w,2),C=S[0],_=S[1],E=Object(f.c)((function(e){return Object(j.a)({},e)})).user;Object(n.useEffect)((function(){t.location.state||E&&E.token&&t.push("/")}),[t,E]);var P=Object(f.b)(),D=function(e){var c=t.location.state;c?t.push(c.from):"admin"===e.data.role?t.push("/admin/dashboard"):t.push("/user/history")},I=function(){var e=Object(i.a)(o.a.mark((function e(t){var c,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_(!0),e.prev=2,e.next=5,p.signInWithEmailAndPassword(r,v);case 5:return c=e.sent,n=c.user,e.next=9,n.getIdTokenResult();case 9:a=e.sent,N(a.token).then((function(e){P({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:a.token,role:e.data.role,_id:e.data._id}}),D(e)})).catch((function(e){console.log(e)})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),u.b.error(e.t0.message),_(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.signInWithPopup(h).then(function(){var e=Object(i.a)(o.a.mark((function e(t){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.user,e.next=3,c.getIdTokenResult();case 3:n=e.sent,N(n.token).then((function(e){P({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:n.token,role:e.data.role,_id:e.data._id}}),D(e)})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),u.b.error(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"container p-5",children:Object(k.jsx)("div",{className:"row",children:Object(k.jsxs)("div",{className:"col-md-6 offset-md-3",children:[C?Object(k.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(k.jsx)("h4",{children:"Login"}),Object(k.jsxs)("form",{onSubmit:I,children:[Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Your email",autoFocus:!0})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",className:"form-control",value:v,onChange:function(e){return y(e.target.value)},placeholder:"Your password"})}),Object(k.jsx)("br",{}),Object(k.jsx)(O.a,{onClick:I,type:"primary",className:"mb-3",block:!0,shape:"round",icon:Object(k.jsx)(m.a,{}),size:"large",disabled:!r||v.length<6,children:"Login with Email/Password"})]}),Object(k.jsx)(O.a,{onClick:A,type:"danger",className:"mb-3",block:!0,shape:"round",icon:Object(k.jsx)(x.a,{}),size:"large",children:"Login with Google"}),Object(k.jsx)(g.b,{to:"/forgot/password",className:"float-right text-danger",children:"Forgot Password"})]})})})},_=function(e){var t=e.history,c=Object(n.useState)(""),a=Object(d.a)(c,2),r=a[0],s=a[1],l=Object(f.c)((function(e){return Object(j.a)({},e)})).user;Object(n.useEffect)((function(){l&&l.token&&t.push("/")}),[t,l]);var b=function(){var e=Object(i.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={url:"http://localhost:3000/register/complete",handleCodeInApp:!0},e.next=4,p.sendSignInLinkToEmail(r,c);case 4:u.b.success("Email was sent to ".concat(r,". Click the link to complete your registration.")),window.localStorage.setItem("emailForRegistration",r),s("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"container p-5",children:Object(k.jsx)("div",{className:"row",children:Object(k.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(k.jsx)("h4",{children:"Register"}),Object(k.jsxs)("form",{onSubmit:b,children:[Object(k.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Your email",autoFocus:!0}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Register"})]})]})})})},E=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/product"),t,{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/products/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("https://shop-node-deploy.herokuapp.com/api","/product/").concat(t),{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/product/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(o.a.mark((function e(t,c,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.put("".concat("https://shop-node-deploy.herokuapp.com/api","/product/").concat(t),c,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(o.a.mark((function e(t,c,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/products"),{sort:t,order:c,page:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/totalproducts"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(o.a.mark((function e(t,c,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.put("".concat("https://shop-node-deploy.herokuapp.com/api","/product/star/").concat(t),{star:c},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/product/related/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/search/filters"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=c(494),Y=c(98),q=c(505),W=c(506),G=c(133),J=c.n(G),V=function(e){if(e&&e.ratings){var t=[],c=e&&e.ratings,n=c.length;c.map((function(e){return t.push(e.star)}));var a=5*t.reduce((function(e,t){return e+t}),0)/(5*n);return Object(k.jsx)("div",{className:"text-center pt-1 pb-3",children:Object(k.jsxs)("span",{children:[Object(k.jsx)(J.a,{starDimension:"20px",starSpacing:"4px",starRatedColor:"green",rating:a,editing:!1})," ",e.ratings.length]})})}},M=c(99),H=c.n(M),K=B.a.Meta,z=function(e){var t=e.product,c=Object(n.useState)("Click to add"),a=Object(d.a)(c,2),r=a[0],s=a[1],o=Object(f.b)(),i=t.images,l=t.title,u=t.description,b=t.slug,p=t.price;return Object(k.jsxs)(k.Fragment,{children:[t&&t.ratings&&t.ratings.length>0?V(t):Object(k.jsx)("div",{className:"text-center pt-1 pb-3",children:"No rating yet"}),Object(k.jsx)(B.a,{cover:Object(k.jsx)("img",{alt:l,src:i&&i.length?i[0].url:"",style:{height:"150px",objectFit:"cover"},className:"p-1"}),actions:[Object(k.jsxs)(g.b,{to:"/product/".concat(b),children:[Object(k.jsx)(q.a,{className:"text-warning"})," ",Object(k.jsx)("br",{})," View Product"]}),Object(k.jsx)(Y.a,{title:r,children:Object(k.jsxs)("a",{onClick:function(){var e=[];if("undefined"!==typeof window){localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart"))),e.push(Object(j.a)(Object(j.a)({},t),{},{count:1}));var c=H.a.uniqWith(e,H.a.isEqual);localStorage.setItem("cart",JSON.stringify(c)),s("Added"),o({type:"ADD_TO_CART",payload:c}),o({type:"CART_SIDE_VIEW",payload:!0})}},disabled:t.quantity<1,children:[Object(k.jsx)(W.a,{className:"text-danger"})," ",Object(k.jsx)("br",{}),t.quantity<1?"Out of stock":"Add to Cart"]})})],children:Object(k.jsx)(K,{title:"".concat(l," - $").concat(p),description:"".concat(u&&u.substring(0,40),"...")})})]})},Q=c(495),Z=function(e){var t=e.count;return Object(k.jsx)("div",{className:"row pb-5",children:function(){for(var e=[],c=0;c<t;c++)e.push(Object(k.jsx)(B.a,{className:"col-md-4",children:Object(k.jsx)(Q.a,{active:!0})},c));return e}()})},$=c(493),X=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(0),u=Object(d.a)(l,2),j=u[0],b=u[1],p=Object(n.useState)(1),h=Object(d.a)(p,2),O=h[0],m=h[1];Object(n.useEffect)((function(){x()}),[O]),Object(n.useEffect)((function(){T().then((function(e){return b(e.data)}))}),[]);var x=function(){a(!0),R("createdAt","desc",O).then((function(e){i(e.data),a(!1)}))};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"container",children:c?Object(k.jsx)(Z,{count:3}):Object(k.jsx)("div",{className:"row",children:o.map((function(e){return Object(k.jsx)("div",{className:"col-md-4",children:Object(k.jsx)(z,{product:e})},e._id)}))})}),Object(k.jsx)("div",{className:"row",children:Object(k.jsx)("nav",{className:"col-md-4 offset-md-4 text-center pt-5 p-3",children:Object(k.jsx)($.a,{current:O,total:j/3*10,onChange:function(e){return m(e)}})})})]})},ee=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(0),u=Object(d.a)(l,2),j=u[0],b=u[1],p=Object(n.useState)(1),h=Object(d.a)(p,2),O=h[0],m=h[1];Object(n.useEffect)((function(){x()}),[O]),Object(n.useEffect)((function(){T().then((function(e){return b(e.data)}))}),[]);var x=function(){a(!0),R("sold","desc",O).then((function(e){i(e.data),a(!1)}))};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"container",children:c?Object(k.jsx)(Z,{count:3}):Object(k.jsx)("div",{className:"row",children:o.map((function(e){return Object(k.jsx)("div",{className:"col-md-4",children:Object(k.jsx)(z,{product:e})},e._id)}))})}),Object(k.jsx)("div",{className:"row",children:Object(k.jsx)("nav",{className:"col-md-4 offset-md-4 text-center pt-5 p-3",children:Object(k.jsx)($.a,{current:O,total:j/3*10,onChange:function(e){return m(e)}})})})]})},te=c(243),ce=c.n(te),ne=function(e){var t=e.text;return Object(k.jsx)(ce.a,{options:{strings:t,autoStart:!0,loop:!0}})},ae=function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"jumbotron text-danger h1 font-weight-bold text-center",children:Object(k.jsx)(ne,{text:["New Arrivals","Best Sellers","Latest Products"]})}),Object(k.jsx)("h4",{className:"text-center p-3 mt-5 mb-5 display-4 jumbotron",children:"New Arrivals"}),Object(k.jsx)(X,{}),Object(k.jsx)("h4",{className:"text-center p-3 mt-5 mb-5 display-4 jumbotron",children:"Best Sellers"}),Object(k.jsx)(ee,{})]})},re=c(496),se=c(500),oe=c(507),ie=c(508),le=c(509),ue=c(510),je=c(511),de=c(512),be=c(255),pe=c(259),he=function(){var e=Object(f.c)((function(e){return Object(j.a)({},e)})).search.text,t=Object(f.b)(),c=Object(l.f)(),n=function(t){t.preventDefault(),c.push("/shop?".concat(e))};return Object(k.jsxs)("form",{className:"form-inline my-2 my-lg-0",onSubmit:n,children:[Object(k.jsx)("input",{className:"form-control mr-sm-2",type:"search",value:e,placeholder:"Search",onChange:function(e){t({type:"SEARCH_QUERY",payload:{text:e.target.value}})}}),Object(k.jsx)(pe.a,{onClick:n,style:{cursor:"pointer"}})]})},Oe=re.a.SubMenu,me=re.a.Item,xe=function(){var e=Object(n.useState)("home"),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(f.b)(),s=Object(f.c)((function(e){return Object(j.a)({},e)})),o=s.user,i=s.cart,u=Object(l.f)();return Object(k.jsxs)(re.a,{onClick:function(e){a(e.key)},selectedKeys:[c],mode:"horizontal",children:[Object(k.jsx)(me,{icon:Object(k.jsx)(oe.a,{}),children:Object(k.jsx)(g.b,{to:"/",children:"Home"})},"home"),Object(k.jsx)(me,{icon:Object(k.jsx)(ie.a,{}),children:Object(k.jsx)(g.b,{to:"/shop",children:"Shop"})},"shop"),Object(k.jsx)(me,{icon:Object(k.jsx)(W.a,{}),children:Object(k.jsx)(g.b,{to:"/cart",children:Object(k.jsx)(se.a,{count:i.length,offset:[9,0],children:"Cart"})})},"cart"),!o&&Object(k.jsx)(me,{icon:Object(k.jsx)(le.a,{}),className:"float-right",children:Object(k.jsx)(g.b,{to:"/register",children:"Register"})},"register"),!o&&Object(k.jsx)(me,{icon:Object(k.jsx)(ue.a,{}),className:"float-right",children:Object(k.jsx)(g.b,{to:"/login",children:"Login"})},"login"),o&&Object(k.jsxs)(Oe,{icon:Object(k.jsx)(je.a,{}),title:o.email&&o.email.split("@")[0],className:"float-right",children:[o&&"subscriber"===o.role&&Object(k.jsx)(me,{children:Object(k.jsx)(g.b,{to:"/user/history",children:"Dashboard"})}),o&&"admin"===o.role&&Object(k.jsx)(me,{children:Object(k.jsx)(g.b,{to:"/admin/dashboard",children:"Dashboard"})}),Object(k.jsx)(me,{icon:Object(k.jsx)(de.a,{}),onClick:function(){be.a.auth().signOut(),r({type:"LOGOUT",payload:null}),u.push("/login")},children:"Logout"})]},"SubMenu"),Object(k.jsx)("span",{className:"float-right p-1",children:Object(k.jsx)(he,{})})]})},fe=function(e){var t=e.history,c=Object(n.useState)(""),a=Object(d.a)(c,2),r=a[0],s=a[1],l=Object(n.useState)(""),j=Object(d.a)(l,2),b=j[0],h=j[1];Object(n.useEffect)((function(){s(window.localStorage.getItem("emailForRegistration"))}),[t]);var O=Object(f.b)(),m=function(){var e=Object(i.a)(o.a.mark((function e(c){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),r&&b){e.next=4;break}return u.b.error("Email and password is required."),e.abrupt("return");case 4:if(!(b.length<6)){e.next=7;break}return u.b.error("Password must contain atleast 6 characters long."),e.abrupt("return");case 7:return e.prev=7,e.next=10,p.signInWithEmailLink(r,window.location.href);case 10:if(!e.sent.user.emailVerified){e.next=21;break}return window.localStorage.removeItem("emailForRegistration"),n=p.currentUser,e.next=16,n.updatePassword(b);case 16:return e.next=18,n.getIdTokenResult();case 18:a=e.sent,N(a.token).then((function(e){O({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:a.token,role:e.data.role,_id:e.data._id}})})).catch((function(e){console.log(e)})),t.push("/");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),u.b.error(e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[7,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"container p-5",children:Object(k.jsx)("div",{className:"row",children:Object(k.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(k.jsx)("h4",{children:"Register Complete"}),Object(k.jsxs)("form",{onSubmit:m,children:[Object(k.jsx)("input",{type:"email",className:"form-control",value:r,disabled:!0}),Object(k.jsx)("input",{type:"password",className:"form-control",value:b,onChange:function(e){return h(e.target.value)},placeholder:"password",autoFocus:!0}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Complete Registration"})]})]})})})},ge=function(e){var t=e.history,c=Object(n.useState)(""),a=Object(d.a)(c,2),r=a[0],s=a[1],l=Object(n.useState)(!1),b=Object(d.a)(l,2),h=b[0],O=b[1],m=Object(f.c)((function(e){return Object(j.a)({},e)})).user;Object(n.useEffect)((function(){m&&m.token&&t.push("/")}),[t,m]);var x=function(){var e=Object(i.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O(!0),c={url:"https://shop-node-deploy.herokuapp.com/api",handleCodeInApp:!0},e.next=5,p.sendPasswordResetEmail(r,c).then((function(){s(""),O(!1),u.b.success("Check your email for password reset link")})).catch((function(e){O(!1),u.b.error(e.message),console.log("Error in Forgot Password",e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"container col-md-6 offset-md-3 p-5",children:[h?Object(k.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(k.jsx)("h4",{children:"Forgot Password"}),Object(k.jsxs)("form",{onSubmit:x,children:[Object(k.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Your email",autoFocus:!0}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{className:"btn btn-raised",disabled:!r,children:"Submit"})]})]})},ve=function(){return Object(k.jsx)("nav",{children:Object(k.jsxs)("ul",{className:"nav flex-column",children:[Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/user/history",className:"nav-link",children:"History"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/user/password",className:"nav-link",children:"Password"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/user/wishlist",className:"nav-link",children:"Wishlist"})})]})})},ye=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/user/wishlist"),{productId:t},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/user/wishlist"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.put("".concat("https://shop-node-deploy.herokuapp.com/api","/user/wishlist/").concat(t),{},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Se=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/user/cart"),{cart:t},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),ke=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/user/cart"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("https://shop-node-deploy.herokuapp.com/api","/user/cart"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/user/address"),{address:c},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/user/cart/coupon"),{coupon:c},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/user/order"),{stripeResponse:t},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),De=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/user/orders"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=c(148),Ae=c(149),Re=function(e){var t=e.order;return Object(k.jsx)("div",{children:Object(k.jsxs)("p",{children:[Object(k.jsxs)("span",{children:["Order Id: ",t.paymentIntent.id]})," / ",Object(k.jsxs)("span",{children:["Amount:"," / ",(t.paymentIntent.amount/=100).toLocaleString("en-US",{style:"currency",currency:"USD"})]})," / ",Object(k.jsxs)("span",{children:["Currency: ",t.paymentIntent.currency.toUpperCase()]})," / ",Object(k.jsxs)("span",{children:["Method: ",t.paymentIntent.payment_method_types[0]]})," / ",Object(k.jsxs)("span",{children:["Payment: ",t.paymentIntent.status.toUpperCase()]})," / ",Object(k.jsxs)("span",{children:["Orderd on:"," / ",new Date(1e3*t.paymentIntent.created).toLocaleString()]})," / ",Object(k.jsxs)("span",{className:"badge bg-primary text-white",children:["STATUS: ",t.orderStatus]})]})})},Te=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(f.c)((function(e){return Object(j.a)({},e)})).user;Object(n.useEffect)((function(){s()}),[]);var s=function(){return De(r.token).then((function(e){console.log(JSON.stringify(e.data,null,4)),a(e.data)}))},o=function(e){return Object(k.jsxs)("table",{className:"table table-bordered",children:[Object(k.jsx)("thead",{className:"thead-light",children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{scope:"col",children:"Title"}),Object(k.jsx)("th",{scope:"col",children:"Price"}),Object(k.jsx)("th",{scope:"col",children:"Brand"}),Object(k.jsx)("th",{scope:"col",children:"Color"}),Object(k.jsx)("th",{scope:"col",children:"Count"}),Object(k.jsx)("th",{scope:"col",children:"Shipping"})]})}),Object(k.jsx)("tbody",{children:e.products.map((function(e,t){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsx)("b",{children:e.product.title})}),Object(k.jsx)("td",{children:e.product.price}),Object(k.jsx)("td",{children:e.product.brand}),Object(k.jsx)("td",{children:e.color}),Object(k.jsx)("td",{children:e.count}),Object(k.jsx)("td",{children:"Yes"===e.product.shipping?Object(k.jsx)(Ie.a,{style:{color:"green"}}):Object(k.jsx)(Ae.a,{style:{color:"red"}})})]},t)}))})]})};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(ve,{})}),Object(k.jsxs)("div",{className:"col text-center",children:[Object(k.jsx)("h4",{children:c.length>0?"User purchase orders":"No purchase orders"}),c.map((function(e,t){return Object(k.jsxs)("div",{className:"m-5 p-3 card",children:[Object(k.jsx)(Re,{order:e}),o(e),Object(k.jsx)("div",{className:"row",children:Object(k.jsx)("div",{className:"col",children:Object(k.jsx)("p",{children:"PDF download"})})})]},t)}))]})]})})},Le=c(146),Fe=function(){var e=Object(n.useState)(5),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(l.f)();return Object(n.useEffect)((function(){var e=setInterval((function(){a((function(e){return--e}))}),1e3);return 0===c&&r.push("/"),function(){return clearInterval(e)}}),[c,r]),Object(k.jsx)("div",{className:"container p-5 text-center",children:Object(k.jsxs)("p",{children:["Redirecting you in ",c," seconds"]})})},Ue=function(e){var t=e.children,c=Object(Le.a)(e,["children"]),n=Object(f.c)((function(e){return Object(j.a)({},e)})).user;return n&&n.token?Object(k.jsx)(l.a,Object(j.a)(Object(j.a)({},c),{},{render:function(){return t}})):Object(k.jsx)(Fe,{})},Be=function(e){e.children;var t=Object(Le.a)(e,["children"]),c=Object(f.c)((function(e){return Object(j.a)({},e)})).user,a=Object(n.useState)(!1),r=Object(d.a)(a,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){c&&c.token&&S(c.token).then((function(e){console.log("CURRENT ADMIN RES",e),o(!0)})).catch((function(e){console.log("ADMIN ROUTE ERR",e),o(!1)}))}),[c]),s?Object(k.jsx)(l.a,Object(j.a)({},t)):Object(k.jsx)(Fe,{})},Ye=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(d.a)(r,2),l=s[0],j=s[1],b=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),j(!0),e.next=4,p.currentUser.updatePassword(c).then((function(){j(!1),a(""),u.b.success("Password updated")})).catch((function(e){j(!1),u.b.error(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(ve,{})}),Object(k.jsxs)("div",{className:"col",children:[l?Object(k.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(k.jsx)("h4",{children:"Password Update"}),Object(k.jsx)("form",{onSubmit:b,children:Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Your Password"}),Object(k.jsx)("input",{type:"password",onChange:function(e){return a(e.target.value)},className:"form-control",placeholder:"Enter new password",disabled:l,value:c}),Object(k.jsx)("button",{className:"btn btn-primary",disabled:!c||c.length<6||l,children:"Submit"})]})})]})]})})},qe=c(513),We=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(f.c)((function(e){return Object(j.a)({},e)})).user;Object(n.useEffect)((function(){s()}),[]);var s=function(){return Ne(r.token).then((function(e){a(e.data.wishlist)}))};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(ve,{})}),Object(k.jsxs)("div",{className:"col",children:[Object(k.jsx)("h4",{children:"Wishlist"}),c.map((function(e){return Object(k.jsxs)("div",{className:"alert alert-secondary",children:[Object(k.jsx)(g.b,{to:"/product/".concat(e.slug),children:e.title}),Object(k.jsx)("span",{onClick:function(){return t=e._id,we(t,r.token).then((function(e){s()}));var t},className:"btn btn-sm float-right",children:Object(k.jsx)(qe.a,{className:"text-danger"})})]},e._id)}))]})]})})},Ge=function(){return Object(k.jsx)("nav",{children:Object(k.jsxs)("ul",{className:"nav flex-column",children:[Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/admin/dashboard",className:"nav-link",children:"Dashboard"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/admin/product",className:"nav-link",children:"Product"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/admin/products",className:"nav-link",children:"Products"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/admin/category",className:"nav-link",children:"Category"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/admin/subcategory",className:"nav-link",children:"Sub Category"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/admin/coupon",className:"nav-link",children:"Coupon"})}),Object(k.jsx)("li",{className:"nav-item",children:Object(k.jsx)(g.b,{to:"/user/password",className:"nav-link",children:"Password"})})]})})},Je=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/admin/orders"),{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(i.a)(o.a.mark((function e(t,c,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.put("".concat("https://shop-node-deploy.herokuapp.com/api","/admin/order-status"),{orderId:t,orderStatus:c},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),Me=function(e){var t=e.orders,c=e.handleStatusChange,n=function(e){return Object(k.jsxs)("table",{className:"table table-bordered",children:[Object(k.jsx)("thead",{className:"thead-light",children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{scope:"col",children:"Title"}),Object(k.jsx)("th",{scope:"col",children:"Price"}),Object(k.jsx)("th",{scope:"col",children:"Brand"}),Object(k.jsx)("th",{scope:"col",children:"Color"}),Object(k.jsx)("th",{scope:"col",children:"Count"}),Object(k.jsx)("th",{scope:"col",children:"Shipping"})]})}),Object(k.jsx)("tbody",{children:e.products.map((function(e,t){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsx)("b",{children:e.product.title})}),Object(k.jsx)("td",{children:e.product.price}),Object(k.jsx)("td",{children:e.product.brand}),Object(k.jsx)("td",{children:e.color}),Object(k.jsx)("td",{children:e.count}),Object(k.jsx)("td",{children:"Yes"===e.product.shipping?Object(k.jsx)(Ie.a,{style:{color:"green"}}):Object(k.jsx)(Ae.a,{style:{color:"red"}})})]},t)}))})]})};return Object(k.jsx)(k.Fragment,{children:t.map((function(e){return Object(k.jsxs)("div",{className:"row pb-5",children:[Object(k.jsxs)("div",{className:"btn btn-block bg-light",children:[Object(k.jsx)(Re,{order:e,showStatus:!1}),Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-4",children:"Delivery Status"}),Object(k.jsx)("div",{className:"col-md-8",children:Object(k.jsxs)("select",{onChange:function(t){return c(e._id,t.target.value)},className:"form-control",defaultValue:e.orderStatus,name:"status",children:[Object(k.jsx)("option",{value:"Not Processed",children:"Not Processed"}),Object(k.jsx)("option",{value:"Processing",children:"Processing"}),Object(k.jsx)("option",{value:"Dispatched",children:"Dispatched"}),Object(k.jsx)("option",{value:"Cancelled",children:"Cancelled"}),Object(k.jsx)("option",{value:"Completed",children:"Completed"})]})})]})]}),n(e)]},e._id)}))})},He=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(f.c)((function(e){return Object(j.a)({},e)})).user;Object(n.useEffect)((function(){s()}),[]);var s=function(){return Je(r.token).then((function(e){console.log(JSON.stringify(e.data,null,4)),a(e.data)}))};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col-md-10",children:[Object(k.jsx)("h4",{children:"Admin Dashboard"}),Object(k.jsx)(Me,{orders:c,handleStatusChange:function(e,t){Ve(e,t,r.token).then((function(e){u.b.success("Status updated"),s()}))}})]})]})})},Ke=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/categories"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/category/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("https://shop-node-deploy.herokuapp.com/api","/category/").concat(t),{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(i.a)(o.a.mark((function e(t,c,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.put("".concat("https://shop-node-deploy.herokuapp.com/api","/category/").concat(t),c,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),$e=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/category"),t,{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/category/subs/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=c(514),tt=function(e){var t=e.name,c=e.handleSubmit,n=e.setName;return Object(k.jsx)("form",{onSubmit:c,children:Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Name"}),Object(k.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return n(e.target.value)},value:t,autoFocus:!0,required:!0}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{className:"btn btn-outline-primary",children:"Save"})]})})},ct=function(e){var t=e.keyword,c=e.setKeyword;return Object(k.jsx)("input",{type:"search",placeholder:"Search",value:t,onChange:function(e){e.preventDefault(),c(e.target.value.toLowerCase())},className:"form-control mb-4"})},nt=function(){var e=Object(f.c)((function(e){return Object(j.a)({},e)})).user,t=Object(n.useState)(""),c=Object(d.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(!1),l=Object(d.a)(s,2),b=l[0],p=l[1],h=Object(n.useState)([]),O=Object(d.a)(h,2),m=O[0],x=O[1],v=Object(n.useState)(""),y=Object(d.a)(v,2),N=y[0],w=y[1];Object(n.useEffect)((function(){S()}),[]);var S=function(){return Ke().then((function(e){return x(e.data)}))},C=function(){var t=Object(i.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.confirm("Delete?")&&(p(!0),Qe(c,e.token).then((function(e){p(!1),u.b.error("".concat(e.data.name," deleted")),S()})).catch((function(e){400===e.response.status&&(p(!1),u.b.error(e.response.data))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col",children:[b?Object(k.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(k.jsx)("h4",{children:"Create category"}),Object(k.jsx)(tt,{handleSubmit:function(t){t.preventDefault(),p(!0),$e({name:a},e.token).then((function(e){p(!1),r(""),u.b.success('"'.concat(e.data.name,'" is created')),S()})).catch((function(e){console.log(e),p(!1),400===e.response.status&&u.b.error(e.response.data)}))},name:a,setName:r}),Object(k.jsx)(ct,{keyword:N,setKeyword:w}),Object(k.jsx)("hr",{}),m.filter(function(e){return function(t){return t.name.toLowerCase().includes(e)}}(N)).map((function(e){return Object(k.jsxs)("div",{className:"alert alert-secondary",children:[e.name,Object(k.jsx)("span",{onClick:function(){return C(e.slug)},className:"btn btn-sm float-right",children:Object(k.jsx)(qe.a,{className:"text-danger"})}),Object(k.jsx)(g.b,{to:"/admin/category/".concat(e.slug),children:Object(k.jsx)("span",{className:"btn btn-sm float-right",children:Object(k.jsx)(et.a,{className:"text-warning"})})})]},e._id)}))]})]})})},at=function(e){var t=e.history,c=e.match,a=Object(f.c)((function(e){return Object(j.a)({},e)})).user,r=Object(n.useState)(""),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(!1),b=Object(d.a)(l,2),p=b[0],h=b[1];Object(n.useEffect)((function(){O()}),[]);var O=function(){return ze(c.params.slug).then((function(e){return i(e.data.name)}))};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col",children:[p?Object(k.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(k.jsx)("h4",{children:"Update category"}),Object(k.jsx)(tt,{handleSubmit:function(e){e.preventDefault(),h(!0),Ze(c.params.slug,{name:o},a.token).then((function(e){h(!1),i(""),u.b.success('"'.concat(e.data.name,'" is updated')),t.push("/admin/category")})).catch((function(e){console.log(e),h(!1),400===e.response.status&&u.b.error(e.response.data)}))},name:o,setName:i}),Object(k.jsx)("hr",{})]})]})})},rt=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/subcategories"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),st=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/subcategory/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("https://shop-node-deploy.herokuapp.com/api","/subcategory/").concat(t),{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),it=function(){var e=Object(i.a)(o.a.mark((function e(t,c,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.put("".concat("https://shop-node-deploy.herokuapp.com/api","/subcategory/").concat(t),c,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),lt=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/subcategory"),t,{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),ut=function(){var e=Object(f.c)((function(e){return Object(j.a)({},e)})).user,t=Object(n.useState)(""),c=Object(d.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(!1),l=Object(d.a)(s,2),b=l[0],p=l[1],h=Object(n.useState)([]),O=Object(d.a)(h,2),m=O[0],x=O[1],v=Object(n.useState)(""),y=Object(d.a)(v,2),N=y[0],w=y[1],S=Object(n.useState)([]),C=Object(d.a)(S,2),_=C[0],E=C[1],P=Object(n.useState)(""),D=Object(d.a)(P,2),I=D[0],A=D[1];Object(n.useEffect)((function(){R(),T()}),[]);var R=function(){return Ke().then((function(e){return x(e.data)}))},T=function(){return rt().then((function(e){return E(e.data)}))},L=function(){var t=Object(i.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.confirm("Delete?")&&(p(!0),ot(c,e.token).then((function(e){p(!1),u.b.error("".concat(e.data.name," deleted")),T()})).catch((function(e){400===e.response.status&&(p(!1),u.b.error(e.response.data))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col",children:[b?Object(k.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(k.jsx)("h4",{children:"Create Sub-category"}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Parent category"}),Object(k.jsxs)("select",{name:"category",className:"form-control",onChange:function(e){return w(e.target.value)},children:[Object(k.jsx)("option",{children:"Please Select one Main Category"}),m.length>0&&m.map((function(e){return Object(k.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(k.jsx)(tt,{handleSubmit:function(t){t.preventDefault(),p(!0),lt({name:a,parent:N},e.token).then((function(e){p(!1),r(""),u.b.success('"'.concat(e.data.name,'" is created')),T()})).catch((function(e){console.log(e),p(!1),400===e.response.status&&u.b.error(e.response.data)}))},name:a,setName:r}),Object(k.jsx)(ct,{keyword:I,setKeyword:A}),Object(k.jsx)("hr",{}),_.filter(function(e){return function(t){return t.name.toLowerCase().includes(e)}}(I)).map((function(e){return Object(k.jsxs)("div",{className:"alert alert-secondary",children:[e.name,Object(k.jsx)("span",{onClick:function(){return L(e.slug)},className:"btn btn-sm float-right",children:Object(k.jsx)(qe.a,{className:"text-danger"})}),Object(k.jsx)(g.b,{to:"/admin/subcategory/".concat(e.slug),children:Object(k.jsx)("span",{className:"btn btn-sm float-right",children:Object(k.jsx)(et.a,{className:"text-warning"})})})]},e._id)}))]})]})})},jt=function(e){var t=e.match,c=e.history,a=Object(f.c)((function(e){return Object(j.a)({},e)})).user,r=Object(n.useState)(""),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(!1),b=Object(d.a)(l,2),p=b[0],h=b[1],O=Object(n.useState)([]),m=Object(d.a)(O,2),x=m[0],g=m[1],v=Object(n.useState)(""),y=Object(d.a)(v,2),N=y[0],w=y[1];Object(n.useEffect)((function(){S(),C()}),[]);var S=function(){return Ke().then((function(e){return g(e.data)}))},C=function(){return st(t.params.slug).then((function(e){i(e.data.name),w(e.data.parent)}))};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col",children:[p?Object(k.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(k.jsx)("h4",{children:"Create Sub-category"}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Parent category"}),Object(k.jsxs)("select",{name:"category",className:"form-control",onChange:function(e){return w(e.target.value)},children:[Object(k.jsx)("option",{children:"Please Select one Main Category"}),x.length>0&&x.map((function(e){return Object(k.jsx)("option",{value:e._id,selected:e._id===N,children:e.name},e._id)}))]})]}),Object(k.jsx)(tt,{handleSubmit:function(e){e.preventDefault(),h(!0),it(t.params.slug,{name:o,parent:N},a.token).then((function(e){h(!1),i(""),u.b.success('"'.concat(e.data.name,'" is updated')),c.push("/admin/subCategory")})).catch((function(e){console.log(e),h(!1),400===e.response.status&&u.b.error(e.response.data)}))},name:o,setName:i})]})]})})},dt=c(91),bt=c(85),pt=c(109),ht=pt.a.Option,Ot=function(e){var t=e.handleSubmit,c=e.handleChange,n=e.setValues,a=e.values,r=e.handleCatagoryChange,s=e.showSub,o=e.subOptions,i=a.title,l=a.description,u=a.price,d=a.categories,b=(a.category,a.subc),p=(a.shipping,a.quantity),h=(a.images,a.colors),O=a.brands;a.color,a.brand;return Object(k.jsxs)("form",{onSubmit:t,children:[Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Category"}),Object(k.jsxs)("select",{name:"category",className:"form-control",onChange:r,children:[Object(k.jsx)("option",{children:"Please Select one Main Category"}),d.length>0&&d.map((function(e){return Object(k.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),s&&Object(k.jsxs)("div",{children:[Object(k.jsx)("label",{children:"Sub Categories"}),Object(k.jsx)(pt.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select",value:b,onChange:function(e){return n(Object(j.a)(Object(j.a)({},a),{},{subc:e}))},children:o.length&&o.map((function(e){return Object(k.jsx)(ht,{value:e._id,children:e.name},e._id)}))})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Title"}),Object(k.jsx)("input",{type:"text",name:"title",className:"form-control",value:i,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Description"}),Object(k.jsx)("input",{type:"text",name:"description",className:"form-control",value:l,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Price"}),Object(k.jsx)("input",{type:"number",name:"price",className:"form-control",value:u,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Shipping"}),Object(k.jsxs)("select",{name:"shipping",className:"form-control",onChange:c,children:[Object(k.jsx)("option",{children:"Please select"}),Object(k.jsx)("option",{value:"Yes",children:"Yes"}),Object(k.jsx)("option",{value:"No",children:"No"})]})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Quantity"}),Object(k.jsx)("input",{type:"number",name:"quantity",className:"form-control",value:p,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Color"}),Object(k.jsxs)("select",{name:"color",className:"form-control",onChange:c,children:[Object(k.jsx)("option",{children:"Please select"}),h.map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}))]})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Brand"}),Object(k.jsxs)("select",{name:"brand",className:"form-control",onChange:c,children:[Object(k.jsx)("option",{children:"Please select"}),O.map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}))]})]}),Object(k.jsx)("button",{className:"btn btn-outline-info",children:"Save"})]})},mt=c(244),xt=c.n(mt),ft=c(498),gt="http://localhost:9000/api",vt=function(e){var t=e.values,c=e.setValues,n=e.setLoading,a=Object(f.c)((function(e){return Object(j.a)({},e)})).user;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"row",children:t.images&&t.images.map((function(e){return Object(k.jsx)(se.a,{count:"X",style:{cursor:"pointer"},onClick:function(){return r=e.public_id,n(!0),void y.a.post("".concat(gt,"/deleteimages"),{public_id:r},{headers:{authtoken:a?a.token:""}}).then((function(e){n(!1);var a=t.images.filter((function(e){return e.public_id!==r}));c(Object(j.a)(Object(j.a)({},t),{},{images:a}))})).catch((function(e){console.log(e),n(!1)}));var r},children:Object(k.jsx)(ft.a,{shape:"square",src:e.url,size:100,className:"ml-3"})},e.public_id)}))}),Object(k.jsx)("div",{className:"row",children:Object(k.jsxs)("label",{className:"btn btn-primary  btn-raised mt-3",children:["Choose File",Object(k.jsx)("input",{type:"file",multiple:!0,hidden:!0,accept:"images/*",onChange:function(e){var r=e.target.files,s=t.images;if(r){n(!0);for(var o=0;o<r.length;o++)xt.a.imageFileResizer(r[o],720,720,"JPEG",100,0,(function(e){y.a.post("".concat(gt,"/uploadimages"),{image:e},{headers:{authtoken:a?a.token:" "}}).then((function(e){console.log("img response>>>",e),n(!1),s.push(e.data),c(Object(j.a)(Object(j.a)({},t),{},{images:s}))})).catch((function(e){n(!1),console.log("CLOUDINARY UPLOAD ERR",e)}))}),"base64")}}})]})})]})},yt={title:"",descriptioin:"",price:"999",categories:[],category:"",subc:[],shipping:"Yes",quantity:"50",images:[],colors:["Black","Brown","Silver","White","Blue"],brands:["Police","4711","PlayBoy","Estle","Swiss Image","Plum","Deborah Milano","Ajmal","Guess"],color:"White",brand:"4711"},Nt=function(){var e=Object(n.useState)(yt),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(!1),b=Object(d.a)(l,2),p=b[0],h=b[1],O=Object(n.useState)(!1),m=Object(d.a)(O,2),x=m[0],g=m[1],v=Object(f.c)((function(e){return Object(j.a)({},e)})).user;Object(n.useEffect)((function(){y()}),[]);var y=function(){return Ke().then((function(e){return a(Object(j.a)(Object(j.a)({},c),{},{categories:e.data}))}))};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col-md-10",children:[x?Object(k.jsx)(bt.a,{className:"text-danger h1"}):Object(k.jsx)("h4",{children:"Product create"}),Object(k.jsx)("hr",{}),Object(k.jsx)("div",{className:"p-3",children:Object(k.jsx)(vt,{values:c,setValues:a,setLoading:g})}),Object(k.jsx)(Ot,{handleSubmit:function(e){e.preventDefault(),E(c,v.token).then((function(e){window.alert("".concat(e.data.title," is created")),window.location.reload()})).catch((function(e){console.log(e),u.b.error(e.response.data.err)}))},handleChange:function(e){a(Object(j.a)(Object(j.a)({},c),{},Object(dt.a)({},e.target.name,e.target.value)))},handleCatagoryChange:function(e){e.preventDefault(),a(Object(j.a)(Object(j.a)({},c),{},{subc:[],category:e.target.value})),Xe(e.target.value).then((function(e){i(e.data)})),h(!0)},setValues:a,values:c,showSub:p,subOptions:o})]})]})})},wt=B.a.Meta,St=function(e){var t=e.product,c=e.removeProduct,n=t.title,a=t.description,r=t.images,s=t.slug;return Object(k.jsx)(B.a,{style:{width:240,height:"150px",objectFit:"cover"},className:"p-1",cover:Object(k.jsx)("img",{alt:n,src:r&&r.length?r[0].url:" "}),actions:[Object(k.jsx)(g.b,{to:"/admin/product/".concat(s),children:Object(k.jsx)(et.a,{className:"text-warning"})}),Object(k.jsx)(qe.a,{className:"text-danger",onClick:function(){return c(s)}})],children:Object(k.jsx)(wt,{title:n,description:"".concat(a&&a.substring(0,40),"...")})})},kt=function(){var e=Object(f.c)((function(e){return Object(j.a)({},e)})).user,t=Object(n.useState)(!1),c=Object(d.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)([]),o=Object(d.a)(s,2),i=o[0],l=o[1];Object(n.useEffect)((function(){b()}),[]);var b=function(){r(!0),P(100).then((function(e){l(e.data),r(!1)})).catch((function(e){r(!1),console.log(e)}))},p=function(t){window.confirm("Are you sure you want to delete?")&&D(t,e.token).then((function(e){b(),u.b.error("".concat(e.data.title," is deleted"))})).catch((function(e){400===e.response.status&&u.b.error(e.response.data),console.log(e)}))};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col",children:[a?Object(k.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(k.jsx)("h4",{children:"All Products"}),Object(k.jsx)("div",{className:"row",children:i.map((function(e){return Object(k.jsx)("div",{className:"col-md-4 pb-4",children:Object(k.jsx)(St,{product:e,removeProduct:p})},e._id)}))})]})]})})},Ct=pt.a.Option,_t=function(e){var t=e.handleSubmit,c=e.handleChange,n=(e.setValues,e.values),a=e.selectedCategory,r=e.handleCategoryChange,s=e.categories,o=e.subOptions,i=e.arrayOfSubs,l=e.setArrayOfSubs,u=n.title,j=n.description,d=n.price,b=n.category,p=(n.subc,n.shipping),h=n.quantity,O=(n.images,n.colors),m=n.brands,x=n.color,f=n.brand;return Object(k.jsxs)("form",{onSubmit:t,children:[Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Category"}),Object(k.jsx)("select",{name:"category",className:"form-control",onChange:r,value:a||b._id,children:s.length>0&&s.map((function(e){return Object(k.jsx)("option",{value:e._id,children:e.name},e._id)}))})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("label",{children:"Sub Categories"}),Object(k.jsx)(pt.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select",value:i,onChange:function(e){return l(e)},children:o.length&&o.map((function(e){return Object(k.jsx)(Ct,{value:e._id,children:e.name},e._id)}))})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Title"}),Object(k.jsx)("input",{type:"text",name:"title",className:"form-control",value:u,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Description"}),Object(k.jsx)("input",{type:"text",name:"description",className:"form-control",value:j,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Price"}),Object(k.jsx)("input",{type:"number",name:"price",className:"form-control",value:d,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Shipping"}),Object(k.jsxs)("select",{name:"shipping",className:"form-control",onChange:c,children:[Object(k.jsx)("option",{value:"Yes",children:"Yes"}),Object(k.jsx)("option",{value:"No",children:"No"})]},"Yes"===p?"Yes":"No")]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Quantity"}),Object(k.jsx)("input",{type:"number",name:"quantity",className:"form-control",value:h,onChange:c})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Color"}),Object(k.jsx)("select",{value:x,name:"color",className:"form-control",onChange:c,children:O.map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}))})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Brand"}),Object(k.jsx)("select",{name:"brand",value:f,className:"form-control",onChange:c,children:m.map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}))})]}),Object(k.jsx)("button",{className:"btn btn-outline-info",children:"Save"})]})},Et={title:"",descriptioin:"",price:"",category:"",subc:[],shipping:"",quantity:"",images:[],colors:["Black","Brown","Silver","White","Blue"],brands:["Police","4711","PlayBoy","Estle","Swiss Image","Plum","Deborah Milano","Ajmal","Guess"],color:"",brand:""},Pt=function(e){var t=e.match,c=e.history,a=Object(f.c)((function(e){return Object(j.a)({},e)})).user,r=Object(n.useState)(Et),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)([]),b=Object(d.a)(l,2),p=b[0],h=b[1],O=Object(n.useState)([]),m=Object(d.a)(O,2),x=m[0],g=m[1],v=Object(n.useState)([]),y=Object(d.a)(v,2),N=y[0],w=y[1],S=Object(n.useState)(""),C=Object(d.a)(S,2),_=C[0],E=C[1],P=Object(n.useState)(!1),D=Object(d.a)(P,2),R=D[0],T=D[1],L=t.params.slug;Object(n.useEffect)((function(){F(),U()}),[]);var F=function(){I(L).then((function(e){i(Object(j.a)(Object(j.a)({},o),e.data)),Xe(e.data.category._id).then((function(e){h(e.data)}));var t=[];e.data.subc.map((function(e){return t.push(e._id)})),console.log("ARR",t),w((function(e){return t}))}))},U=function(){return Ke().then((function(e){g(e.data)}))};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col-md-10",children:[R?Object(k.jsx)(bt.a,{className:"text-danger h1"}):Object(k.jsx)("h4",{children:"Product update"}),Object(k.jsx)("hr",{}),Object(k.jsx)("div",{className:"p-3",children:Object(k.jsx)(vt,{values:o,setValues:i,setLoading:T})}),Object(k.jsx)(_t,{handleSubmit:function(e){e.preventDefault(),o.subc=N,o.category=_||o.category,A(L,o,a.token).then((function(e){T(!1),u.b.success('"'.concat(e.data.title,'" is updated')),c.push("/admin/products")})).catch((function(e){console.log(e),T(!1),u.b.error(e.response.data.err)}))},handleChange:function(e){i(Object(j.a)(Object(j.a)({},o),{},Object(dt.a)({},e.target.name,e.target.value)))},values:o,setValues:i,handleCategoryChange:function(e){e.preventDefault(),i(Object(j.a)(Object(j.a)({},o),{},{subc:[]})),E(e.target.value),Xe(e.target.value).then((function(e){h(e.data)})),o.category._id===e.target.value&&F(),w([])},categories:x,subOptions:p,arrayOfSubs:N,setArrayOfSubs:w,selectedCategory:_})]})]})})},Dt=c(177),It=c(516),At=function(e){var t=e.product,c=t.price,n=t.category,a=t.subc,r=t.shipping,s=t.color,o=t.brand,i=t.quantity,l=t.sold;return Object(k.jsxs)("ul",{className:"list-group",children:[Object(k.jsxs)("li",{className:"list-group-item",children:["Price"," ",Object(k.jsxs)("span",{className:"label label-default label-pill pull-xs-right",children:["$ ",c]})]}),n&&Object(k.jsxs)("li",{className:"list-group-item",children:["Category"," ",Object(k.jsx)(g.b,{to:"/category/".concat(n.slug),className:"label label-default label-pill pull-xs-right",children:n.name})]}),a&&Object(k.jsxs)("li",{className:"list-group-item",children:["Sub Categories",a.map((function(e){return Object(k.jsx)(g.b,{to:"/sub/".concat(e.slug),className:"label label-default label-pill pull-xs-right",children:e.name},e._id)}))]}),Object(k.jsxs)("li",{className:"list-group-item",children:["Shipping"," ",Object(k.jsx)("span",{className:"label label-default label-pill pull-xs-right",children:r})]}),Object(k.jsxs)("li",{className:"list-group-item",children:["Color"," ",Object(k.jsx)("span",{className:"label label-default label-pill pull-xs-right",children:s})]}),Object(k.jsxs)("li",{className:"list-group-item",children:["Brand"," ",Object(k.jsx)("span",{className:"label label-default label-pill pull-xs-right",children:o})]}),Object(k.jsxs)("li",{className:"list-group-item",children:["Available"," ",Object(k.jsx)("span",{className:"label label-default label-pill pull-xs-right",children:i})]}),Object(k.jsxs)("li",{className:"list-group-item",children:["Sold"," ",Object(k.jsx)("span",{className:"label label-default label-pill pull-xs-right",children:l})]})]})},Rt=(c(295),c(245)),Tt=c(497),Lt=c(515),Ft=function(e){var t=e.children,c=Object(f.c)((function(e){return Object(j.a)({},e)})).user,a=Object(n.useState)(!1),r=Object(d.a)(a,2),s=r[0],o=r[1],i=Object(l.f)(),b=Object(l.g)().slug;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{onClick:function(){c&&c.token?o(!0):i.push({pathname:"/login",state:{from:"/product/".concat(b)}})},children:[Object(k.jsx)(Lt.a,{className:"text-danger"})," ",Object(k.jsx)("br",{})," ",c?"Leave rating":"Login to leave rating"]}),Object(k.jsx)(Tt.a,{title:"Leave your rating",centered:!0,visible:s,onOk:function(){o(!1),u.b.success("Thanks for your review.")},onCancel:function(){return o(!1)},children:t})]})},Ut=Dt.a.TabPane,Bt=function(e){var t=e.product,c=e.onStartClick,a=e.star,r=t.title,s=t.images,o=t.description,i=t._id,b=Object(f.c)((function(e){return Object(j.a)({},e)})).user,p=Object(f.b)(),h=Object(n.useState)("Click to add"),O=Object(d.a)(h,2),m=O[0],x=O[1],g=Object(l.f)();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"col-md-7 bg-light",children:[Object(k.jsx)(Rt.Carousel,{showArrows:!0,autoPlay:!0,infiniteLoop:!0,children:s&&s.map((function(e){return Object(k.jsx)("img",{src:e.url,alt:e.title},e.public_id)}))}),Object(k.jsxs)(Dt.a,{type:"card",children:[Object(k.jsx)(Ut,{tab:"Description",children:o&&o},"1"),Object(k.jsx)(Ut,{tab:"More",children:"Call use on xxxx xxx xxx to learn more about this product."},"2")]})]}),Object(k.jsxs)("div",{className:"col-md-5",children:[Object(k.jsx)("h2",{className:"bg-info p-3",children:r}),t&&t.ratings&&t.ratings.length>0?V(t):Object(k.jsx)("div",{className:"text-center pt-1 pb-3",children:"NO RATING YET"}),Object(k.jsx)(B.a,{actions:[Object(k.jsx)(Y.a,{title:m,children:Object(k.jsxs)("a",{onClick:function(){var e=[];if(void 0!==typeof windows){localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart"))),e.push(Object(j.a)(Object(j.a)({},t),{},{count:1}));var c=H.a.uniqWith(e,H.a.isEqual);localStorage.setItem("cart",JSON.stringify(c)),x("Added"),p({type:" ADD_TO_CART",payload:e}),p({type:"CART_SIDE_VIEW",payload:!0})}},children:[Object(k.jsx)(W.a,{className:"text-danger"})," ",Object(k.jsx)("br",{})," Add to Cart"]})}),Object(k.jsxs)("a",{onClick:function(e){e.preventDefault(),ye(t._id,b.token).then((function(e){console.log("addtoWishlist>>>>",e.data),u.b.success("Added to wishlist"),g.push("/user/wishlist")}))},children:[Object(k.jsx)(It.a,{className:"text-info"})," ",Object(k.jsx)("br",{})," Add to Wishlist"]}),Object(k.jsx)(Ft,{children:Object(k.jsx)(J.a,{name:i,starRatedColor:"yellow",numberOfStars:5,isSelectable:!0,rating:a,changeRating:c})})],children:Object(k.jsx)(At,{product:t})})]})]})},Yt=function(e){var t=e.match,c=Object(f.c)((function(e){return Object(j.a)({},e)})).user,a=Object(n.useState)({}),r=Object(d.a)(a,2),s=r[0],o=r[1],i=Object(n.useState)([]),l=Object(d.a)(i,2),u=l[0],b=l[1],p=Object(n.useState)(0),h=Object(d.a)(p,2),O=h[0],m=h[1],x=t.params.slug;Object(n.useEffect)((function(){g()}),[x]),Object(n.useEffect)((function(){if(s.ratings&&c){var e=s.ratings.find((function(e){return e.postedBy.toString()===c._id.toString()}));e&&m(e.star)}}),[]);var g=function(){I(x).then((function(e){o(e.data),F(e.data._id).then((function(e){return b(e.data)}))}))};return Object(k.jsxs)("div",{className:"container-fluid",children:[Object(k.jsx)("div",{className:"row pt-4",children:Object(k.jsx)(Bt,{product:s,onStartClick:function(e,t){m(e),L(t,e,c.token).then((function(e){console.log("rated product>>",e.data),g()}))},star:O})}),Object(k.jsx)("div",{className:"row",children:Object(k.jsxs)("div",{className:"col text-center pt-5 pb-5",children:[Object(k.jsx)("hr",{}),Object(k.jsx)("h4",{children:"Related Products"}),Object(k.jsx)("hr",{})]})}),Object(k.jsx)("div",{className:"row pb-5",children:u.length?u.map((function(e){return Object(k.jsx)("div",{className:"col-md-4",children:Object(k.jsx)(z,{product:e})},e._id)})):Object(k.jsx)("div",{className:"text-center col",children:"No Products Found"})})]})},qt=c(247),Wt=c.n(qt),Gt=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/coupon"),{coupon:t},{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://shop-node-deploy.herokuapp.com/api","/coupons"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(i.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("https://shop-node-deploy.herokuapp.com/api","/coupon/").concat(t),{headers:{authtoken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),Mt=(c(300),function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(""),b=Object(d.a)(l,2),p=b[0],h=b[1],O=Object(n.useState)(""),m=Object(d.a)(O,2),x=(m[0],m[1]),g=Object(n.useState)([]),v=Object(d.a)(g,2),y=v[0],N=v[1],w=Object(f.c)((function(e){return Object(j.a)({},e)})).user;Object(n.useEffect)((function(){S()}),[]);var S=function(){return Jt().then((function(e){return N(e.data)}))};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-2",children:Object(k.jsx)(Ge,{})}),Object(k.jsxs)("div",{className:"col-md-10",children:[Object(k.jsx)("h4",{children:"Coupon"}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x(!0),console.table(c,o,p),Gt({name:c,expiry:o,discount:p},w.token).then((function(e){x(!1),a(""),h(""),i(""),u.b.success('"'.concat(e.data.name,'" is created'))})).catch((function(e){return console.log("create coupon err",e)}))},children:[Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{className:"text-muted",children:"Name"}),Object(k.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return a(e.target.value)},value:c,autoFocus:!0,required:!0})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{className:"text-muted",children:"Discount %"}),Object(k.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return h(e.target.value)},value:p,required:!0})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{className:"text-muted",children:"Expiry"}),Object(k.jsx)("br",{}),Object(k.jsx)(Wt.a,{className:"form-control",selected:new Date,value:o,onChange:function(e){return i(e)},required:!0})]}),Object(k.jsx)("button",{className:"btn btn-outline-primary",children:"Save"})]}),Object(k.jsxs)("h4",{children:[y.length," Coupons"]}),Object(k.jsxs)("table",{className:"table table-bordered",children:[Object(k.jsx)("thead",{className:"thead-light",children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{scope:"col",children:"Name"}),Object(k.jsx)("th",{scope:"col",children:"Expiry"}),Object(k.jsx)("th",{scope:"col",children:"Discount"}),Object(k.jsx)("th",{scope:"col",children:"Action"})]})}),Object(k.jsx)("tbody",{children:y.map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:e.name}),Object(k.jsx)("td",{children:new Date(e.expiry).toLocaleDateString()}),Object(k.jsxs)("td",{children:[e.discount,"%"]}),Object(k.jsx)("td",{children:Object(k.jsx)(qe.a,{onClick:function(){return t=e._id,void(window.confirm("Delete?")&&(x(!0),Vt(t,w.token).then((function(e){S(),x(!1),u.b.error('Coupon "'.concat(e.data.name,'" deleted'))})).catch((function(e){return console.log(e)}))));var t},className:"text-danger pointer"})})]},e._id)}))})]})]})]})})}),Ht=c(258),Kt=c(502),zt=c(501),Qt=c(492),Zt=c(517),$t=re.a.SubMenu,Xt=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)([0,0]),u=Object(d.a)(l,2),b=u[0],p=u[1],h=Object(n.useState)(!1),O=Object(d.a)(h,2),m=O[0],x=O[1],g=Object(n.useState)([]),v=Object(d.a)(g,2),y=v[0],N=v[1],w=Object(n.useState)([]),S=Object(d.a)(w,2),C=S[0],_=S[1],E=Object(n.useState)([]),D=Object(d.a)(E,2),I=D[0],A=D[1],R=Object(n.useState)(""),T=Object(d.a)(R,2),L=(T[0],T[1]),F=Object(n.useState)(["Police","4711","PlayBoy","Estle","Swiss Image","Plum","Deborah Milano","Ajmal","Guess"]),B=Object(d.a)(F,2),Y=B[0],q=(B[1],Object(n.useState)("")),W=Object(d.a)(q,2),G=W[0],J=W[1],V=Object(n.useState)(["Black","Brown","Silver","White","Blue","gold","blue"]),M=Object(d.a)(V,2),H=M[0],K=(M[1],Object(n.useState)("")),Q=Object(d.a)(K,2),Z=Q[0],$=Q[1],X=Object(n.useState)(""),ee=Object(d.a)(X,2),te=(ee[0],ee[1]),ce=Object(f.b)(),ne=Object(f.c)((function(e){return Object(j.a)({},e)})).search.text;Object(n.useEffect)((function(){se(),Ke().then((function(e){return N(e.data)})),rt().then((function(e){return A(e.data)}))}),[]);var ae=function(e){U(e).then((function(e){a(e.data)}))},se=function(){P(20).then((function(e){a(e.data),i(!1)}))};Object(n.useEffect)((function(){var e=setTimeout((function(){ae({query:ne}),ne||se()}),300);return function(){return clearTimeout(e)}}),[ne]),Object(n.useEffect)((function(){console.log("ok to request",c),ae({price:b})}),[m]);var oe=function(e){ce({type:"SEARCH_QUERY",payload:{text:""}}),p([0,0]),L(""),J(""),$("");var t=Object(Ht.a)(C),c=e.target.value,n=t.indexOf(c);-1===n?t.push(c):t.splice(n,1),_(t),ae({category:t})},ie=function(e){L(e),ce({type:"SEARCH_QUERY",payload:{text:""}}),p([0,0]),_([]),J(""),$(""),ae({sub:e})},le=function(e){L(""),ce({type:"SEARCH_QUERY",payload:{text:""}}),p([0,0]),_([]),$(""),J(e.target.value),ae({brand:e.target.value})},ue=function(e){L(""),ce({type:"SEARCH_QUERY",payload:{text:""}}),p([0,0]),_([]),J(""),$(e.target.value),ae({color:e.target.value})};return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsxs)("div",{className:"col-md-3 pt-2",children:[Object(k.jsx)("h4",{children:"Search/Filter"}),Object(k.jsx)("hr",{}),Object(k.jsxs)(re.a,{defaultOpenKeys:["1","2","3","4","5","6","7"],mode:"inline",children:[Object(k.jsx)($t,{title:Object(k.jsx)("span",{className:"h6",children:"\u20b9 Price"}),children:Object(k.jsx)("div",{children:Object(k.jsx)(Qt.a,{className:"ml-4 mr-4",tipFormatter:function(e){return"Rs-".concat(e)},range:!0,value:b,onChange:function(e){ce({type:"SEARCH_QUERY",payload:{text:""}}),_([]),p(e),L(""),J(""),$(""),te(""),setTimeout((function(){x(!m)}),300)},max:"10000"})})},"1"),Object(k.jsx)($t,{title:Object(k.jsxs)("span",{className:"h6",children:[Object(k.jsx)(Zt.a,{})," Categories"]}),children:Object(k.jsx)("div",{style:{maringTop:"-10px"},children:y.map((function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)(Kt.a,{onChange:oe,className:"pb-2 pl-4 pr-4",value:e._id,name:"category",checked:C.includes(e._id),children:e.name}),Object(k.jsx)("br",{})]},e._id)}))})},"2"),Object(k.jsx)($t,{title:Object(k.jsxs)("span",{className:"h6",children:[Object(k.jsx)(Zt.a,{})," Sub Categories"]}),children:Object(k.jsx)("div",{style:{maringTop:"-10px"},className:"pl-4 pr-4",children:I.map((function(e){return Object(k.jsx)("div",{onClick:function(){return ie(e)},className:"p-1 m-1 badge badge-secondary",style:{cursor:"pointer"},children:e.name},e._id)}))})},"4"),Object(k.jsx)($t,{title:Object(k.jsxs)("span",{className:"h6",children:[Object(k.jsx)(Zt.a,{})," Brands"]}),children:Object(k.jsx)("div",{style:{maringTop:"-10px"},className:"pr-5",children:Y.map((function(e){return Object(k.jsx)(zt.a,{value:e,name:e,checked:e===G,onChange:le,className:"pb-1 pl-4 pr-4",children:e},e)}))})},"5"),Object(k.jsx)($t,{title:Object(k.jsxs)("span",{className:"h6",children:[Object(k.jsx)(Zt.a,{})," Colors"]}),children:Object(k.jsx)("div",{style:{maringTop:"-10px"},className:"pr-5",children:H.map((function(e){return Object(k.jsx)(zt.a,{value:e,name:e,checked:e===Z,onChange:ue,className:"pb-1 pl-4 pr-4",children:e},e)}))})},"6")]})]}),Object(k.jsxs)("div",{className:"col-md-9 pt-2",children:[o?Object(k.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(k.jsx)("h4",{className:"text-danger",children:"Products"}),c.length<1&&Object(k.jsx)("p",{children:"No products found"}),Object(k.jsx)("div",{className:"row pb-5",children:c.map((function(e){return Object(k.jsx)("div",{className:"col-md-4 mt-3",children:Object(k.jsx)(z,{product:e})},e._id)}))})]})]})})},ec=c(257),tc=c(68),cc=function(e){var t=e.p,c=Object(f.b)();return Object(k.jsx)("tbody",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("div",{style:{height:"auto",width:"100px"},children:Object(k.jsx)("td",{children:t.images.length?Object(k.jsx)(ec.a,{small:t.images[0].url,large:t.images[0].url}):" No Image"})}),Object(k.jsx)("td",{className:"text-center",children:t.title}),Object(k.jsx)("td",{className:"text-center",children:t.brand}),Object(k.jsx)("td",{className:"text-center",children:Object(k.jsxs)("select",{className:"form-control",onChange:function(e){var n=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(n=JSON.parse(localStorage.getItem("cart"))),n.map((function(c,a){c._id===t._id&&(n[a].color=e.target.value)})),localStorage.setItem("cart",JSON.stringify(n)),c({type:"ADD_TO_CART",payload:n}))},name:"color",children:[t.color?Object(k.jsx)("option",{value:t.color,children:t.color}):Object(k.jsx)("option",{children:"Select"}),["Black","Brown","Silver","White","Blue"].filter((function(e){return e!==t.color})).map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}))]})}),Object(k.jsx)("td",{className:"text-center",children:Object(k.jsx)("input",{type:"number",className:"form-control",value:t.count,onChange:function(e){var n=e.target.value<1?1:e.target.value;if(n>t.quantity)u.b.error("Max available quantity: ".concat(t.quantity));else{var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(e,c){e._id===t._id&&(a[c].count=n)})),console.log("cart udpate color",a),localStorage.setItem("cart",JSON.stringify(a)),c({type:"ADD_TO_CART",payload:a}))}}})}),Object(k.jsx)("td",{className:"text-center",children:"Yes"===t.shipping?Object(k.jsx)(Ie.a,{className:"text-success"}):Object(k.jsx)(Ae.a,{className:"text-danger"})}),Object(k.jsxs)("td",{className:"text-center",children:["Rs.",t.price]}),Object(k.jsx)("td",{className:"text-center",children:Object(k.jsx)(tc.a,{onClick:function(){console.log(t._id,"to remove");var e=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart"))),e.map((function(c,n){c._id===t._id&&e.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(e)),c({type:"ADD_TO_CART",payload:e}),c({type:"CART_SIDE_VIEW",payload:!0}))},className:"text-danger pointer"})})]})})},nc=function(e){var t=e.history,c=Object(f.c)((function(e){return Object(j.a)({},e)})),n=c.cart,a=c.user;return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsxs)("div",{className:"col-md-8",children:[Object(k.jsxs)("h4",{children:["Cart/",n.length]}),n.length?Object(k.jsxs)("table",{className:"table table-bordered table-hover ",children:[Object(k.jsx)("thead",{className:"table-secondary text-danger",children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{scope:"col",children:"Image"}),Object(k.jsx)("th",{scope:"col",children:"Title"}),Object(k.jsx)("th",{scope:"col",children:"Brand"}),Object(k.jsx)("th",{scope:"col",children:"Color"}),Object(k.jsx)("th",{scope:"col",children:"Count"}),Object(k.jsx)("th",{scope:"col",children:"Shipping"}),Object(k.jsx)("th",{scope:"col",children:"Price"}),Object(k.jsx)("th",{scope:"col",children:"Remove"})]})}),n.map((function(e){return Object(k.jsx)(cc,{p:e},e.id)}))]}):Object(k.jsxs)("p",{children:["No Products in cart. Click Here for ",Object(k.jsx)(g.b,{to:"/shop",children:" Shopping"})]})]}),Object(k.jsxs)("div",{className:"col-md-4",children:[Object(k.jsx)("h3",{children:"OrderSummary"}),Object(k.jsx)("hr",{}),Object(k.jsx)("p",{children:"Products"}),Object(k.jsx)("hr",{}),n.map((function(e,t){return Object(k.jsx)("div",{children:Object(k.jsxs)("p",{children:[e.title," x ",e.count," = Rs.",e.price*e.count]})},t)})),Object(k.jsx)("hr",{}),"Total: ",Object(k.jsxs)("b",{children:["Rs.",n.reduce((function(e,t){return e+t.count*t.price}),0)]}),Object(k.jsx)("hr",{}),a?Object(k.jsx)("button",{className:"btn btn-sm btn-primary mt-2",disabled:!n.length,onClick:function(){Se(n,a.token).then((function(e){console.log("CART POST RES----------\x3e",e),e.data.ok&&t.push("/checkout")})).catch((function(e){return console.log("cart save err",e)}))},children:"Proceed to CheckOut"}):Object(k.jsx)("button",{className:"btn btn-sm btn-primary mt-2",children:Object(k.jsx)(g.b,{to:{pathname:"/login",state:{from:"cart"}},children:"Login to Checkout"})})]})]})})},ac=c(499),rc=function(e){e.children;var t=Object(f.b)(),c=Object(f.c)((function(e){return Object(j.a)({},e)})),n=c.sideDraw,a=c.cart,r={width:"100%",height:"50px",objectFit:"cover"};return Object(k.jsxs)(ac.a,{className:"text-center",visible:n,title:"CART / ".concat(a.length," Products "),closable:!1,onClose:function(){t({type:"CART_SIDE_VIEW",payload:!1})},children:[a.map((function(e){return Object(k.jsx)("div",{className:"row",children:Object(k.jsx)("div",{className:"col",children:e.images[0]?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("img",{src:e.images[0].url,style:r,alt:e.title}),Object(k.jsxs)("p",{className:"text-center bg-secondary text-light",children:[e.title," x ",e.count]})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("h6",{children:"No Image sorry"}),Object(k.jsxs)("p",{className:"text-center bg-secondary text-light",children:[e.title," x ",e.count]})]})})},e._id)})),Object(k.jsx)(g.b,{to:"/cart",children:Object(k.jsx)("button",{onClick:function(){return t({type:"SET_VISIBLE",payload:!1})},className:"text-center btn btn-primary btn-raised btn-block",children:"Go To Cart"})})]})},sc=c(250),oc=c.n(sc),ic=(c(486),function(e){var t=e.history,c=Object(n.useState)(0),a=Object(d.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)([]),i=Object(d.a)(o,2),l=i[0],b=i[1],p=Object(n.useState)(""),h=Object(d.a)(p,2),O=h[0],m=h[1],x=Object(n.useState)(!1),g=Object(d.a)(x,2),v=(g[0],g[1]),y=Object(n.useState)(""),N=Object(d.a)(y,2),w=N[0],S=N[1],C=Object(n.useState)(""),_=Object(d.a)(C,2),E=_[0],P=_[1],D=Object(n.useState)(""),I=Object(d.a)(D,2),A=I[0],R=I[1],T=Object(f.c)((function(e){return Object(j.a)({},e)})).user,L=Object(f.b)();Object(n.useEffect)((function(){ke(T.token).then((function(e){b(e.data.products),s(e.data.cartTotal)}))}),[]);return Object(k.jsxs)("div",{className:"row",children:[Object(k.jsxs)("div",{className:"col-md-6",children:[Object(k.jsx)("h4",{children:"Delivery Address"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)(oc.a,{theme:"snow",value:O,onChange:m}),Object(k.jsx)("button",{className:"btn btn-primary mt-2",onClick:function(){_e(T.token,O).then((function(e){e.data.ok&&(v(!0),u.b.success("Address saved"))}))},children:"Save"}),Object(k.jsx)("hr",{}),Object(k.jsx)("h4",{children:"Enter your CouponId"}),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("input",{onChange:function(e){S(e.target.value),R("")},value:w,type:"text",className:"form-control"}),Object(k.jsx)("button",{onClick:function(){console.log("send coupon to backend",w),Ee(T.token,w).then((function(e){console.log("RES ON COUPON APPLIED",e.data),e.data&&(P(e.data),L({type:"COUPON_APPLIED",payload:!0})),e.data.err&&(R(e.data.err),L({type:"COUPON_APPLIED",payload:!1}))}))},className:"btn btn-primary mt-2",children:"Apply"})]}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),A&&Object(k.jsx)("p",{className:"bg-danger p-2",children:A})]}),Object(k.jsxs)("div",{className:"col-md-6",children:[Object(k.jsx)("h4",{children:"Your Order Summary"}),Object(k.jsx)("hr",{}),Object(k.jsxs)("p",{children:["Products ",l.length]}),Object(k.jsx)("hr",{}),l.map((function(e,t){return Object(k.jsx)("div",{children:Object(k.jsxs)("p",{children:[e.product.title," (",e.color,") x ",e.count," ="," ",e.product.price*e.count]})},t)})),Object(k.jsx)("hr",{}),Object(k.jsxs)("p",{children:[" ",Object(k.jsxs)("b",{children:["Your Cart Total: ",r]})]}),E>0&&Object(k.jsxs)("p",{className:"bg-success p-2",children:["Discount Applied: Total Payable: $",E]}),Object(k.jsxs)("div",{className:"row",children:[Object(k.jsx)("div",{className:"col-md-6",children:Object(k.jsx)("button",{className:"btn btn-primary",onClick:function(){return t.push("/placeorder")},children:"Place Order"})}),Object(k.jsx)("div",{className:"col-md-6",children:Object(k.jsx)("button",{className:"btn btn-primary",onClick:function(){"undefined"!==typeof window&&localStorage.removeItem("cart"),L({type:"ADD_TO_CART",payload:[]}),Ce(T.token).then((function(e){b([]),s(0),P(0),S(""),u.b.success("Cart is emapty. Contniue shopping.")}))},disabled:!l.length,children:"Empty/Clear Cart"})})]})]})]})}),lc=c(251),uc=c(88),jc=c(518),dc=c(260),bc=function(e){e.history;var t=Object(f.b)(),c=Object(f.c)((function(e){return Object(j.a)({},e)})),a=c.user,r=c.coupon,s=Object(n.useState)(!1),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Object(n.useState)(null),h=Object(d.a)(p,2),O=h[0],m=h[1],x=Object(n.useState)(""),v=Object(d.a)(x,2),N=v[0],w=v[1],S=Object(n.useState)(!0),C=Object(d.a)(S,2),_=C[0],E=C[1],P=Object(n.useState)(""),D=Object(d.a)(P,2),I=D[0],A=D[1],R=Object(n.useState)(0),T=Object(d.a)(R,2),L=T[0],F=T[1],U=Object(n.useState)(0),Y=Object(d.a)(U,2),q=Y[0],W=Y[1],G=Object(n.useState)(0),J=Object(d.a)(G,2),V=J[0],M=J[1],H=Object(uc.useStripe)(),K=Object(uc.useElements)();Object(n.useEffect)((function(){(function(e,t){return y.a.post("".concat("https://shop-node-deploy.herokuapp.com/api","/create-payment-intent"),{couponApplied:t},{headers:{authtoken:e}})})(a.token,r).then((function(e){console.log("create payment intent",e.data),A(e.data.clientSecret),F(e.data.cartTotal),W(e.data.totalAfterDiscount),M(e.data.payable)}))}),[]);var z=function(){var e=Object(i.a)(o.a.mark((function e(c){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),w(!0),e.next=4,H.confirmCardPayment(I,{payment_method:{card:K.getElement(uc.CardElement),billing_details:{name:c.target.name.value}}});case 4:(n=e.sent).error?(m("Payment failed ".concat(n.error.message)),w(!1)):(Pe(n,a.token).then((function(e){e.data.ok&&("undefined"!==typeof window&&localStorage.removeItem("cart"),t({type:"ADD_TO_CART",payload:[]}),t({type:"COUPON_APPLIED",payload:!1}),Ce(a.token))})),console.log(JSON.stringify(n,null,4)),m(null),w(!1),b(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t.empty),m(t.error?t.error.message:"");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[!u&&Object(k.jsx)("div",{children:r&&void 0!==q?Object(k.jsx)("p",{className:"alert alert-success",children:"Total after discount: $".concat(q)}):Object(k.jsx)("p",{className:"alert alert-danger",children:"No coupon applied"})}),Object(k.jsx)("div",{className:"text-center pb-5",children:Object(k.jsx)(B.a,{actions:[Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(jc.a,{className:"text-info"})," ",Object(k.jsx)("br",{})," Total: $",L]}),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(dc.a,{className:"text-info"})," ",Object(k.jsx)("br",{})," Total payable : $",(V/100).toFixed(2)]})]})}),Object(k.jsxs)("form",{id:"payment-form",className:"stripe-form",onSubmit:z,children:[Object(k.jsx)(uc.CardElement,{id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},onChange:Q}),Object(k.jsx)("button",{className:"stripe-button",disabled:N||_||u,children:Object(k.jsx)("span",{id:"button-text",children:N?Object(k.jsx)("div",{className:"spinner",id:"spinner"}):"Pay"})}),Object(k.jsx)("br",{}),O&&Object(k.jsx)("div",{className:"card-error",role:"alert",children:O})]}),Object(k.jsxs)("p",{className:u?"result-message":"result-message hidden",children:["Payment Successful."," ",Object(k.jsx)(g.b,{to:"/user/history",children:"See it in your purchase history."})]})]})},pc=(c(487),function(){var e=Object(lc.a)("pk_test_51IZKZ4SBKRZHKo3pT8zJJxOXg1aljumgBVbHvILjhldZpUKaUwYqBz0Xr3ZQ3jDTKAVPCpdoLEWUTTDTZdXewWCD00CsYIDwRy");return Object(k.jsxs)("div",{className:"container p-5 text-center",children:[Object(k.jsx)("h4",{children:"Complete your purchase"}),Object(k.jsx)(uc.Elements,{stripe:e,children:Object(k.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(k.jsx)(bc,{})})})]})}),hc=function(){var e=Object(f.b)();return Object(n.useEffect)((function(){var t=p.onAuthStateChanged(function(){var t=Object(i.a)(o.a.mark((function t(c){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=5;break}return t.next=3,c.getIdTokenResult();case 3:n=t.sent,w(n.token).then((function(t){e({type:"LOGGED_IN_USER",payload:{name:t.data.name,email:t.data.email,token:n.token,role:t.data.role,_id:t.data._id}})})).catch((function(e){console.log(e)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[e]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(xe,{}),Object(k.jsx)(rc,{}),Object(k.jsx)(u.a,{}),Object(k.jsxs)(l.c,{children:[Object(k.jsx)(l.a,{exact:!0,path:"/",component:ae}),Object(k.jsx)(l.a,{exact:!0,path:"/login",component:C}),Object(k.jsx)(l.a,{exact:!0,path:"/register",component:_}),Object(k.jsx)(l.a,{exact:!0,path:"/register/complete",component:fe}),Object(k.jsx)(l.a,{exact:!0,path:"/forgot/password",component:ge}),Object(k.jsx)(Ue,{exact:!0,path:"/user/history",component:Te}),Object(k.jsx)(Ue,{exact:!0,path:"/user/wishlist",component:We}),Object(k.jsx)(Ue,{exact:!0,path:"/user/password",component:Ye}),Object(k.jsx)(Be,{exact:!0,path:"/admin/dashboard",component:He}),Object(k.jsx)(Be,{exact:!0,path:"/admin/category",component:nt}),Object(k.jsx)(Be,{exact:!0,path:"/admin/category/:slug",component:at}),Object(k.jsx)(Be,{exact:!0,path:"/admin/subcategory",component:ut}),Object(k.jsx)(Be,{exact:!0,path:"/admin/subcategory/:slug",component:jt}),Object(k.jsx)(Be,{exact:!0,path:"/admin/product",component:Nt}),Object(k.jsx)(Be,{exact:!0,path:"/admin/products",component:kt}),Object(k.jsx)(Be,{exact:!0,path:"/admin/product/:slug",component:Pt}),Object(k.jsx)(Be,{exact:!0,path:"/admin/coupon",component:Mt}),Object(k.jsx)(l.a,{exact:!0,path:"/product/:slug",component:Yt}),Object(k.jsx)(Ue,{exact:!0,path:"/checkout",component:ic}),Object(k.jsx)(l.a,{exact:!0,path:"/shop",component:Xt}),Object(k.jsx)(l.a,{exact:!0,path:"/cart",component:nc}),Object(k.jsx)(Ue,{exact:!0,path:"/placeorder",component:pc})]})]})},Oc=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,519)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))},mc=(c(488),c(82)),xc=c(252),fc={};"undefined"!==typeof window&&(fc=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]);var gc=Object(mc.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN_USER":case"LOGOUT":return t.payload;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_QUERY":return Object(j.a)(Object(j.a)({},e),t.payload);default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return t.payload;default:return e}},sideDraw:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_SIDE_VIEW":return t.payload;default:return e}},coupon:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COUPON_APPLIED":return t.payload;default:return e}}}),vc=Object(mc.createStore)(gc,Object(xc.composeWithDevTools)());r.a.render(Object(k.jsx)(f.a,{store:vc,children:Object(k.jsx)(g.a,{children:Object(k.jsx)(hc,{})})}),document.getElementById("root")),Oc()}},[[489,1,2]]]);
//# sourceMappingURL=main.8cabfd83.chunk.js.map